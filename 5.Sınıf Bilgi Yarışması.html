<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Din Kültürü ve Ahlak Bilgisi 5. Sınıf Ünite Etkinlikleri</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Ensure html and body take full height */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            color: #333;
            line-height: 1.6;
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to start to allow scrolling if content overflows */
            min-height: 100vh; /* Use min-height to ensure it takes full height */
            padding: 2rem 1rem;
            box-sizing: border-box; /* Include padding and border in the element's total width and height */
            background-size: cover; /* Görselin tüm alanı kaplamasını sağlar */
            background-position: center; /* Görseli ortalar */
            background-repeat: no-repeat; /* Görselin tekrarlanmasını engeller */
            background-attachment: fixed; /* Görselin sabit kalmasını sağlar */
            font-size: 1.25rem; /* Genel yazı boyutu biraz daha büyütüldü */
            transition: background-image 1s ease-in-out; /* Arka plan geçiş efekti */
        }
        .container {
            width: 100%;
            max-width: 900px; /* Increased max-width for the main container */
            padding: 2rem;
            background-color: #e6f0f5; /* Beyaz arka plan rengi değiştirildi */
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            flex-grow: 1; /* Allow container to grow within the flex parent */
            display: flex; /* Use flex for internal layout of container */
            flex-direction: column; /* Stack children vertically */
        }
        h1 {
            color: #2c3e50;
            font-weight: 700;
            text-align: center;
            margin-bottom: 2rem;
            font-size: 2.8rem; /* Başlık boyutu büyütüldü */
        }
        .score-board {
            display: flex;
            justify-content: space-around;
            align-items: center;
            background-color: #e0f7fa;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.08);
            flex-wrap: wrap; /* Allow wrapping for multiple scores */
        }
        .player-score-box {
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            margin: 0.5rem; /* Space between score boxes */
            flex-grow: 1; /* Allow score boxes to grow */
            min-width: 120px; /* Minimum width for each score box */
        }
        .player-score-box.active-player-score {
            background-color: #c7d2fe; /* Light blue for active player */
            border-color: #4f46e5; /* Darker blue border */
            color: #4f46e5;
            font-weight: 700;
            transform: scale(1.05);
        }
        .player-score-box.inactive-player-score {
            background-color: #e0f7fa;
            color: #00796b;
        }
        .score-board .score-item { /* Changed from div to score-item for more specific styling */
            text-align: center;
            font-weight: 600;
            color: #00796b;
            font-size: 1.35rem; /* Skor panosu metin boyutu büyütüldü */
        }
        .current-turn {
            font-size: 1.5rem; /* Sıra metin boyutu büyütüldü */
            font-weight: 700;
            color: #6366f1;
            margin: 0.5rem; /* Space around current turn display */
        }
        .question-area {
            min-height: 180px; /* Minimum height for the question area increased */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            margin-bottom: 0; /* Boşluk kaldırıldı */
            flex-grow: 1; /* Allow question area to grow */
        }
        .question-block {
            padding: 2rem; /* Increased padding for question block */
            background-color: #e3f2fd; /* New color for the question area */
            border-radius: 8px;
            border: 1px solid #90caf9; /* More distinct border */
            width: 100%;
            box-sizing: border-box;
            /* Added for "box-opening" effect */
            opacity: 1;
            transform: scale(1);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
            margin-bottom: 1.5rem; /* Added margin to separate from feedback */
        }
        .question-block.question-block-closed {
            opacity: 0;
            transform: scale(0.8);
        }
        .question-text {
            font-size: 1.6rem; /* Soru metni boyutu daha da büyütüldü */
            margin-bottom: 1.8rem;
            font-weight: 500;
            line-height: 1.8;
        }
        .options-container {
            display: flex;
            flex-direction: row; /* Options side-by-side */
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
            justify-content: center; /* Center options horizontally */
            gap: 1.2rem; /* Space between boxes increased */
            margin-top: 1.5rem;
        }
        .option-label {
            display: flex; /* Keep flex for centering content within the box */
            align-items: center;
            justify-content: center; /* Center text and radio button */
            cursor: pointer;
            padding: 1.2rem 1.8rem; /* Increased padding for box feel */
            border-radius: 10px; /* More rounded corners */
            transition: all 0.2s ease-in-out; /* Smooth transition for hover/active */
            flex-basis: calc(50% - 0.6rem); /* Exactly half minus half the gap */
            max-width: calc(50% - 0.6rem); /* Ensures no more than two per row */
            min-width: 200px; /* Minimum width for each option box increased */
            box-sizing: border-box;
            font-size: 1.35rem; /* Cevap metni boyutu daha da büyütüldü */
            font-weight: 500;
            text-align: center; /* Ensure text is centered */
            border: 2px solid transparent; /* Default transparent border */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08); /* Subtle shadow */
        }
        .option-label:hover {
            transform: translateY(-3px); /* Lift effect on hover */
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.12);
        }
        .option-label input[type="radio"] {
            /* Visually hide the radio button, but keep it functional */
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
            pointer-events: none; /* Ensure clicks go through to the label */
        }

        /* New classes for option box colors */
        .option-color-1 { background-color: #dbeafe; border-color: #93c5fd; color: #1e40af; } /* Blue */
        .option-color-2 { background-color: #d1fae5; border-color: #6ee7b7; color: #065f46; } /* Green */
        .option-color-3 { background-color: #ffe4e6; border-color: #fca5a5; color: #be123c; } /* Red */
        .option-color-4 { background-color: #fffbeb; border-color: #fcd34d; color: #92400e; } /* Yellow */
        .option-color-5 { background-color: #e0e7ff; border-color: #a78bfa; color: #4338ca; } /* Indigo */


        /* Adjust correct/incorrect highlights for new box style */
        .option-label.correct-option-highlight {
            background-color: #a7f3d0 !important; /* Brighter green for correct */
            border-color: #065f46 !important; /* Darker green border */
            color: #065f46 !important;
            transform: none; /* No lift on highlight */
            box-shadow: 0 4px 10px rgba(6, 95, 70, 0.2);
        }
        .option-label.incorrect-selected-option {
            background-color: #fecaca !important; /* Light red for incorrect selected */
            border-color: #991b1b !important; /* Darker red border */
            color: #991b1b !important;
            transform: none; /* No lift on highlight */
            box-shadow: 0 4px 10px rgba(153, 27, 27, 0.2);
        }

        /* Ensure the text is visible and centered */
        .option-label span {
            display: block;
            width: 100%;
        }

        /* Responsive adjustments for smaller screens */
        @media (max-width: 640px) {
            .option-label {
                max-width: 100%; /* Full width on small screens */
                min-width: unset;
                flex-basis: 100%; /* Full width on small screens */
            }
        }
        .button-group {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 0; /* Boşluk kaldırıldı */
        }
        .action-button {
            padding: 0.9rem 2.2rem; /* Buton paddingi büyütüldü */
            background-color: #6366f1;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.3rem; /* Buton metin boyutu büyütüldü */
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        }
        .action-button:hover {
            background-color: #4f46e5;
            transform: translateY(-2px);
        }
        .action-button:active {
            transform: translateY(0);
        }
        .action-button:disabled {
            background-color: #a7a7a7;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }
        .feedback-message {
            text-align: center;
            margin-top: 1.5rem; /* Ensure space from the question block */
            font-size: 1.3rem; /* Geri bildirim metin boyutu büyütüldü */
            font-weight: 600;
            padding: 0.9rem; /* Geri bildirim paddingi büyütüldü */
            border-radius: 8px;
            opacity: 0;
            transition: opacity 0.5s ease;
            display: flex; /* Use flex to center content */
            align-items: center;
            justify-content: center;
            gap: 0.5rem; /* Space between icon and text */
        }
        .feedback-message.show {
            opacity: 1;
        }
        .feedback-message.incorrect {
            background-color: #fee2e2; /* Light Red */
            color: #b91c1c; /* Darker Red */
            border: 1px solid #fca5a5;
        }
        .explanation-text {
            font-size: 1.1rem; /* Açıklama metin boyutu büyütüldü */
            font-weight: 400;
            margin-top: 0.6rem;
            color: #4a5568;
        }
        .score-display {
            text-align: center;
            font-size: 1.6rem; /* Skor göstergesi metin boyutu büyütüldü */
            font-weight: 700;
            margin-top: 2rem;
            padding: 1.1rem;
            background-color: #e0f2fe;
            border-radius: 8px;
            color: #0c4a6e;
        }
        .question-counter {
            font-size: 1.2rem; /* Soru sayacı metin boyutu büyütüldü */
            font-weight: 500;
            color: #555;
            margin-bottom: 1.1rem;
        }
        .question-navigation {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.9rem; /* Space between boxes increased */
            margin-bottom: 2.2rem;
            padding: 1.2rem;
            background-color: #e0f2fe;
            border-radius: 8px;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.06);
        }
        .question-nav-item {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px; /* Box width increased */
            height: 50px; /* Box height increased */
            border-radius: 8px; /* More rounded corners */
            background-color: #bfdbfe;
            color: #1e40af;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
            text-decoration: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            font-size: 1.2rem; /* Soru navigasyon öğesi metin boyutu büyütüldü */
        }
        .question-nav-item:hover {
            background-color: #93c5fd;
            transform: translateY(-2px);
        }
        .question-nav-item.active-question {
            background-color: #3b82f6;
            color: white;
            font-weight: 700;
            box-shadow: 0 4px 8px rgba(59, 130, 246, 0.4);
            transform: translateY(-2px);
        }
        .question-nav-item.answered-correctly {
            background-color: #a7f3d0; /* Green-200 */
            color: #065f46; /* Green-800 */
        }
        .question-nav-item.answered-incorrectly {
            background-color: #fecaca; /* Red-200 */
            color: #991b1b; /* Red-800 */
        }
        .question-nav-item.disabled-selection {
            cursor: not-allowed;
            opacity: 0.6;
        }
        .return-button {
            background-color: #10b981; /* Green color for return button */
        }
        .return-button:hover {
            background-color: #059669;
        }
        .next-button { /* Style for the new "Next Question" button */
            background-color: #3b82f6; /* Blue color */
        }
        .next-button:hover {
            background-color: #2563eb;
        }
        .reset-button {
            background-color: #ef4444;
        }
        .reset-button:hover {
            background-color: #dc2626;
        }
        .hidden {
            display: none;
        }
        .feedback-icon {
            font-size: 1.3em;
            margin-right: 0.4em;
        }
        .timer-display {
            font-size: 1.3rem; /* Zamanlayıcı metin boyutu büyütüldü */
            font-weight: 600;
            color: #ef4444; /* Red color for timer */
            margin-bottom: 1.1rem;
            text-align: center;
        }
        .timer-display.warning {
            color: #f59e0b; /* Orange for warning */
        }
        .timer-display.critical {
            color: #dc2626; /* Darker red for critical */
        }
        .player-selection-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            gap: 2.2rem;
            text-align: center;
        }
        .player-selection-screen h2 {
            font-size: 2.5rem; /* Oyuncu seçimi başlık boyutu büyütüldü */
            font-weight: 600;
            color: #2c3e50;
        }
        .player-selection-screen .action-button {
            min-width: 220px;
        }
        .team-selection-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1.5rem;
        }
        /* New styles for LLM explanation */
        .detailed-explanation-container {
            margin-top: 1.8rem;
            padding: 1.2rem;
            background-color: #f0f9ff;
            border: 1px solid #a5d8ff;
            border-radius: 8px;
            font-size: 1.1rem; /* Detaylı açıklama metin boyutu büyütüldü */
            color: #2c3e50;
            line-height: 1.6;
            text-align: left;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .loading-spinner {
            border: 4px solid #f3f3f3; /* Light grey */
            border-top: 4px solid #3498db; /* Blue */
            border-radius: 50%;
            width: 28px; /* Spinner boyutu büyütüldü */
            height: 28px; /* Spinner boyutu büyütüldü */
            animation: spin 1s linear infinite;
            margin: 1.2rem auto;
            display: none; /* Hidden by default */
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Fullscreen overlay for question */
        #fullscreen-overlay {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black */
            z-index: 40;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        #fullscreen-overlay.show {
            opacity: 1;
        }

        /* Fullscreen question container */
        #quiz-content.fullscreen-active {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 50;
            background-color: #e6f0f5; /* Match container background */
            border-radius: 0; /* No rounded corners for full screen */
            box-shadow: none; /* No shadow for full screen */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start; /* Content starts from top */
            padding: 2.5rem 1.5rem; /* Responsive padding increased */
            overflow-y: auto; /* Enable scrolling for long questions */
            transition: all 0.5s ease-in-out;
        }

        #quiz-content.fullscreen-active #timer-display {
            margin-top: 1.2rem; /* Space from top of the screen */
            margin-bottom: 1.2rem; /* Space before question block */
            font-size: 2rem; /* Timer font size in fullscreen */
            width: 100%;
            text-align: center;
            color: #ef4444; /* Keep timer color */
        }

        #quiz-content.fullscreen-active .question-area {
            flex-grow: 1; /* Take available space */
            display: flex;
            flex-direction: column;
            justify-content: center; /* Vertically center content if space allows */
            align-items: center;
            width: 100%;
            max-width: 900px; /* Max width for the question content increased */
            margin: 0 auto; /* Center the question content horizontally */
        }

        #quiz-content.fullscreen-active .question-block {
            width: 100%; /* Ensure question block fills its parent */
            padding: 2rem; /* Increased padding for question block in fullscreen */
            box-sizing: border-box; /* Include padding in width */
            background-color: #e3f2fd;
            border-radius: 8px;
            border: 1px solid #90caf9;
            /* Keep the opening animation styles */
            opacity: 1;
            transform: scale(1);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
            margin-bottom: 1.5rem; /* Added margin to separate from feedback */
        }

        #quiz-content.fullscreen-active .button-group {
            margin-top: 2.5rem; /* Increased margin-top for buttons in fullscreen */
            width: 100%; /* Ensure buttons are centered in the fullscreen view */
            max-width: 900px; /* Max width for buttons in fullscreen */
        }
        .question-screen-instruction-message {
            text-align: center;
            font-size: 1.1rem; /* Adjusted for consistency */
            font-weight: 500;
            color: #555;
            margin-top: 1rem; /* Increased margin for better spacing */
        }
        /* Styles for concept bubbles */
        .concept-bubbles-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.75rem; /* Space between bubbles */
            margin-top: 2rem;
            padding: 1rem;
            background-color: #f8fafc; /* Light background for bubbles */
            border-radius: 8px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
        }
        .concept-bubble {
            padding: 0.6rem 1.2rem;
            background-color: #e0f2fe; /* Light blue bubble color */
            color: #0c4a6e; /* Dark blue text */
            border-radius: 9999px; /* Pill shape */
            font-size: 1rem;
            font-weight: 500;
            white-space: nowrap; /* Keep text on one line */
            box-shadow: 0 2px 5px rgba(0,0,0,0.08);
            transition: background-color 0.2s ease, transform 0.1s ease;
            cursor: pointer; /* Make bubbles clickable */
        }
        .concept-bubble:hover {
            background-color: #90cdf4; /* Darker blue on hover */
            transform: translateY(-1px);
        }
        .concept-bubble.correct-match {
            background-color: #a7f3d0 !important; /* Green for correct */
            border: 2px solid #065f46;
            color: #065f46;
        }
        .concept-bubble.incorrect-match {
            background-color: #fecaca !important; /* Red for incorrect */
            border: 2px solid #991b1b;
            color: #991b1b;
        }
        .concept-bubble.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .concept-pagination-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        .concept-pagination-controls .action-button {
            padding: 0.6rem 1.5rem;
            font-size: 1rem;
        }
        .concept-page-info {
            font-size: 1.1rem;
            font-weight: 500;
            color: #555;
        }
    </style>
    <script type="module">
        console.log("Script module started.");
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

        // Global Firebase variables
        window.firebaseApp = null;
        window.auth = null;
        window.userId = null;

        // Game state variables
        window.teamScores = [];
        window.numTeams = 0;
        window.currentPlayer = 0;
        window.currentQuestionIndex = 0;
        window.answeredQuestions = {}; // { questionId: { isCorrect: boolean, userAnswer: string, answeredBy: number } }
        let timer = 40;
        let timerInterval;
        let shuffledQuestions = []; // Questions for the current unit's game
        window.currentUnit = null; // Stores the currently selected unit ID

        // Team names for display
        window.teamNames = ['A Takımı', 'B Takımı', 'C Takımı', 'D Takımı', 'E Takımı'];

        // Background themes mapping
        const backgroundThemes = {
            'unit1': 'url("https://placehold.co/1920x1080/81D4FA/000000?text=Allah+%C4%B0nanc%C4%B1")',
            'unit2': 'url("https://placehold.co/1920x1080/FFCDD2/000000?text=Namaz")',
            'unit3': 'url("https://placehold.co/1920x1080/B3E5FC/000000?text=Kur%27an-%C4%B1+Kerim")',
            'unit4': 'url("https://placehold.co/1920x1080/C8E6C9/000000?text=Peygamber+K%C4%B1ssalar%C4%B1")',
            'unit5': 'url("https://placehold.co/1920x1080/FFF9C4/000000?text=Mimarimizde+Din%C3%AE+Motifler")',
            'general': 'url("https://placehold.co/1920x1080/E0F2F7/000000?text=Din+K%C3%BClt%C3%BCr%C3%BC+Bilgi+Yar%C4%B1%C5%9Fmas%C4%B1")'
        };

        function setGameBackground(themeKey) {
            const imageUrl = backgroundThemes[themeKey] || backgroundThemes['general'];
            document.body.style.backgroundImage = imageUrl;
        }

        // Questions for each unit
        const unitQuestions = {
            'unit1': [ // 1. Ünite: Allah İnancı (Expanded to ~20 questions)
                { id: 'u1_tf1', type: 'trueFalse', question: "Evrendeki her şey tesadüfen oluşmuştur.", answer: "Y", explanation: "Evrendeki mükemmel düzen, bir yaratıcının varlığını gösterir.", theme: 'unit1' },
                { id: 'u1_tf2', type: 'trueFalse', question: "Allah (cc) birdir ve eşi benzeri yoktur.", answer: "D", explanation: "Tevhit inancı, Allah'ın birliğini ifade eder.", theme: 'unit1' },
                { id: 'u1_tf3', type: 'trueFalse', question: "Esma-ül Hüsna, Allah'ın güzel isimleridir.", answer: "D", explanation: "Esma-ül Hüsna, Allah'ın yüce sıfatlarını ve isimlerini ifade eder.", theme: 'unit1' },
                { id: 'u1_tf4', type: 'trueFalse', question: "İhlas Suresi, Allah'ın birliğini anlatır.", answer: "D", explanation: "İhlas Suresi, Allah'ın tek ve benzersiz olduğunu vurgular.", theme: 'unit1' },
                { id: 'u1_tf5', type: 'trueFalse', question: "Allah'ın her şeyi görmesi ve bilmesi O'nın her şeye gücünün yettiğini gösterir.", answer: "D", explanation: "Allah'ın görmesi ve bilmesi, O'nun ilim ve basar sıfatlarıyla ilgilidir.", theme: 'unit1' },
                { id: 'u1_tf6', type: 'trueFalse', question: "İnsan, Allah'ı sadece akıl yoluyla tam olarak kavrayabilir.", answer: "Y", explanation: "İnsan, Allah'ı akıl yoluyla anlayabilir ancak O'nun yüceliğini ve sıfatlarını tam olarak kavramak için vahye de ihtiyacı duyar.", theme: 'unit1' },
                { id: 'u1_tf7', type: 'trueFalse', question: "Allah'ın 'Rahman' ismi, O'nun çok merhametli olduğunu ifade eder.", answer: "D", explanation: "Rahman, Allah'ın dünyadaki tüm canlılara şefkatle muamele ettiğini gösteren ismidir.", theme: 'unit1' },
                { id: 'u1_tf8', type: 'trueFalse', question: "Allah'ın 'Semi' ismi, O'nun her şeyi işittiği anlamına gelir.", answer: "D", explanation: "Semi, Allah'ın her sesi, her fısıltıyı işittiğini ifade eden ismidir.", theme: 'unit1' },
                { id: 'u1_tf9', type: 'trueFalse', question: "Evrendeki düzenin bozulması, Allah'ın varlığını etkilemez.", answer: "D", explanation: "Evrendeki düzen, Allah'ın varlığının bir delilidir, ancak düzenin bozulması Allah'ın kudretini veya varlığını etkilemez.", theme: 'unit1' },
                { id: 'u1_tf10', type: 'trueFalse', question: "Yaratılan her şey, Allah'a muhtaçtır.", answer: "D", explanation: "Allah, hiçbir şeye muhtaç olmayan tek varlıktır, her şey O'na muhtaçtır.", theme: 'unit1' },
                { id: 'u1_fb1', type: 'fillInTheBlanks', question: "Evrendeki mükemmel düzen, Allah'ın ........................ ve kudretini gösterir.", answer: "varlığını", options: ["varlığını", "zayıflığını", "korkusunu", "öfkesini"], explanation: "Evrendeki her şey Allah'ın varlığını ve gücünü kanıtlar.", theme: 'unit1' },
                { id: 'u1_fb2', type: 'fillInTheBlanks', question: "Allah'ın eşi ve benzeri olmaması ........................ olarak adlandırılır.", answer: "tevhit", options: ["tevhit", "şirk", "putperestlik", "büyücülük"], explanation: "Tevhit, Allah'ın bir ve tek olması inancıdır.", theme: 'unit1' },
                { id: 'u1_fb3', type: 'fillInTheBlanks', question: "Allah'ın her şeyi yaratan ve var eden olması O'nun ........................ sıfatıdır.", answer: "Halık", options: ["Halık", "Rezzak", "Semi", "Basar"], explanation: "Halık, Allah'ın her şeyi yaratan olduğu anlamına gelir.", theme: 'unit1' },
                { id: 'u1_fb4', type: 'fillInTheBlanks', question: "İhlas Suresi, 'De ki: O Allah ........................' ayetiyle başlar.", answer: "bir", options: ["bir", "iki", "üç", "dört"], explanation: "Sure, Allah'ın birliğini net bir şekilde ifade eder.", theme: 'unit1' },
                { id: 'u1_fb5', type: 'fillInTheBlanks', question: "Allah'ın her şeyi rızıklandıran olması O'nun ........................ ismidir.", answer: "Rezzak", options: ["Rezzak", "Alim", "Kadir", "Rahim"], explanation: "Rezzak, Allah'ın tüm canlıların rızkını veren olduğu anlamına gelir.", theme: 'unit1' },
                { id: 'u1_mc1', type: 'multipleChoice', question: "Aşağıdakilerden hangisi Allah'ın güzel isimlerinden biri değildir?", options: ["Rahman", "Rahim", "Zalim", "Settar"], answer: "Zalim", explanation: "Zalim, Allah'ın sıfatlarından biri değildir. Allah adildir.", theme: 'unit1' },
                { id: 'u1_mc2', type: 'multipleChoice', question: "İhlas Suresi'nin ana mesajı nedir?", options: ["Namaz kılmak", "Zekat vermek", "Allah'ın birliği", "Oruç tutmak"], answer: "Allah'ın birliği", explanation: "İhlas Suresi, Allah'ın tek ve benzersiz olduğunu belirtir.", theme: 'unit1' },
                { id: 'u1_mc3', type: 'multipleChoice', question: "Allah'ın her şeyi bilmesi hangi ismiyle ifade edilir?", options: ["Kadir", "Alim", "Semi", "Basar"], answer: "Alim", explanation: "Alim, Allah'ın her şeyi eksiksiz ve kusursuz bilmesi anlamına gelir.", theme: 'unit1' },
                { id: 'u1_mc4', type: 'multipleChoice', question: "Evrendeki düzenin korunmasından sorumlu olan kimdir?", options: ["İnsanlar", "Melekler", "Allah (cc)", "Doğa"], answer: "Allah (cc)", explanation: "Evrendeki tüm düzen ve denge Allah'ın kudretiyle sağlanır.", theme: 'unit1' },
                { id: 'u1_mc5', type: 'multipleChoice', question: "Aşağıdakilerden hangisi Allah'a karşı görevlerimizden biri değildir?", options: ["O'na inanmak", "O'na ibadet etmek", "O'na isyan etmek", "O'na şükretmek"], answer: "O'na isyan etmek", explanation: "Allah'a isyan etmek, O'na karşı görevlerimizden biri değildir, aksine günahtır.", theme: 'unit1' }
            ],
            'unit2': [ // 2. Ünite: Namaz (Expanded to ~20 questions)
                { id: 'u2_tf1', type: 'trueFalse', question: "Namaz, İslam'ın beş şartından biridir.", answer: "D", explanation: "Namaz, kelime-i şehadetten sonra gelen en önemli ibadetlerdendir.", theme: 'unit2' },
                { id: 'u2_tf2', type: 'trueFalse', question: "Namaz kılmak için abdest almak şart değildir.", answer: "Y", explanation: "Namazın geçerli olması için abdest almak zorunludur.", theme: 'unit2' },
                { id: 'u2_tf3', type: 'trueFalse', question: "Namazda kıbleye dönmek şarttır.", answer: "D", explanation: "Namaz kılarken Kâbe'ye, yani kıbleye yönelmek namazın şartlarındandır.", theme: 'unit2' },
                { id: 'u2_tf4', type: 'trueFalse', question: "Namazda rükû, secde ve kıyam gibi bölümler bulunur.", answer: "D", explanation: "Rükû, secde ve kıyam (ayakta duruş), namazın temel rükünleridir.", theme: 'unit2' },
                { id: 'u2_tf5', type: 'trueFalse', question: "Namaz sadece bedenle yapılan bir ibadettir.", answer: "Y", explanation: "Namaz, bedenle (hareketler), kalple (niyet) ve dille (okumalar) yapılan bir ibadettir.", theme: 'unit2' },
                { id: 'u2_tf6', type: 'trueFalse', question: "Namaz, insanı kötülüklerden uzaklaştırır.", answer: "D", explanation: "Kur'an'da namazın insanı fahşa ve münkerden (kötülüklerden) alıkoyduğu belirtilir.", theme: 'unit2' },
                { id: 'u2_tf7', type: 'trueFalse', question: "Namazda Fatiha Suresi'ni okumak farzdır.", answer: "D", explanation: "Her rekatta Fatiha Suresi'ni okumak farzdır.", theme: 'unit2' },
                { id: 'u2_tf8', type: 'trueFalse', question: "Namazın ilk tekbirine iftitah tekbiri denir.", answer: "D", explanation: "Namazın başında alınan 'Allahu Ekber' tekbirine iftitah tekbiri denir.", theme: 'unit2' },
                { id: 'u2_tf9', type: 'trueFalse', question: "Namazda selam vermek, namazı bitirir.", answer: "D", explanation: "Namazın sonunda sağa ve sola selam vermekle namaz tamamlanır.", theme: 'unit2' },
                { id: 'u2_tf10', type: 'trueFalse', question: "Cemaatle namaz kılmak tek başına kılmaktan daha az sevaptır.", answer: "Y", explanation: "Cemaatle namaz kılmak, tek başına kılmaktan daha faziletlidir.", theme: 'unit2' },
                { id: 'u2_fb1', type: 'fillInTheBlanks', question: "Günde beş vakit namaz ........................ bir ibadettir.", answer: "farz", options: ["farz", "sünnet", "vacip", "müstehap"], explanation: "Namaz, müslümanlara farz kılınmış bir ibadettir.", theme: 'unit2' },
                { id: 'u2_fb2', type: 'fillInTheBlanks', question: "Namazda okunan ........................ Duası, Allah'a selam ve övgü içerir.", answer: "Tahiyyat", options: ["Tahiyyat", "Sübhaneke", "Fatiha", "Kevser"], explanation: "Tahiyyat Duası, namazın oturuşlarında okunur.", theme: 'unit2' },
                { id: 'u2_fb3', type: 'fillInTheBlanks', question: "Namazın dışındaki şartlara ........................ denir.", answer: "şartları", options: ["şartları", "rükünleri", "vacipleri", "sünnetleri"], explanation: "Namazın dışındaki şartlar, namaza başlamadan önce yerine getirilmesi gerekenlerdir.", theme: 'unit2' },
                { id: 'u2_fb4', type: 'fillInTheBlanks', question: "Namazda kıyam, rükû ve ........................ gibi hareketler vardır.", answer: "secde", options: ["secde", "oturma", "yatma", "koşma"], explanation: "Secde, namazdaki en önemli hareketlerden biridir.", theme: 'unit2' },
                { id: 'u2_fb5', type: 'fillInTheBlanks', question: "Namaz kılarken temiz bir yerde olmak ........................ şartlarından biridir.", answer: "namazın", options: ["namazın", "abdestin", "oruçun", "zekatın"], explanation: "Namaz kılınacak yerin temiz olması namazın şartlarındandır.", theme: 'unit2' },
                { id: 'u2_mc1', type: 'multipleChoice', question: "Aşağıdakilerden hangisi namazın hazırlık şartlarından biri değildir?", options: ["Abdest almak", "Elbisenin temiz olması", "Vaktin girmesi", "Oruç tutmak"], answer: "Oruç tutmak", explanation: "Oruç tutmak, namazın değil, ayrı bir ibadetin şartıdır.", theme: 'unit2' },
                { id: 'u2_mc2', type: 'multipleChoice', question: "Namazın insana kazandırdıklarından biri aşağıdakilerden hangisidir?", options: ["Tembellik", "Sorumsuzluk", "Disiplin ve düzen", "Korku"], answer: "Disiplin ve düzen", explanation: "Namaz, kişiye düzenli olmayı ve disiplini öğretir.", theme: 'unit2' },
                { id: 'u2_mc3', type: 'multipleChoice', question: "Namazda 'Sübhâneke' duasını okumak hangi bölümdedir?", options: ["Rükûda", "Secdede", "İlk rekatın başında", "Son oturuşta"], answer: "İlk rekatın başında", explanation: "Sübhâneke duası, namazın ilk rekatının başında okunur.", theme: 'unit2' },
                { id: 'u2_mc4', type: 'multipleChoice', question: "Namazda 'Allahü Ekber' diyerek eğilmeye ne denir?", options: ["Secde", "Kıyam", "Rükû", "Kade"], answer: "Rükû", explanation: "Rükû, namazda belden eğilerek yapılan harekettir.", theme: 'unit2' },
                { id: 'u2_mc5', type: 'multipleChoice', question: "Namazı bozan durumlardan biri aşağıdakilerden hangisidir?", options: ["Gülmek", "Tekbir almak", "Fatiha okumak", "Selam vermek"], answer: "Gülmek", explanation: "Namazda kahkaha ile gülmek namazı bozar.", theme: 'unit2' }
            ],
            'unit3': [ // 3. Ünite: Kur'an-ı Kerim (Expanded to ~20 questions)
                { id: 'u3_tf1', type: 'trueFalse', question: "Kur'an-ı Kerim'deki en küçük bölüme sure denir.", answer: "Y", explanation: "En küçük bölüm ayettir, sureler ayetlerden oluşur.", theme: 'unit3' },
                { id: 'u3_tf2', type: "trueFalse", question: "Kevser Suresi, Kur'an'ın en uzun suresidir.", answer: "Y", explanation: "Kevser Suresi, Kur'an'ın en kısa suresidir.", theme: 'unit3' },
                { id: 'u3_tf3', type: 'trueFalse', question: "Kur'an-ı Kerim, Hz. Muhammed (sav)'e indirilmiştir.", answer: "D", explanation: "Kur'an, son peygamber Hz. Muhammed'e vahyedilmiştir.", theme: 'unit3' },
                { id: 'u3_tf4', type: 'trueFalse', question: "Kur'an-ı Kerim'in tamamı bir kerede indirilmiştir.", answer: "Y", explanation: "Kur'an, 23 yıllık bir süreçte parça parça indirilmiştir.", theme: 'unit3' },
                { id: 'u3_tf5', type: 'trueFalse', question: "Kur'an-ı Kerim'i okumak ibadettir.", answer: "D", explanation: "Kur'an okumak, Allah'ı anmak ve O'nun kelamını dinlemek olduğu için ibadettir.", theme: 'unit3' },
                { id: 'u3_tf6', type: 'trueFalse', question: "Kur'an-ı Kerim'in dili Arapçadır.", answer: "D", explanation: "Kur'an, Arapça olarak indirilmiştir.", theme: 'unit3' },
                { id: 'u3_tf7', type: 'trueFalse', question: "Kur'an-ı Kerim'in diğer adı Furkan'dır.", answer: "D", explanation: "Furkan, hakkı batıldan ayıran anlamına gelir ve Kur'an'ın isimlerindendir.", theme: 'unit3' },
                { id: 'u3_tf8', type: 'trueFalse', question: "Kur'an-ı Kerim'i ezberleyen kişiye hafız denir.", answer: "D", explanation: "Hafız, Kur'an'ın tamamını ezberlemiş kişidir.", theme: 'unit3' },
                { id: 'u3_tf9', type: 'trueFalse', question: "Kur'an-ı Kerim'in ilk suresi Fatiha'dır.", answer: "D", explanation: "Fatiha Suresi, Kur'an'ın açılış suresidir.", theme: 'unit3' },
                { id: 'u3_tf10', type: 'trueFalse', question: "Kur'an-ı Kerim'de sadece dini konular yer alır.", answer: "Y", explanation: "Kur'an, dini konuların yanı sıra ahlak, hukuk, bilim ve sosyal yaşam gibi birçok konuyu içerir.", theme: 'unit3' },
                { id: 'u3_fb1', type: 'fillInTheBlanks', question: "Kur'an-ı Kerim, ........................ ayetlerden oluşur.", answer: "ayet", options: ["ayet", "sure", "cüz", "hadis"], explanation: "Kur'an-ı Kerim, ayet adı verilen cümlelerden oluşur.", theme: 'unit3' },
                { id: 'u3_fb2', type: 'fillInTheBlanks', question: "Kur'an-ı Kerim'in ana konularından biri ........................dır.", answer: "ahlak", options: ["ahlak", "savaş", "ticaret", "eğlence"], explanation: "Kur'an, insanlara güzel ahlakı öğretir.", theme: 'unit3' },
                { id: 'u3_fb3', type: 'fillInTheBlanks', question: "Kur'an-ı Kerim'in ilk inen ayetleri ........................ Suresi'ndedir.", answer: "Alak", options: ["Alak", "Fatiha", "Bakara", "Nas"], explanation: "Alak Suresi'nin ilk beş ayeti, Hz. Muhammed'e inen ilk vahiylerdir.", theme: 'unit3' },
                { id: 'u3_fb4', type: 'fillInTheBlanks', question: "Kur'an-ı Kerim'in son suresi ........................ Suresi'dir.", answer: "Nas", options: ["Nas", "Fatiha", "Bakara", "İhlas"], explanation: "Nas Suresi, Kur'an'ın son suresidir.", theme: 'unit3' },
                { id: 'u3_fb5', type: 'fillInTheBlanks', question: "Kur'an-ı Kerim'in korunması ........................ tarafından garanti altına alınmıştır.", answer: "Allah", options: ["Allah", "insanlar", "melekler", "peygamberler"], explanation: "Kur'an'ın kıyamete kadar korunacağı Allah tarafından vadedilmiştir.", theme: 'unit3' },
                { id: 'u3_mc1', type: 'multipleChoice', question: "Kur'an-ı Kerim'in bölümlerinden hangisi 20 sayfadan oluşur?", options: ["Ayet", "Sure", "Cüz", "Hizb"], answer: "Cüz", explanation: "Kur'an-ı Kerim 30 cüzden oluşur ve her cüz yaklaşık 20 sayfadır.", theme: 'unit3' },
                { id: 'u3_mc2', type: 'multipleChoice', question: "Kevser Suresi'nin temel mesajı nedir?", options: ["Allah'ın birliği", "Namaz kılmak", "Peygambere verilen nimetler", "Oruç tutmak"], answer: "Peygambere verilen nimetler", explanation: "Kevser Suresi, Hz. Muhammed'e verilen Kevser havuzunu ve nimetleri anlatır.", theme: 'unit3' },
                { id: 'u3_mc3', type: 'multipleChoice', question: "Kur'an-ı Kerim'i okumak için hangi temizlik şartı gereklidir?", options: ["Abdest", "Gusül", "Teyemmüm", "Hepsi"], answer: "Abdest", explanation: "Kur'an'a dokunmak ve onu okumak için abdestli olmak gerekir.", theme: 'unit3' },
                { id: 'u3_mc4', type: 'multipleChoice', question: "Kur'an-ı Kerim'in indirildiği ay hangisidir?", options: ["Ramazan", "Şaban", "Recep", "Muharrem"], answer: "Ramazan", explanation: "Kur'an-ı Kerim, Ramazan ayında Kadir Gecesi'nde indirilmeye başlanmıştır.", theme: 'unit3' },
                { id: 'u3_mc5', type: 'multipleChoice', question: "Kur'an-ı Kerim'de kaç sure vardır?", options: ["113", "114", "115", "116"], answer: "114", explanation: "Kur'an-ı Kerim'de 114 sure bulunmaktadır.", theme: 'unit3' }
            ],
            'unit4': [ // 4. Ünite: Peygamber Kıssaları (Already large, will be sliced to 100)
                { id: 'tf1', type: 'trueFalse', question: "Peygamberler, Allah'ın (cc) insanlar için seçtiği öğretmenlerdir.", answer: "D", explanation: "Peygamberler, Allah'ın insanlara doğru yolu göstermesi için gönderdiği elçiler ve rehberlerdir.", theme: 'unit4', relatedConcept: "Nübüvvet" },
                { id: 'tf2', type: 'trueFalse', question: "İnsan aklıyla ahiret konularını tam olarak kavrayabilir.", answer: "Y", explanation: "İnsan aklı evrenin yaratıcısını anlayabilir ancak yaratılış amacı, Allah'a karşı görevler ve ahiret gibi konularda peygamberlerin rehberliğine ihtiyaç duyar.", theme: 'unit4', relatedConcept: "Ahiret" },
                { id: 'tf3', type: 'trueFalse', question: "Ülülazm, inkârcılara karşı büyük mücadeleler ve sabır göstermiş beş büyük peygamberlere verilen isimdir.", answer: "D", explanation: "Ülülazm peygamberler, Hz. Nuh, Hz. İbrahim, Hz. Musa, Hz. İsa ve Hz. Muhammed (sav)'dir.", theme: 'unit4', relatedConcept: "Ülülazm" },
                { id: 'tf4', type: 'trueFalse', question: "Hz. Nuh'un kavmi onun davetini hemen kabul etmiştir.", answer: "Y", explanation: "Hz. Nuh'un kavmi onun davetini reddetmiş, alay etmiş ve inanmamakta direnmiştir.", theme: 'unit4', relatedConcept: "Hz. Nuh" },
                { id: 'tf5', type: 'trueFalse', question: "Hz. İbrahim, ateşe atıldığında Allah'ın (cc) emriyle ateş ona zarar vermiştir.", answer: "Y", explanation: "Allah'ın (cc) emriyle ateş Hz. İbrahim'e zarar vermemiştir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'tf6', type: 'trueFalse', question: "Hz. Musa, İsrailoğullarına gönderilmiş bir peygamberdir ve ona İncil indirilmiştir.", answer: "Y", explanation: "Hz. Musa'ya Tevrat indirilmiştir. İncil ise Hz. İsa'ya indirilmiştir.", theme: 'unit4', relatedConcept: "Hz. Musa" },
                { id: 'tf7', type: 'trueFalse', question: "Kureyş Suresi, Kureyş kabilesinin Kâbe'nin bakımını üstlenmesi ve ziyaretçilere hizmet etmesini konu alır.", answer: "D", explanation: "Kureyş Suresi, Kureyş kabilesine verilen nimetleri ve Kâbe'ye olan hizmetlerini vurgular.", theme: 'unit4', relatedConcept: "Kureyş" },
                { id: 'tf8', type: 'trueFalse', question: "Peygamber kıssalarında iyilik ve kötülüğün ne olduğu anlatılarak insanlar doğru yola teşvik edilir.", answer: "D", explanation: "Peygamber kıssaları, insanlara öğüt vermek ve doğru yola teşvik etmek amacıyla anlatılır.", theme: 'unit4', relatedConcept: "Kıssa" },
                { id: 'tf9', type: 'trueFalse', question: "Peygamberler, insanlara güzel ahlakı kendi hayatlarında uygulayarak örnek olmuşlardır.", answer: "D", explanation: "Peygamberler, dürüstlük, adalet, yardımseverlik gibi ahlaki ilkeleri bizzat yaşayarak insanlara örnek olmuşlardır.", theme: 'unit4', relatedConcept: "Ahlak" },
                { id: 'tf10', type: 'trueFalse', question: "Peygamber göndermek, Allah'ın (cc) insanlara olan merhametini göstermez.", answer: "Y", explanation: "Allah'ın (cc) insanlara rehber olarak peygamber göndermesi, O'nın sevgi ve merhametini gösterir.", theme: 'unit4', relatedConcept: "Rahmet" },
                { id: 'tf11', type: 'trueFalse', question: "Peygamberler, sadece bu dünyada mutlu olmanın yollarını bildirirler.", answer: "Y", explanation: "Peygamberler, insanlara hem bu dünyada hem de ahirette mutluluğa ve huzura kavuşmanın yollarını bildirirler.", theme: 'unit4', relatedConcept: "Ahiret" },
                { id: 'tf12', type: 'trueFalse', question: "Kur'an-ı Kerim'deki peygamber kıssalarının amacı, sadece geçmiş olayları anlatmaktır.", answer: "Y", explanation: "Peygamber kıssalarının amacı, insanlara öğüt vermek ve ders çıkarmalarını sağlamaktır.", theme: 'unit4', relatedConcept: "Öğüt" },
                { id: 'tf13', type: 'trueFalse', question: "Ülülazm peygamberler, inkârcılara karşı büyük mücadeleler vermişlerdir.", answer: "D", explanation: "Ülülazm, büyük mücadeleler ve sabır göstermiş peygamberlere verilen isimdir.", theme: 'unit4', relatedConcept: "Ülülazm" },
                { id: 'tf14', type: 'trueFalse', question: "Hz. Nuh, kavmini yalnızca Allah'a (cc) inanmaya davet etmiştir.", answer: "D", explanation: "Hz. Nuh'un temel görevi, kavmini tevhit inancına davet etmekti.", theme: 'unit4', relatedConcept: "Tevhit" },
                { id: 'tf15', type: 'trueFalse', question: "Hz. Nuh'un kavmi onun davetini kabul etmeyince, Allah (cc) onlara büyük bir tufan göndermiştir.", answer: "D", explanation: "Kavminin inkârda direnmesi üzerine tufan gerçekleşmiştir.", theme: 'unit4', relatedConcept: "Hz. Nuh" },
                { id: 'tf16', type: 'trueFalse', question: "Hz. İbrahim, putlara tapan Babil halkına gönderilmiştir.", answer: "D", explanation: "Hz. İbrahim, putperest Babil halkını tevhide davet etmiştir.", theme: 'unit4', relatedConcept: "Hz. İbrahim" },
                { id: 'tf17', type: 'trueFalse', question: "Hz. İbrahim, putları kırdıktan sonra suçu en küçük puta atmıştır.", answer: "Y", explanation: "Hz. İbrahim, baltayı en büyük putun boynuna asmıştır.", theme: 'unit4', relatedConcept: "Hz. İbrahim" },
                { id: 'tf18', type: 'trueFalse', question: "Hz. İbrahim, Kâbe'yi tek başına inşa etmiştir.", answer: "Y", explanation: "Hz. İbrahim, oğlu Hz. İsmail ile birlikte Kâbe'yi yeniden inşa etmiştir.", theme: 'unit4', relatedConcept: "Kâbe" },
                { id: 'tf19', type: 'trueFalse', question: "Hz. Musa, Firavun'un sarayında büyümüştür.", answer: "D", explanation: "Allah (cc), Hz. Musa'nın annesine onu nehre bırakmasını ilham etmiş ve Firavun'un sarayında büyümesi sağlanmıştır.", theme: 'unit4', relatedConcept: "Hz. Musa" },
                { id: 'tf20', type: 'trueFalse', question: "Hz. Harun, Hz. Musa'ya yardımcı olarak peygamber olarak görevlendirilmiştir.", answer: "D", explanation: "Hz. Harun, Hz. Musa'nın kardeşi ve yardımcısı olarak peygamberlik yapmıştır.", theme: 'unit4', relatedConcept: "Hz. Harun" },
                { id: 'tf21', type: 'trueFalse', question: "Firavun ve ordusu, Kızıldeniz'i geçerek Hz. Musa'yı yakalamıştır.", answer: "Y", explanation: "Firavun ve ordusu Kızıldeniz'de boğulmuştur.", theme: 'unit4', relatedConcept: "Firavun" },
                { id: 'tf22', type: 'trueFalse', question: "Hz. İsa, İsrailoğullarına gönderilmiş bir peygamberdir.", answer: "D", explanation: "Hz. İsa, İsrailoğullarına gönderilen peygamberlerden biridir.", theme: 'unit4', relatedConcept: "Hz. İsa" },
                { id: 'tf23', type: 'trueFalse', question: "Hz. İsa, kendisinden sonra Hz. Muhammed'in (sav) peygamber olacağını müjdelemiştir.", answer: "D", explanation: "Hz. İsa, son peygamberin geleceğini haber vermiştir.", theme: 'unit4', relatedConcept: "Hz. Muhammed" },
                { id: 'tf24', type: 'trueFalse', question: "Kureyş Suresi, Kureyş kabilesinin Kâbe'nin bakımını üstlenmesi ve ziyaretçilere hizmet etmesini konu alır.", answer: "D", explanation: "Kureyş Suresi, Kureyş kabilesine verilen nimetleri ve Kâbe'ye olan hizmetlerini vurgular.", theme: 'unit4', relatedConcept: "Kureyş" },
                { id: 'tf25', type: 'trueFalse', question: "Kureyş kabilesi, Kâbe'nin asıl sahibinin Yüce Allah olduğunu unutmuşlardır.", answer: "Y", explanation: "Kureyş Suresi, Kâbe'nin asıl sahibinin Yüce Allah olduğu hatırlatılarak tevhit inancına vurgu yapar.", theme: 'unit4', relatedConcept: "Tevhit" },
                { id: 'tf26', type: 'trueFalse', question: "Peygamberler, insanlara sadece dini konularda rehberlik etmişlerdir.", answer: "Y", explanation: "Peygamberler, dini konuların yanı sıra sosyal, ahlaki ve hukuki konularda da rehberlik etmişlerdir.", theme: 'unit4', relatedConcept: "Nübüvvet" },
                { id: 'tf27', 'type': 'trueFalse', question: "Her peygambere mutlaka bir kitap indirilmiştir.", answer: "Y", explanation: "Bazı peygamberlere kitap değil, sahifeler indirilmiştir veya önceki peygamberlerin kitaplarını tasdik etmişlerdir.", theme: 'unit4', relatedConcept: "Vahiy" },
                { id: 'tf28', type: 'trueFalse', question: "Hz. Adem, ilk insan ve ilk peygamberdir.", answer: "D", explanation: "Hz. Adem, insanlığın babası ve Allah'ın ilk peygamberidir.", theme: 'unit4', relatedConcept: "Hz. Adem" },
                { id: 'tf29', type: 'trueFalse', question: "Peygamberlerin hepsi aynı kavme gönderilmiştir.", answer: "Y", explanation: "Peygamberler farklı zamanlarda, farklı kavimlere veya tüm insanlığa gönderilmiştir.", theme: 'unit4', relatedConcept: "Nübüvvet" },
                { id: 'tf30', type: 'trueFalse', question: "Hz. İdris, terzilikle uğraşan bir peygamberdir.", answer: "D", explanation: "Hz. İdris'in terziliğin mucidi olduğuna inanılır.", theme: 'unit4', relatedConcept: "Peygamber" },
                { id: 'tf31', type: 'trueFalse', question: "Hz. Salih'in mucizesi, kayadan deve çıkarmasıdır.", answer: "D", explanation: "Hz. Salih'in kavminde Semud'a gösterdiği en büyük mucizesi, kayadan bir dişi deve çıkarmasıdır.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'tf32', type: 'trueFalse', question: "Hz. Lut, Hz. İbrahim'in yeğenidir.", answer: "D", explanation: "Hz. Lut, Hz. İbrahim'in yeğeni olup, Lut kavmine peygamber olarak gönderilmiştir.", theme: 'unit4', relatedConcept: "Hz. Lut" },
                { id: 'tf33', type: 'trueFalse', question: "Hz. Yakup'un diğer adı İsrail'dir.", answer: "D", explanation: "Hz. Yakup'un lakabı İsrail'dir ve İsrailoğulları onun soyundan gelmektedir.", theme: 'unit4', relatedConcept: "Hz. Yakup" },
                { id: 'tf34', type: 'trueFalse', question: "Hz. Yusuf'un kıssası, sabır ve tevekkülün önemini vurgular.", answer: "D", explanation: "Hz. Yusuf'un hayatı, zorluklar karşısında sabretmenin ve Allah'a güvenmenin güzel bir örneğidir.", theme: 'unit4', relatedConcept: "Sabır" },
                { id: 'tf35', type: 'trueFalse', question: "Hz. Eyyub'un hastalığı, onun peygamberliğini kaybetmesine neden olmuştur.", answer: "Y", explanation: "Hz. Eyyub'un hastalığı, onun sabrını ve Allah'a olan bağlılığını artırmıştır.", theme: 'unit4', relatedConcept: "Hz. Eyyub" },
                { id: 'tf36', type: 'trueFalse', question: "Hz. Yunus, kavmini terk ettikten sonra hemen affedilmiştir.", answer: "Y", explanation: "Hz. Yunus, balığın karnında tövbe edip Allah'a yalvarmış, sonra affedilmiştir.", theme: 'unit4', relatedConcept: "Tövbe" },
                { id: 'tf37', type: 'trueFalse', question: "Hz. Zekeriya'nın duası, Allah'ın (cc) kudretinin bir göstergesidir.", answer: "D", explanation: "Yaşlılık ve kısırlık durumunda çocuk istemesi ve buna karşılık verilmesi Allah'ın kudretini gösterir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'tf38', type: 'trueFalse', question: "Hz. Süleyman, sadece insanlara hükmetmiştir.", answer: "Y", explanation: "Hz. Süleyman, insanlara, cinlere ve hayvanlara hükmetme mucizesine sahipti.", theme: 'unit4', relatedConcept: "Hz. Süleyman" },
                { id: 'tf39', type: 'trueFalse', question: "Hz. Davut'a demiri yumuşatma mucizesi verilmiştir.", answer: "D", explanation: "Hz. Davut, demiri elinde hamur gibi yoğurabilme yeteneğine sahipti.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'tf40', type: 'trueFalse', question: "Hz. Lokman, bir peygamberdir.", answer: "Y", explanation: "Hz. Lokman, Kur'an'da adı geçen hikmet sahibi bir kişidir, ancak peygamber değildir.", theme: 'unit4', relatedConcept: "Hikmet" },
                { id: 'tf41', type: 'trueFalse', question: "Hz. Şuayb'ın kavminde, ölçü ve tartıda hile yapmaktaydı.", answer: "D", explanation: "Hz. Şuayb, Medyen halkını ticaretteki hilelerinden dolayı uyarmıştır.", theme: 'unit4', relatedConcept: "Adalet" },
                { id: 'tf42', type: 'trueFalse', question: "Peygamberlerin hepsi aynı mucizeye sahiptir.", answer: "Y", explanation: "Her peygambere, kendi dönemlerinin ve kavimlerinin ihtiyaçlarına göre farklı mucizeler verilmiştir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'tf43', type: 'trueFalse', question: "Peygamberler, insanüstü varlıklardır ve hiç hata yapmazlar.", answer: "Y", explanation: "Peygamberler de insandır, ancak Allah tarafından korunurlar ve büyük günah işlemezler.", theme: 'unit4', relatedConcept: "Nübüvvet" },
                { id: 'tf44', type: 'trueFalse', question: "Kur'an-ı Kerim'de adı geçen tüm peygamberlerin kıssaları detaylıca anlatılmıştır.", answer: "Y", explanation: "Kur'an'da bazı peygamberlerin kıssaları detaylıca anlatılırken, bazılarının sadece isimleri zikredilmiştir.", theme: 'unit4', relatedConcept: "Kıssa" },
                { id: 'tf45', type: 'trueFalse', question: "Peygamberlerin tebliğ ettiği dinin özü her zaman tevhit olmuştur.", answer: "D", explanation: "Tüm peygamberler, Allah'ın birliği ve O'na kulluk etme mesajını getirmişlerdir.", theme: 'unit4', relatedConcept: "Tevhit" },
                { id: 'tf46', type: 'trueFalse', question: "Peygamberler, insanlara sadece korku yoluyla tebliğde bulunmuşlardır.", answer: "Y", explanation: "Peygamberler, insanlara hem müjdeleyici hem de uyarıcı olarak gönderilmişlerdir.", theme: 'unit4', relatedConcept: "Tebliğ" },
                { id: 'tf47', type: 'trueFalse', question: "Hz. Muhammed (sav), son peygamberdir.", answer: "D", explanation: "Hz. Muhammed (sav), peygamberlerin sonuncusu ve hatemü'l-enbiyadır.", theme: 'unit4', relatedConcept: "Hz. Muhammed" },
                { id: 'tf48', type: 'trueFalse', question: "Peygamberlerin hepsi erkeklerden seçilmiştir.", answer: "D", explanation: "Kur'an'da adı geçen tüm peygamberler erkektir.", theme: 'unit4', relatedConcept: "Nübüvvet" },
                { id: 'tf49', type: 'trueFalse', question: "Peygamberlerin gönderilme amacı, insanların kendi başlarına bulamayacakları bilgileri onlara ulaştırmaktır.", answer: "D", explanation: "Peygamberler, vahiy yoluyla insanlara ahiret, ibadet ve ahlak gibi konularda rehberlik ederler.", theme: 'unit4', relatedConcept: "Vahiy" },
                { id: 'tf50', type: 'trueFalse', question: "Peygamberler, insanlara sadece ibadet etmeyi öğretmişlerdir.", answer: "Y", explanation: "Peygamberler, ibadetlerin yanı sıra sosyal ilişkiler, adalet ve güzel ahlak gibi konularda da öğretiler sunmuşlardır.", theme: 'unit4', relatedConcept: "İbadet" },
                { id: 'tf51', type: 'trueFalse', question: "Hz. İsa, babasız dünyaya gelmiştir.", answer: "D", explanation: "Hz. İsa, Allah'ın (cc) mucizesi olarak babasız dünyaya gelmiştir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'tf52', type: 'trueFalse', question: "Peygamberler, insanlara örnek olmaları için gönderilmişlerdir.", answer: "D", explanation: "Peygamberler, sözleri ve davranışlarıyla insanlara rehberlik eden en güzel örneklerdir.", theme: 'unit4', relatedConcept: "Sünnet" },
                { id: 'tf53', type: 'trueFalse', question: "Hz. Adem'in eşi Havva, cennette yasak ağacın meyvesinden yediği için cennetten çıkarılmıştır.", answer: "D", explanation: "Hz. Adem ve Havva'nın cennetten çıkarılma sebebi, yasak ağacın meyvesinden yemeleridir.", theme: 'unit4', relatedConcept: "Hz. Adem" },
                { id: 'tf54', type: 'trueFalse', question: "Nuh tufanı sadece Hz. Nuh'un yaşadığı bölgeyi etkilemiştir.", answer: "Y", explanation: "Nuh tufanı, yeryüzünün tamamını veya büyük bir kısmını etkileyen evrensel bir olaydır.", theme: 'unit4', relatedConcept: "Hz. Nuh" },
                { id: 'tf55', type: 'trueFalse', question: "Hz. İbrahim, putları kırdıktan sonra ateşe atılmıştır.", answer: "D", explanation: "Hz. İbrahim, putperestliğe karşı mücadelesi nedeniyle ateşe atılmıştır.", theme: 'unit4', relatedConcept: "Hz. İbrahim" },
                { id: 'tf56', type: 'trueFalse', question: "Hz. Musa'nın asası, yılanlara dönüşme mucizesine sahipti.", answer: "D", explanation: "Hz. Musa'nın asası, Firavun'un sihirbazlarına karşı yılanlara dönüşerek mucize göstermiştir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'tf57', type: 'trueFalse', question: "Hz. Davut, sesi çok güzel bir peygamberdi.", answer: "D", explanation: "Hz. Davut'a güzel ses ve Zebur'u okurken dağların ve kuşların ona eşik etmesi mucizesi verilmiştir.", theme: 'unit4', relatedConcept: "Hz. Davut" },
                { id: 'tf58', type: 'trueFalse', question: "Hz. Süleyman, karıncalarla konuşabilirdi.", answer: "D", explanation: "Hz. Süleyman'a hayvanların dilini anlama mucizesi verilmişti ve karıncalarla konuşabilirdi.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'tf59', type: 'trueFalse', question: "Hz. Eyyub'un hastalığı, onun peygamberliğini kaybetmesine neden olmuştur.", answer: "Y", explanation: "Hz. Eyyub'un hastalığı, onun sabrını ve Allah'a olan bağlılığını artırmıştır.", theme: 'unit4', relatedConcept: "Hz. Eyyub" },
                { id: 'tf60', type: 'trueFalse', question: "Peygamberlerin hepsi zengin ve güçlü kişilerdi.", answer: "Y", explanation: "Peygamberler arasında fakir olanlar da vardı. Önemli olan maddi durumları değil, Allah katındaki dereceleriydi.", theme: 'unit4', relatedConcept: "Nübüvvet" },
                { id: 'tf61', type: 'trueFalse', question: "Hz. Yunus, balığın karnında iken tövbe etmiştir.", answer: "D", explanation: "Hz. Yunus, balığın karnında iken yaptığı hatadan dolayı pişman olup tövbe etmiştir.", theme: 'unit4', relatedConcept: "Tövbe" },
                { id: 'tf62', type: 'trueFalse', question: "Hz. İbrahim'in babası da bir peygamberdi.", answer: "Y", explanation: "Hz. İbrahim'in babası putperest idi ve Hz. İbrahim onu tevhide davet etmiştir.", theme: 'unit4', relatedConcept: "Hz. İbrahim" },
                { id: 'tf63', type: 'trueFalse', question: "Peygamberlerin sayısı Kur'an-ı Kerim'de açıkça belirtilmiştir.", answer: "Y", explanation: "Kur'an'da sadece bazı peygamberlerin isimleri zikredilmiştir, toplam sayıları belirtilmemiştir.", theme: 'unit4', relatedConcept: "Kıssa" },
                { id: 'tf64', type: 'trueFalse', question: "Hz. Yusuf, Mısır'da vezir olmuştur.", answer: "D", explanation: "Hz. Yusuf, Mısır'da büyük bir makama yükselerek vezir olmuştur.", theme: 'unit4', relatedConcept: "Hz. Yusuf" },
                { id: 'tf65', type: 'trueFalse', question: "Peygamberler, insanlara sadece mucizelerle inanmalarını sağlamışlardır.", answer: "Y", explanation: "Peygamberler, mucizelerin yanı sıra tebliğ, güzel ahlak ve örnek davranışlarıyla da insanları etkilemişlerdir.", theme: 'unit4', relatedConcept: "Tebliğ" },
                { id: 'tf66', type: 'trueFalse', question: "Hz. Nuh, gemisine sadece ailesini almıştır.", answer: "Y", explanation: "Hz. Nuh, ailesinin yanı sıra inananları ve her canlıdan birer çifti de gemiye almıştır.", theme: 'unit4', relatedConcept: "Hz. Nuh" },
                { id: 'fb1', type: 'fillInTheBlanks', question: "Peygamberler, Yüce Allah'tan ........................ getiren kimselerdir.", answer: "haber", options: ["haber", "para", "hediye", "emir"], explanation: "Peygamberler, Allah'ın vahyini insanlara ulaştıran elçileridir.", theme: 'unit4', relatedConcept: "Vahiy" },
                { id: 'fb2', type: 'fillInTheBlanks', question: "Peygamberlik, Allah (cc) ile insanlar arasındaki bir ........................ görevidir.", answer: "elçilik", options: ["elçilik", "krallık", "ticaret", "öğretmenlik"], explanation: "Peygamberlik, Allah'ın mesajlarını insanlara iletme görevidir.", theme: 'unit4', relatedConcept: "Nübüvvet" },
                { id: 'fb3', type: 'fillInTheBlanks', question: "Kur'an-ı Kerim'de Nebi ve Resul kelimeleri ........................ demektir.", answer: "peygamber", options: ["peygamber", "kitap", "melek", "mucize"], explanation: "Bu iki kelime, Kur'an'da peygamber anlamında kullanılır.", theme: 'unit4', relatedConcept: "Peygamber" },
                { id: 'fb4', type: 'fillInTheBlanks', question: "Peygamberler, insanlara hem bu dünyada hem de ahirette ........................ ve huzura kavuşmanın yollarını bildirirler.", answer: "mutluluğa", options: ["mutluluğa", "zenginliğe", "güce", "şöhrete"], explanation: "Peygamberler, insanların dünya ve ahiret saadetini amaçlayan rehberlerdir.", theme: 'unit4', relatedConcept: "Ahiret" },
                { id: 'fb5', type: 'fillInTheBlanks', question: "Kur'an-ı Kerim'deki peygamber kıssalarının amacı, insanlara öğüt vermek ve ........................ sağlamaktır.", answer: "ders çıkarmalarını", options: ["ders çıkarmalarını", "eğlenmelerini", "uyumalarını", "savaşmalarını"], explanation: "Kıssalar, geçmişten ibret almayı ve doğru yolu bulmayı hedefler.", theme: 'unit4', relatedConcept: "İbret" },
                { id: 'fb6', type: 'fillInTheBlanks', question: "Ülülazm, inkârcılara karşı büyük mücadeleler ve ........................ göstermiş beş büyük peygambere verilen isimdir.", answer: "sabır", options: ["sabır", "öfke", "korku", "hırs"], explanation: "Ülülazm peygamberler, zorluklara karşı gösterdikleri sabırla bilinirler.", theme: 'unit4', relatedConcept: "Sabır" },
                { id: 'fb7', type: 'fillInTheBlanks', question: "Hz. Nuh, ........................ inancından uzaklaşan kavmini doğru yola davet etmekle görevlendirilmiştir.", answer: "tevhit", options: ["tevhit", "putperestlik", "şirk", "büyücülük"], explanation: "Hz. Nuh'un ana görevi, kavmini Allah'ın birliğine inanmaya çağırmaktı.", theme: 'unit4', relatedConcept: "Tevhit" },
                { id: 'fb8', type: 'fillInTheBlanks', question: "Hz. Nuh ve ona inananlarla birlikte her hayvandan birer çift ........................ binmiştir.", answer: "gemiye", options: ["gemiye", "dağa", "ağaca", "mağaraya"], explanation: "Tufandan kurtulmak için gemiye binmeleri emredilmiştir.", theme: 'unit4', relatedConcept: "Hz. Nuh" },
                { id: 'fb9', type: 'fillInTheBlanks', question: "Tufan sona erince gemi ........................ Dağı'na oturmuştur.", answer: "Cudi", options: ["Cudi", "Arafat", "Sina", "Uhud"], explanation: "Gemi, tufan sonrası Cudi Dağı'na yerleşmiştir.", theme: 'unit4', relatedConcept: "Hz. Nuh" },
                { id: 'fb10', type: 'fillInTheBlanks', question: "Hz. İbrahim, putlara ve yıldızlara tapan ........................ halkını tevhit inancına davet etmekle görevlendirilmiştir.", answer: "Babil", options: ["Babil", "Mısır", "Medine", "Kudüs"], explanation: "Hz. İbrahim, Babil'deki putperest halka gönderilmiştir.", theme: 'unit4', relatedConcept: "Hz. İbrahim" },
                { id: 'fb11', type: 'fillInTheBlanks', question: "Hz. İbrahim, oğlu Hz. İsmail'le birlikte ........................ yeniden inşa etmiştir.", answer: "Kâbe'yi", options: ["Kâbe'yi", "tapınağı", "sarayı", "piramiti"], explanation: "Kâbe, Hz. İbrahim ve Hz. İsmail tarafından yeniden inşa edilmiştir.", theme: 'unit4', relatedConcept: "Kâbe" },
                { id: 'fb12', type: 'fillInTheBlanks', question: "Hz. İbrahim kıssasından çıkarılabilecek hisselerden biri, insanın inandığı değerleri savunurken ........................ ve kararlı olması gerektiğidir.", answer: "cesur", options: ["cesur", "korkak", "pasif", "çekingen"], explanation: "Hz. İbrahim'in putlara karşı mücadelesi cesaret örneğidir.", theme: 'unit4', relatedConcept: "İman" },
                { id: 'fb13', type: 'fillInTheBlanks', question: "Hz. Musa, ........................ gönderilmiş bir peygamberdir.", answer: "İsrailoğullarına", options: ["İsrailoğullarına", "Kureyş'e", "Ad kavmine", "Semud kavmine"], explanation: "Hz. Musa, İsrailoğulları'nın peygamberidir.", theme: 'unit4', relatedConcept: "Hz. Musa" },
                { id: 'fb14', type: 'fillInTheBlanks', question: "Hz. Musa'nın doğduğu dönemde Mısır'ı ........................ yönetmekteydi.", answer: "Firavun", options: ["Firavun", "Nemrut", "Karun", "Haman"], explanation: "Firavun, Hz. Musa zamanında Mısır'ın zalim hükümdarıydı.", theme: 'unit4', relatedConcept: "Firavun" },
                { id: 'fb15', type: 'fillInTheBlanks', question: "Hz. Musa'ya ........................ indirilmiştir.", answer: "Tevrat", options: ["Tevrat", "İncil", "Zebur", "Suhuf"], explanation: "Tevrat, Hz. Musa'ya vahyedilen kutsal kitaptır.", theme: 'unit4', relatedConcept: "Tevrat" },
                { id: 'fb16', type: 'fillInTheBlanks', question: "Firavun ve ordusu, Hz. Musa ve halkını takip ederken ........................ yarılmış ve İsrailoğulları karşıya geçmiştir.", answer: "Kızıldeniz", options: ["Kızıldeniz", "Akdeniz", "Nil Nehri", "Fırat Nehri"], explanation: "Kızıldeniz mucizesi, Hz. Musa kıssasının önemli bir olayıdır.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'fb17', type: 'fillInTheBlanks', question: "Hz. Musa kıssasından çıkarılabilecek hisselerden biri, insanlara doğru ve güzel olanı anlatırken ........................ ve nazik bir üslup kullanılması gerektiğidir.", answer: "yumuşak", options: ["yumuşak", "sert", "kaba", "agresif"], explanation: "Tebliğde yumuşak ve nazik olmak önemlidir.", theme: 'unit4', relatedConcept: "Tebliğ" },
                { id: 'fb18', type: 'fillInTheBlanks', question: "Hz. İsa, Hz. ........................'nın oğludur.", answer: "Meryem", options: ["Meryem", "Havva", "Asiye", "Fatıma"], explanation: "Hz. İsa, annesi Hz. Meryem'den dünyaya gelmiştir.", theme: 'unit4', relatedConcept: "Hz. İsa" },
                { id: 'fb19', type: 'fillInTheBlanks', question: "Allah (cc) Hz. İsa'ya ........................'i göndermiştir.", answer: "İncil", options: ["İncil", "Tevrat", "Zebur", "Kur'an"], explanation: "İncil, Hz. İsa'ya vahyedilen kutsal kitaptır.", theme: 'unit4', relatedConcept: "İncil" },
                { id: 'fb20', type: 'fillInTheBlanks', question: "Hz. İsa, kendisinden sonra Hz. ........................ (sav) peygamber olacağını müjdelemiştir.", answer: "Muhammed'in", options: ["Muhammed'in", "Musa'nın", "İbrahim'in", "Nuh'un"], explanation: "Hz. İsa, son peygamberin geleceğini haber vermiştir.", theme: 'unit4', relatedConcept: "Hz. Muhammed" },
                { id: 'fb21', type: 'fillInTheBlanks', question: "Peygamber kıssalarında peygamberlerin insanları ........................ daveti temel konudur.", answer: "tevhide", options: ["tevhide", "şirke", "putperestliğe", "büyücülüğe"], explanation: "Tüm peygamberlerin ortak daveti, Allah'ın birliğine inanmaktır.", theme: 'unit4', relatedConcept: "Tevhit" },
                { id: 'fb22', type: 'fillInTheBlanks', question: "Allah (cc), peygamberleri desteklemek için ........................ göndermiştir.", answer: "mucizeler", options: ["mucizeler", "savaşlar", "zenginlik", "binalar"], explanation: "Mucizeler, peygamberlerin hakikatini ispatlayan ilahi yardımlardır.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'fb23', type: 'fillInTheBlanks', question: "Kureyş kabilesi, ........................'nin bakımını üstlenmiş ve ziyaretçilere hizmet etmiştir.", answer: "Kâbe", options: ["Kâbe", "Mescid-i Aksa", "Medine", "Şam"], explanation: "Kureyş kabilesi, Kâbe'nin hizmetinden sorumluydu.", theme: 'unit4', relatedConcept: "Kâbe" },
                { id: 'fb24', type: 'fillInTheBlanks', question: "Kureyş Suresi, Kureyş kabilesinin geçimini ........................ yolculuklarla sağladığına dikkat çeker.", answer: "ticari", options: ["ticari", "tarımsal", "hayvansal", "askeri"], explanation: "Kureyş kabilesi, ticari faaliyetlerle geçimini sağlıyordu.", theme: 'unit4', relatedConcept: "Kureyş" },
                { id: 'fb25', type: 'fillInTheBlanks', question: "Kureyş halkının, Kâbe'nin sahibi olan Allah'a (cc) ........................ etmeye davet edilmesi Kureyş Suresi'nin temel konularındandır.", answer: "kulluk", options: ["kulluk", "isyan", "inkâr", "red"], explanation: "Sure, Kureyş'i Allah'a kulluk etmeye çağırır.", theme: 'unit4', relatedConcept: "İbadet" },
                { id: 'fb26', type: 'fillInTheBlanks', question: "Hz. Yusuf'un rüyası, ........................ ve on bir yıldızın kendisine secde etmesidir.", answer: "güneşin", options: ["güneşin", "ayın", "gezegenin", "dünyanın"], explanation: "Hz. Yusuf'un rüyası, ilerideki yüce makamına işaret etmektedir.", theme: 'unit4', relatedConcept: "Hz. Yusuf" },
                { id: 'fb27', type: 'fillInTheBlanks', question: "Hz. Eyyub, ........................ ve sabrıyla bilinen bir peygamberdir.", answer: "imtihanlara", options: ["imtihanlara", "zenginliğe", "güce", "hızlılığa"], explanation: "Hz. Eyyub, büyük hastalıklara ve kayıplara karşı gösterdiği sabırla bilinir.", theme: 'unit4', relatedConcept: "Sabır" },
                { id: 'fb28', type: 'fillInTheBlanks', question: "Hz. Yunus, balığın karnında ........................ Allah'a (cc) dua etmiştir.", answer: "pişmanlıkla", options: ["pişmanlıkla", "sevinçle", "öfkeyle", "korkuyla"], explanation: "Hz. Yunus, hatasını anlayıp balığın karnında Allah'tan af dilemiştir.", theme: 'unit4', relatedConcept: "Tövbe" },
                { id: 'fb29', type: 'fillInTheBlanks', question: "Hz. Zekeriya ve Hz. Yahya kıssası, Allah'ın (cc) ........................ her şeye kadir olduğunu gösterir.", answer: "dilemesiyle", options: ["dilemesiyle", "istemesiyle", "yapmasıyla", "olmasıyla"], explanation: "Yaşlılıklarında çocuk sahibi olmaları, Allah'ın kudretini gösterir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'fb30', type: 'fillInTheBlanks', question: "Hz. Süleyman, ........................ ve cinlere hükmeden bir peygamberdir.", answer: "hayvanlara", options: ["hayvanlara", "insanlara", "bitkilere", "dağlara"], explanation: "Hz. Süleyman'a hayvanların ve cinlerin dilini anlama mucizesi verilmiştir.", theme: 'unit4', relatedConcept: "Hz. Süleyman" },
                { id: 'fb31', type: 'fillInTheBlanks', question: "Hz. Davut, ........................ ve adaletle hükmeden bir peygamberdir.", answer: "hikmetle", options: ["hikmetle", "güçle", "zenginlikle", "hızla"], explanation: "Hz. Davut'a hikmet ve adaletle hükmetme yeteneği verilmiştir.", theme: 'unit4', relatedConcept: "Hikmet" },
                { id: 'fb32', type: 'fillInTheBlanks', question: "Hz. Lokman'ın oğluna verdiği öğütler, ........................ ve ahlaki değerlere vurgu yapar.", answer: "bilgeliğe", options: ["bilgeliğe", "zenginliğe", "güce", "şöhrete"], explanation: "Lokman Suresi'nde yer alan öğütler, ahlaki ve manevi değerlere odaklanır.", theme: 'unit4', relatedConcept: "Hikmet" },
                { id: 'fb33', type: 'fillInTheBlanks', question: "Hz. Şuayb, ........................ halkına gönderilmiş bir peygamberdir.", answer: "Medyen", options: ["Medyen", "Ad", "Semud", "Lut"], explanation: "Hz. Şuayb, Medyen ve Eyke halkına gönderilmiştir.", theme: 'unit4', relatedConcept: "Hz. Şuayb" },
                { id: 'fb34', type: 'fillInTheBlanks', question: "Hz. İbrahim'in ateşe atılmasına rağmen yanmaması, Allah'ın (cc) ........................ bir mucizesidir.", answer: "kudretinin", options: ["kudretinin", "zayıflığının", "korkusunun", "öfkesinin"], explanation: "Ateşin yakmaması, Allah'ın sınırsız gücünü gösterir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'fb35', type: 'fillInTheBlanks', question: "Hz. Musa'nın asası, ........................ dönüşerek Firavun'un sihirbazlarını mağlup etmiştir.", answer: "yılana", options: ["yılana", "kuşa", "taşa", "ağaca"], explanation: "Asanın yılana dönüşmesi, Hz. Musa'nın en bilinen mucizelerindendir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'fb36', type: 'fillInTheBlanks', question: "Hz. İsa'nın mucizelerinden biri, ........................ diriltmesidir.", answer: "ölüleri", options: ["ölüleri", "taşları", "ağaçları", "hayvanları"], explanation: "Hz. İsa, Allah'ın izniyle ölüleri diriltme mucizesine sahipti.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'fb37', type: 'fillInTheBlanks', question: "Peygamberlerin hepsi Allah'tan (cc) ........................ almışlardır.", answer: "vahiy", options: ["vahiy", "para", "hediye", "güç"], explanation: "Tüm peygamberler, Allah'tan vahiy yoluyla mesaj almışlardır.", theme: 'unit4', relatedConcept: "Vahiy" },
                { id: 'fb38', type: 'fillInTheBlanks', question: "Hz. Nuh tufanı, ........................ inanmayanları helak etmiştir.", answer: "Allah'a", options: ["Allah'a", "peygambere", "kitaba", "meleklere"], explanation: "Tufan, Allah'ın birliğini inkâr edenleri cezalandırmak için gönderilmiştir.", theme: 'unit4', relatedConcept: "Hz. Nuh" },
                { id: 'fb39', type: 'fillInTheBlanks', question: "Hz. Yusuf'un kıssası, ........................ ve sabrın önemini vurgular.", answer: "tevekkülün", options: ["tevekkülün", "hırsın", "öfkenin", "korkunun"], explanation: "Hz. Yusuf'un hayatı, Allah'a güvenmenin ve sabretmenin önemini gösterir.", theme: 'unit4', relatedConcept: "Tevekkül" },
                { id: 'fb40', type: 'fillInTheBlanks', question: "Hz. Eyyub, ........................ ile örnek olan bir peygamberdir.", answer: "sabrıyla", options: ["sabrıyla", "zenginliğiyle", "gücüyle", "hızıyla"], explanation: "Hz. Eyyub, zorluklar karşında gösterdiği sabırla anılır.", theme: 'unit4', relatedConcept: "Sabır" },
                { id: 'fb41', type: 'fillInTheBlanks', question: "Hz. Yunus, ........................ halkına gönderilmiştir.", answer: "Ninova", options: ["Ninova", "Mekke", "Medine", "Babil"], explanation: "Hz. Yunus, Ninova halkına peygamber olarak gönderilmiştir.", theme: 'unit4', relatedConcept: "Hz. Yunus" },
                { id: 'fb42', type: 'fillInTheBlanks', question: "Hz. Zekeriya, ........................ peygamberidir.", answer: "Hz. Yahya'nın babası", options: ["Hz. Yahya'nın babası", "Hz. İsa'nın babası", "Hz. Musa'nın babası", "Hz. İbrahim'in babası"], explanation: "Hz. Zekeriya, Hz. Yahya'nın babasıdır.", theme: 'unit4', relatedConcept: "Hz. Zekeriya" },
                { id: 'fb43', type: 'fillInTheBlanks', question: "Hz. Süleyman'ın en büyük mucizelerinden biri, ........................ ve cinlere hükmetmesidir.", answer: "rüzgara", options: ["rüzgara", "ateşe", "suya", "toprağa"], explanation: "Hz. Süleyman'a rüzgara ve cinlere hükmetme yeteneği verilmiştir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'fb44', type: 'fillInTheBlanks', question: "Hz. Davut, ........................ ile düşmanlarını yenmiştir.", answer: "sapanıyla", options: ["sapanıyla", "kılıcıyla", "okuyla", "mızrağıyla"], explanation: "Hz. Davut, Calut'u sapanıyla yenerek mucize göstermiştir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'fb45', type: 'fillInTheBlanks', question: "Hz. Lokman, ........................ öğütleriyle bilinir.", answer: "hikmetli", options: ["hikmetli", "sert", "kaba", "korkutucu"], explanation: "Hz. Lokman'ın öğütleri, derin bilgelik içerir.", theme: 'unit4', relatedConcept: "Hikmet" },
                { id: 'fb46', type: 'fillInTheBlanks', question: "Hz. Şuayb'ın kavminde, ........................ ve tartıda hile yapmaktan men edilmiştir.", answer: "ölçüde", options: ["ölçüde", "yemekte", "giyside", "binalarda"], explanation: "Hz. Şuayb, Medyen halkını ticari hilelerden sakındırmıştır.", theme: 'unit4', relatedConcept: "Adalet" },
                { id: 'fb47', type: 'fillInTheBlanks', question: "Peygamberler, insanlara doğru yolu göstermek için Allah (cc) tarafından ........................ seçilmişlerdir.", answer: "özel olarak", options: ["özel olarak", "rastgele", "kendi istekleriyle", "toplum tarafından"], explanation: "Peygamberler, ilahi bir seçimle görevlendirilmişlerdir.", theme: 'unit4', relatedConcept: "Nübüvvet" },
                { id: 'fb48', type: 'fillInTheBlanks', question: "Peygamberlerin getirdiği mesajlar, insanların ........................ ve ahiret hayatlarını düzenler.", answer: "dünya", options: ["dünya", "savaş", "ticaret", "eğlence"], explanation: "Peygamberler, hem dünya hem de ahiret için rehberlik ederler.", theme: 'unit4', relatedConcept: "İslam" },
                { id: 'fb49', type: 'fillInTheBlanks', question: "Peygamberler, ........................ ve dürüstlük gibi ahlaki değerlere önem vermişlerdir.", answer: "adalet", options: ["adalet", "kurnazlık", "hırs", "korku"], explanation: "Peygamberler, yüksek ahlaki değerlere sahip olmuşlardır.", theme: 'unit4', relatedConcept: "Ahlak" },
                { id: 'fb50', type: 'fillInTheBlanks', question: "Hz. Adem ve Havva, ........................ ağacın meyvesinden yedikleri için cennetten çıkarılmışlardır.", answer: "yasak", options: ["yasak", "elma", "hurma", "üzüm"], explanation: "Yasak ağacın meyvesi, onların cennetten çıkarılma sebebi olmuştur.", theme: 'unit4', relatedConcept: "Hz. Adem" },
                { id: 'fb51', type: 'fillInTheBlanks', question: "Hz. Nuh'un gemisi, ........................ Dağı'na oturmuştur.", answer: "Cudi", options: ["Cudi", "Arafat", "Sina", "Uhud"], explanation: "Tufan sonrası gemi Cudi Dağı'na yerleşmiştir.", theme: 'unit4', relatedConcept: "Hz. Nuh" },
                { id: 'fb52', type: 'fillInTheBlanks', question: "Hz. İbrahim, ........................ ve yıldızlara tapan kavmini tevhide davet etmiştir.", answer: "putlara", options: ["putlara", "insanlara", "hayvanlara", "bitkilere"], explanation: "Hz. İbrahim, putperestliğe karşı mücadele etmiştir.", theme: 'unit4', relatedConcept: "Tevhit" },
                { id: 'fb53', type: 'fillInTheBlanks', question: "Hz. Musa, ........................'dan İsrailoğullarını kurtarmıştır.", answer: "Firavun'un zulmünden", options: ["Firavun'un zulmünden", "açlıktan", "savaştan", "hastalıktan"], explanation: "Hz. Musa, İsrailoğullarını Firavun'un köleliğinden kurtarmıştır.", theme: 'unit4', relatedConcept: "Hz. Musa" },
                { id: 'fb54', type: 'fillInTheBlanks', question: "Hz. İsa, Allah'ın (cc) ........................ ile babasız dünyaya gelmiştir.", answer: "mucizesiyle", options: ["mucizesiyle", "isteğiyle", "emriyle", "kudretiyle"], explanation: "Hz. İsa'nın doğumu, ilahi bir mucizedir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'fb55', type: 'fillInTheBlanks', question: "Hz. Muhammed (sav), ........................ peygamberdir.", answer: "son", options: ["son", "ilk", "ortanca", "ikinci"], explanation: "Hz. Muhammed (sav), peygamberlerin sonuncusudur.", theme: 'unit4', relatedConcept: "Hz. Muhammed" },
                { id: 'fb56', type: 'fillInTheBlanks', question: "Peygamberlerin hayatları, Müslümanlar için ........................ bir örnektir.", answer: "güzel", options: ["güzel", "kötü", "sıradan", "önemsiz"], explanation: "Peygamberler, tüm insanlık için örnek alınacak şahsiyetlerdir.", theme: 'unit4', relatedConcept: "Sünnet" },
                { id: 'fb57', type: 'fillInTheBlanks', question: "Peygamberler, insanlara ........................ ve ahiret konularında rehberlik etmişlerdir.", answer: "dünya", options: ["dünya", "savaş", "ticaret", "eğlence"], explanation: "Peygamberler, hem dünya hem de ahiret hayatı için yol göstermişlerdir.", theme: 'unit4', relatedConcept: "İslam" },
                { id: 'fb58', type: 'fillInTheBlanks', question: "Peygamberler, ........................ ve dürüstlük gibi ahlaki değerlere önem vermişlerdir.", answer: "adalet", options: ["adalet", "kurnazlık", "hırs", "korku"], explanation: "Peygamberler, yüksek ahlaki değerlere sahip olmuşlardır.", theme: 'unit4', relatedConcept: "Ahlak" },
                { id: 'fb59', type: 'fillInTheBlanks', question: "Hz. Nuh'un gemisi, ........................ ve inananları kurtarmıştır.", answer: "ailesini", options: ["ailesini", "düşmanlarını", "hayvanları", "bitkileri"], explanation: "Gemi, Hz. Nuh'un ailesini ve inananları tufandan kurtarmıştır.", theme: 'unit4', relatedConcept: "Hz. Nuh" },
                { id: 'fb60', type: 'fillInTheBlanks', question: "Hz. İbrahim, ........................ ve İsmail ile birlikte Kâbe'yi inşa etmiştir.", answer: "oğlu", options: ["oğlu", "babası", "kardeşi", "amcası"], explanation: "Kâbe, Hz. İbrahim ve oğlu İsmail tarafından inşa edilmiştir.", theme: 'unit4', relatedConcept: "Kâbe" },
                { id: 'fb61', type: 'fillInTheBlanks', question: "Hz. Musa, ........................'ya karşı mücadele etmiştir.", answer: "Firavun'a", options: ["Firavun'a", "Nemrut'a", "Karun'a", "Haman'a"], explanation: "Hz. Musa, zalim Firavun'a karşı mücadele etmiştir.", theme: 'unit4', relatedConcept: "Firavun" },
                { id: 'fb62', type: 'fillInTheBlanks', question: "Hz. İsa, ........................'nın oğludur.", answer: "Meryem", options: ["Meryem", "Havva", "Asiye", "Fatıma"], explanation: "Hz. İsa, Hz. Meryem'in oğludur.", theme: 'unit4', relatedConcept: "Hz. İsa" },
                { id: 'fb63', type: 'fillInTheBlanks', question: "Hz. Yusuf, kardeşleri tarafından ........................ atılmıştır.", answer: "kuyuya", options: ["kuyuya", "denize", "nehre", "göle"], explanation: "Hz. Yusuf, kıskanç kardeşleri tarafından kuyuya atılmıştır.", theme: 'unit4', relatedConcept: "Hz. Yusuf" },
                { id: 'fb64', type: 'fillInTheBlanks', question: "Hz. Eyyub, ........................ ve tevekkülü ile örnek olmuştur.", answer: "sabrı", options: ["sabrı", "gücü", "zenginliği", "hızı"], explanation: "Hz. Eyyub, sabrı ve Allah'a tevekkülü ile bilinir.", theme: 'unit4', relatedConcept: "Tevekkül" },
                { id: 'fb65', type: 'fillInTheBlanks', question: "Hz. Yunus, ........................ karnında iken tövbe etmiştir.", answer: "balığın", options: ["balığın", "köpeğin", "kedinin", "aslanın"], explanation: "Hz. Yunus, balığın karnında iken Allah'a yönelmiştir.", theme: 'unit4', relatedConcept: "Tövbe" },
                { id: 'fb66', type: 'fillInTheBlanks', question: "Hz. Süleyman, ........................ ve cinlere hükmetme mucizesine sahipti.", answer: "kuşlara", options: ["kuşlara", "köpeklere", "kedilere", "aslanlara"], explanation: "Hz. Süleyman'a kuşların dilini anlama mucizesi verilmiştir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'mc1', type: 'multipleChoice', question: "Aşağıdakilerden hangisi peygamberlerin görevlerinden biri değildir?", options: ["Allah'ın (cc) mesajlarını bildirmek", "Emirleri açıklamak", "Sadece kendi çıkarları için çalışmak", "Örnek olmak"], answer: "Sadece kendi çıkarları için çalışmak", explanation: "Peygamberler, insanlara rehberlik etmek ve Allah'ın emirlerini bildirmekle görevlidirler, kendi çıkarları için çalışmazlar.", theme: 'unit4', relatedConcept: "Nübüvvet" },
                { id: 'mc2', type: 'multipleChoice', question: "İnsan aklıyla tam olarak kavranamayan konular arasında aşağıdakilerden hangisi bulunur?", options: ["Yemek pişirme yöntemleri", "Evrenin yaratıcısı", "Ahiret konuları", "Matematik problemleri"], answer: "Ahiret konuları", explanation: "İnsan aklı, ahiret gibi gaybi konuları peygamberlerin rehberliği olmadan tam olarak kavrayamaz.", theme: 'unit4', relatedConcept: "Ahiret" },
                { id: 'mc3', type: 'multipleChoice', question: "Aşağıdaki peygamberlerden hangisi Ülülazm peygamberlerden biri değildir?", options: ["Hz. Nuh", "Hz. İbrahim", "Hz. Yusuf", "Hz. Musa"], answer: "Hz. Yusuf", explanation: "Ülülazm peygamberler Hz. Nuh, Hz. İbrahim, Hz. Musa, Hz. İsa ve Hz. Muhammed (sav)'dir. Hz. Yusuf bu gruba dahil değildir.", theme: 'unit4', relatedConcept: "Ülülazm" },
                { id: 'mc4', type: 'multipleChoice', question: "Hz. Nuh kıssasından çıkarılabilecek hisselerden biri aşağıdakilerden hangisidir?", options: ["İnsanlar arasında ayrımcılık yapılması gerektiği", "Allah'a (cc) hiçbir şey şirk koşulmaması gerektiği", "Peygamberlerin görevlerini yaparken karşılık beklemesi gerektiği", "İnsanın yaptığı işte azimli ve kararlı olmaması gerektiği"], answer: "Allah'a (cc) hiçbir şey şirk koşulmaması gerektiği", explanation: "Hz. Nuh'un tevhit mücadelesi, Allah'a ortak koşmamanın önemini gösterir.", theme: 'unit4', relatedConcept: "Tevhit" },
                { id: 'mc5', type: 'multipleChoice', question: "Hz. Nuh'un gemisine kimler binmiştir?", options: ["Sadece Hz. Nuh", "Hz. Nuh ve inananlar", "Hz. Nuh, inananlar ve her hayvandan birer çift", "Sadece inkarcılar"], answer: "Hz. Nuh, inananlar ve her canlı türünden birer çift", explanation: "Tufan sırasında gemiye Hz. Nuh, ona inananlar ve her canlı türünden birer çift binmiştir.", theme: 'unit4', relatedConcept: "Hz. Nuh" },
                { id: 'mc6', type: 'multipleChoice', question: "Hz. İbrahim'in putları kırmasından sonra halkın putların konuşamayacağını itiraf etmesi hangi hisseyi vurgular?", options: ["Ataların körü körüne taklit edilmesi gerektiği", "Putlara tapmanın anlamsızlığını", "Hz. İbrahim'in zayıf olduğunu", "Halkın putlara daha çok inanması gerektiğini"], answer: "Putlara tapmanın anlamsızlığını", explanation: "Bu olay, putların acizliğini ve onlara tapmanın boşluğunu ortaya koymuştur.", theme: 'unit4', relatedConcept: "Tevhit" },
                { id: 'mc7', type: 'multipleChoice', question: "Hz. İbrahim ve oğlu Hz. İsmail'in birlikte inşa ettiği yapı aşağıdakilerden hangisidir?", options: ["Mescid-i Aksa", "Kâbe", "Kudüs Tapınağı", "Babil Kulesi"], answer: "Kâbe", explanation: "Kâbe, Hz. İbrahim ve Hz. İsmail tarafından yeniden inşa edilen kutsal bir yapıdır.", theme: 'unit4', relatedConcept: "Kâbe" },
                { id: 'mc8', type: 'multipleChoice', question: "Yüce Allah dilerse imkansız görünen şeylerin gerçekleşebileceği", options: ["İnsanın inandığı değerleri savunurken korkak olması gerektiği", "En yakınlar şirke bulaşmış olsa bile bunun en büyük günah olmadığı", "Yüce Allah dilerse imkansız görünen şeylerin gerçekleşebileceği", "Ataların her zaman doğru yolda olduğu"], answer: "Yüce Allah dilerse imkansız görünen şeylerin gerçekleşebileceği", explanation: "Ateşin Hz. İbrahim'e zarar vermemesi, Allah'ın kudretinin bir göstergesidir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'mc9', type: 'multipleChoice', question: "Hz. Musa'ya hangi kutsal kitap indirilmiştir?", options: ["İncil", "Zebur", "Tevrat", "Kur'an-ı Kerim"], answer: "Tevrat", explanation: "Tevrat, Hz. Musa'ya vahyedilen ilahi kitaptır.", theme: 'unit4', relatedConcept: "Tevrat" },
                { id: 'mc10', type: 'multipleChoice', question: "Hz. Musa'nın doğduğu dönemde Mısır'ı yöneten zalim yönetici kimdir?", options: ["Nemrut", "Firavun", "Karun", "Ebu Cehil"], answer: "Firavun", explanation: "Firavun, İsrailoğullarına zulmeden Mısır hükümdarıydı.", theme: 'unit4', relatedConcept: "Firavun" },
                { id: 'mc11', type: 'multipleChoice', question: "Hz. Musa ve İsrailoğulları Firavun'dan kaçarken hangi deniz yarılmıştır?", options: ["Akdeniz", "Karadeniz", "Kızıldeniz", "Marmara Denizi"], answer: "Kızıldeniz", explanation: "Kızıldeniz'in yarılması, Hz. Musa'nın mucizelerinden biridir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'mc12', type: 'multipleChoice', question: "Hz. Musa kıssasından çıkarılabilecek hisselerden biri aşağıdakilerden hangisidir?", options: ["İnsanlara sert bir üslupla yaklaşılması gerektiği", "Allah'ın (cc) zulüm ve haksızlık edenleri cezalandıracağı", "Peygamberlerin toplumlara öncülük etmemesi gerektiği", "Firavun'un doğru yolda olduğu"], answer: "Allah'ın (cc) zulüm ve haksızlık edenleri cezalandıracağı", explanation: "Firavun'un boğulması, zalimlerin akıbetine bir örnektir.", theme: 'unit4', relatedConcept: "Adalet" },
                { id: 'mc13', type: 'multipleChoice', question: "Hz. İsa'ya hangi kutsal kitap indirilmiştir?", options: ["Tevrat", "Zebur", "İncil", "Kur'an-ı Kerim"], answer: "İncil", explanation: "İncil, Hz. İsa'ya vahyedilen kutsal kitaptır.", theme: 'unit4', relatedConcept: "İncil" },
                { id: 'mc14', type: 'multipleChoice', question: "Hz. İsa'nın annesi kimdir?", options: ["Hz. Hatice", "Hz. Ayşe", "Hz. Meryem", "Hz. Fatıma"], answer: "Hz. Meryem", explanation: "Hz. İsa, Hz. Meryem'in oğludur.", theme: 'unit4', relatedConcept: "Hz. İsa" },
                { id: 'mc15', type: 'multipleChoice', question: "Hz. İsa kıssasından çıkarılabilecek hisselerden biri aşağıdakilerden hangisidir?", options: ["Peygamberlerin tehditlere boyun eğmesi gerektiği", "İnsanın görevini yerine getirirken sabırsız olması gerektiği", "İnanmayanların tehditlerine aldırmamak gerektiği", "Hz. İsa'nın bir tanrı olduğu"], answer: "İnanmayanların tehditlerine aldırmamak gerektiği", explanation: "Peygamberler, görevlerini yerine getirirken tehditlere aldırış etmezler.", theme: 'unit4', relatedConcept: "İman" },
                { id: 'mc16', type: 'multipleChoice', question: "Kureyş Suresi ismini nereden almıştır?", options: ["Hz. Muhammed'in doğduğu şehirden", "Hz. Muhammed'in ailesinin mensup olduğu kabileden", "Kâbe'nin bulunduğu yerden", "Ticaret yollarından"], answer: "Hz. Muhammed'in ailesinin mensup olduğu kabileden", explanation: "Sure, Hz. Muhammed'in de mensup olduğu Kureyş kabilesine ithafen isimlendirilmiştir.", theme: 'unit4', relatedConcept: "Kureyş" },
                { id: 'mc17', type: 'multipleChoice', question: "Kureyş kabilesinin temel görevlerinden biri aşağıdakilerden hangisidir?", options: ["Savaşlar düzenlemek", "Kâbe'nin bakımını üstlenmek", "Ticari tekel oluşturmak", "Putlara tapmayı yaymak"], answer: "Kâbe'nin bakımını üstlenmek", explanation: "Kureyş kabilesi, Kâbe'nin hizmetinden sorumluydu.", theme: 'unit4', relatedConcept: "Kâbe" },
                { id: 'mc18', type: 'multipleChoice', question: "Kureyş Suresi'ni okuyan bir Müslüman, nimet verenin yalnızca kim olduğunu bilir?	Peygamberler	İnsanlar	Allah (cc)	Melekler", answer: "Allah (cc)", explanation: "Sure, tüm nimetlerin Allah'tan geldiğini hatırlatır.", theme: 'unit4', relatedConcept: "Tevhit" },
                { id: 'mc19', type: 'multipleChoice', question: "Peygamber kıssalarında verilen mesajlardan biri aşağıdakilerden hangisidir?", options: ["Geçmiş toplumların hatalarının tekrarlanması gerektiği", "Peygamberlerin insanları tevhide daveti temel konu değildir", "Kıssalarda iyilik ve kötülüğün ne olduğu anlatılmaz", "Müslümanlar, peygamberlerin çabalarını örnek alabilirler"], answer: "Müslümanlar, peygamberlerin çabalarını örnek alabilirler", explanation: "Peygamberlerin hayatları, Müslümanlar için güzel bir örnektir.", theme: 'unit4', relatedConcept: "Sünnet" },
                { id: 'mc20', type: 'multipleChoice', question: "Peygamberlerin insanlara rehber olarak gönderilmesi Allah'ın hangi sıfatını gösterir?", options: ["Kudret", "İrade", "Sevgi ve Merhamet", "Yaratıcılık"], answer: "Sevgi ve Merhamet", explanation: "Peygamber göndermek, Allah'ın insanlara olan sevgisinin ve merhametinin bir göstergesidir.", theme: 'unit4', relatedConcept: "Rahmet" },
                { id: 'mc21', type: 'multipleChoice', question: "Peygamberlerin söz ve davranışlarını öğrenip uygulayarak neye sahip olunabilir?", options: ["Zenginliğe", "Güzel ahlaka", "Güce", "Ün şöhrete"], answer: "Güzel ahlaka", explanation: "Peygamberlerin ahlakı, insanlara güzel ahlak edinme yolunda rehberlik eder.", theme: 'unit4', relatedConcept: "Ahlak" },
                { id: 'mc22', type: 'multipleChoice', question: "Kur'an-ı Kerim'deki peygamber kıssalarının amacı nedir?", options: ["Sadece tarihi olayları anlatmak", "İnsanlara öğüt vermek ve ders çıkarmalarını sağlamak", "Peygamberlerin üstünlüklerini göstermek", "İnsanları korkutmak"], answer: "İnsanlara öğüt vermek ve ders çıkarmalarını sağlamak", explanation: "Kıssalar, ibret almak ve doğru yolu bulmak için anlatılır.", theme: 'unit4', relatedConcept: "Öğüt" },
                { id: 'mc23', type: 'multipleChoice', question: "Peygamberlerin dürüstlük, adalet gibi ahlaki ilkeleri kendi hayatlarında uygulamaları ne anlama gelir?", options: ["Sadece kendileri için yaşadıkları", "İnsanlara örnek oldukları", "Bu ilkelerin sadece peygamberlere özel olduğu", "Bu ilkelerin önemsiz olduğu"], answer: "İnsanlara örnek oldukları", explanation: "Peygamberler, ahlaki değerleri yaşayarak insanlara yol gösterirler.", theme: 'unit4', relatedConcept: "Sünnet" },
                { id: 'mc24', 'type': 'multipleChoice', question: "Kureyş Suresi'nin temel konularından biri Kureyş'in geçimini nasıl sağladığına dikkat çekmesidir. Bu geçim şekli nedir?", options: ["Tarım", "Hayvancılık", "Ticari yolculuklar", "Balıkçılık"], answer: "Ticari yolculuklar", explanation: "Kureyş kabilesi, yaz ve kış ticari yolculuklar yaparak geçimini sağlamıştır.", theme: 'unit4', relatedConcept: "Kureyş" },
                { id: 'mc25', type: 'multipleChoice', question: "Peygamberlerin de sıkıntılar yaşadığının anlaşılması, Müslümanlara ne kazandırır?", options: ["İnanç uğruna mücadele etmemeyi", "Cesaret ve sabırla mücadele etmeyi", "Sıkıntılardan kaçınmayı", "Peygamberlere isyan etmeyi"], answer: "Cesaret ve sabırla mücadele etmeyi", explanation: "Peygamberlerin yaşadığı zorluklar, Müslümanlara inanç uğruna sabır ve cesaretle mücadele etme ilhamı verir.", theme: 'unit4', relatedConcept: "Sabır" },
                { id: 'mc26', type: 'multipleChoice', question: "Hz. Yusuf'un kardeşleri onu nereye atmışlardır?", options: ["Denize", "Kuyuya", "Mağaraya", "Çöle"], answer: "Kuyuya", explanation: "Hz. Yusuf'un kardeşleri onu kıskançlıklarından dolayı bir kuyuya atmışlardır.", theme: 'unit4', relatedConcept: "Hz. Yusuf" },
                { id: 'mc27', type: 'multipleChoice', question: "Hz. Eyyub'un sabrı hangi konuda örnek teşkil eder?", options: ["Zenginlikte", "Sağlıkta ve mal kaybında", "Güç ve iktidarda", "Bilimde"], answer: "Sağlıkta ve mal kaybında", explanation: "Hz. Eyyub, büyük hastalıklara ve mal kaybına karşı gösterdiği sabırla bilinir.", theme: 'unit4', relatedConcept: "Sabır" },
                { id: 'mc28', type: 'multipleChoice', question: "Hz. Yunus'u yutan balık hangi balıktır?", options: ["Köpekbalığı", "Balina", "Yunus balığı", "Bilinmiyor"], answer: "Bilinmiyor", explanation: "Kur'an'da balığın türü belirtilmemiştir, ancak büyük bir balık olduğu ifade edilir.", theme: 'unit4', relatedConcept: "Hz. Yunus" },
                { id: 'mc29', type: 'multipleChoice', question: "Hz. Zekeriya'nın mucizevi bir şekilde çocuk sahibi olması hangi peygamberin doğuşuna vesile olmuştur?", options: ["Hz. İsa", "Hz. Yahya", "Hz. İbrahim", "Hz. Musa"], answer: "Hz. Yahya", explanation: "Hz. Zekeriya'ya yaşlılık döneminde Hz. Yahya isminde bir oğul müjdelenmiştir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'mc30', type: 'multipleChoice', question: "Hz. Süleyman'ın en bilinen mucizelerinden biri aşağıdakilerden hangisidir?", options: ["Denizi yarması", "Kuşlarla konuşması", "Ateşe girmesi", "Ölüleri diriltmesi"], answer: "Kuşlarla konuşması", explanation: "Hz. Süleyman'a kuşların dilini anlama ve onlarla konuşma yeteneği verilmiştir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'mc31', type: 'multipleChoice', question: "Hz. Davut'a indirilen kutsal kitap hangisidir?", options: ["Tevrat", "İncil", "Zebur", "Kur'an-ı Kerim"], answer: "Zebur", explanation: "Zebur, Hz. Davut'a vahyedilen ilahi kitaptır.", theme: 'unit4', relatedConcept: "Zebur" },
                { id: 'mc32', type: 'multipleChoice', question: "Hz. Lokman'ın oğluna verdiği öğütler hangi surenin içinde yer alır?", options: ["Bakara Suresi", "Yasin Suresi", "Lokman Suresi", "Fatiha Suresi"], answer: "Lokman Suresi", explanation: "Lokman Suresi, Hz. Lokman'ın oğluna verdiği öğütleri içerir.", theme: 'unit4', relatedConcept: "Hikmet" },
                { id: 'mc33', type: 'multipleChoice', question: "Hz. Şuayb'ın kavminde hangi konuda hile yapmaktaydı?", options: ["Ticarette ölçü ve tartıda hile", "Savaşta hile", "Yemek yapmada hile", "İbadette hile"], answer: "Ticarette ölçü ve tartıda hile", explanation: "Hz. Şuayb, Medyen halkını ölçü ve tartıda adaletsizlik yapmaktan men etmiştir.", theme: 'unit4', relatedConcept: "Adalet" },
                { id: 'mc34', type: 'multipleChoice', question: "Peygamberlerin insanlara gönderilmesinin temel amacı nedir?", options: ["Sadece mucize göstermek", "İnsanları eğlendirmek", "Doğru yolu göstermek ve rehberlik etmek", "Dünya malı kazandırmak"], answer: "Doğru yolu göstermek ve rehberlik etmek", explanation: "Peygamberler, Allah'ın mesajlarını insanlara ulaştırarak onlara dünya ve ahiret için rehberlik ederler.", theme: 'unit4', relatedConcept: "Tebliğ" },
                { id: 'mc35', type: 'multipleChoice', question: "Hz. Adem ve Havva'nın cennetten çıkarılma sebebi nedir?", options: ["Allah'a isyan etmeleri", "Yasak ağacın meyvesinden yemeleri", "Birbirleriyle kavga etmeleri", "Cennetten sıkılmaları"], answer: "Yasak ağacın meyvesinden yemeleri", explanation: "Allah'ın yasakladığı ağacın meyvesinden yemeleri, cennetten çıkarılmalarına sebep olmuştur.", theme: 'unit4', relatedConcept: "Hz. Adem" },
                { id: 'mc36', type: 'multipleChoice', question: "Nuh tufanından kimler kurtulmuştur?", options: ["Tüm insanlar", "Sadece Hz. Nuh ve ailesi", "Hz. Nuh, inananlar ve her canlıdan birer çift", "Sadece hayvanlar"], answer: "Hz. Nuh, inananlar ve her canlıdan birer çift", explanation: "Tufan sırasında gemiye Hz. Nuh, ona inananlar ve her canlı türünden birer çift binmiştir.", theme: 'unit4', relatedConcept: "Hz. Nuh" },
                { id: 'mc37', type: 'multipleChoice', question: "Hz. İbrahim'in ateşe atılmasına rağmen yanmaması hangi özelliği vurgular?", options: ["Hz. İbrahim'in gücü", "Ateşin zayıflığı", "Allah'ın (cc) kudreti", "İnsanların inançsızlığı"], answer: "Allah'ın (cc) kudreti", explanation: "Ateşin Hz. İbrahim'e zarar vermemesi, Allah'ın sınırsız gücünün ve mucizesinin bir göstergesidir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'mc38', type: 'multipleChoice', question: "Hz. Musa'nın Firavun'a karşı gösterdiği en bilinen mucizelerden biri nedir?", options: ["Ölüleri diriltmek", "Ayı ikiye bölmek", "Asasının yılana dönüşmesi", "Kuşlarla konuşmak"], answer: "Asasının yılana dönüşmesi", explanation: "Hz. Musa'nın asasının yılana dönüşmesi, Firavun'un sihirbazlarına karşı gösterdiği en büyük mucizelerdendir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'mc39', type: 'multipleChoice', question: "Hz. Davut'un en belirgin özelliklerinden biri nedir?", options: ["Çok zengin olması", "Çok hızlı koşması", "Çok güzel sesi olması", "Çok uzun boylu olması"], answer: "Çok güzel sesi olması", explanation: "Hz. Davut'a güzel ses ve Zebur'u okurken dağların ve kuşların ona eşlik etmesi mucizesi verilmiştir.", theme: 'unit4', relatedConcept: "Hz. Davut" },
                { id: 'mc40', type: 'multipleChoice', question: "Hz. Süleyman'a verilen özel yeteneklerden biri nedir?", options: ["Denizde yürüme", "Zamanı durdurma", "Hayvanların dilini anlama", "Geleceği görme"], answer: "Hayvanların dilini anlama", explanation: "Hz. Süleyman'a hayvanların dilini anlama ve onlarla konuşma yeteneği verilmiştir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'mc41', type: 'multipleChoice', question: "Hz. Eyyub'un kıssasından çıkarılan en önemli ders nedir?", options: ["Zenginliğin önemi", "Sabrın ve tevekkülün önemi", "Gücün önemi", "Hızlı kararlar almanın önemi"], answer: "Sabrın ve tevekkülün önemi", explanation: "Hz. Eyyub'un hayatı, zorluklar karşısında sabretmenin ve Allah'a güvenmenin en güzel örneğidir.", theme: 'unit4', relatedConcept: "Tevekkül" },
                { id: 'mc42', type: 'multipleChoice', question: "Hz. Yunus'un balığın karnında iken yaptığı dua neyi ifade eder?", options: ["Öfkesini", "Korkusunu", "Pişmanlığını ve tövbesini", "Sevinçini"], answer: "Pişmanlığını ve tövbesini", explanation: "Hz. Yunus, balığın karnında iken yaptığı hatadan dolayı pişman olup Allah'a tövbe etmiştir.", theme: 'unit4', relatedConcept: "Tövbe" },
                { id: 'mc43', type: 'multipleChoice', question: "Peygamberlerin insanlara rehberlik etmesinin amacı nedir?", options: ["İnsanları köleleştirmek", "İnsanları korkutmak", "İnsanları dünya hayatında zengin etmek", "İnsanlara doğru yolu göstermek ve onları kurtuluşa erdirmek"], answer: "İnsanlara doğru yolu göstermek ve onları kurtuluşa erdirmek", explanation: "Peygamberler, Allah'ın emir ve yasaklarını bildirerek onları hem dünya hem de ahiret saadetine ulaştırırlar.", theme: 'unit4', relatedConcept: "Tebliğ" },
                { id: 'mc44', type: 'multipleChoice', question: "Hz. Zekeriya'nın yaşlılıkta çocuk sahibi olması hangi ilahi sıfatı gösterir?", options: ["Adalet", "Hikmet", "Kudret", "İrade"], answer: "Kudret", explanation: "Yaşlılık ve kısırlık durumunda çocuk sahibi olması, Allah'ın sınırsız kudretinin bir göstergesidir.", theme: 'unit4', relatedConcept: "Dua" },
                { id: 'mc45', type: 'multipleChoice', question: "Hz. Lokman'ın oğluna verdiği öğütlerin temel konusu nedir?", options: ["Ticaret yapma yolları", "Savaş stratejileri", "Ahlaki değerler ve Allah'a kulluk", "Zengin olma yolları"], answer: "Ahlaki değerler ve Allah'a kulluk", explanation: "Lokman Suresi'nde yer alan öğütler, tevhit, şükür, sabır ve güzel ahlak gibi konulara odaklanır.", theme: 'unit4', relatedConcept: "Ahlak" },
                { id: 'mc46', type: 'multipleChoice', question: "Hz. Şuayb'ın kavminin helak olma sebebi nedir?", options: ["Putlara tapmaları", "Hırsızlık yapmaları", "Ölçü ve tartıda hile yapmaları ve peygamberi yalanlamaları", "Savaşmaları"], answer: "Ölçü ve tartıda hile yapmak", explanation: "Medyen halkı, ticaretteki hileleri ve Hz. Şuayb'ı yalanlamaları nedeniyle helak olmuştur.", theme: 'unit4', relatedConcept: "Zulüm" },
                { id: 'mc47', type: 'multipleChoice', question: "Peygamberlerin insanlara örnek olmaları ne anlama gelir?", options: ["Sadece sözleriyle öğretmeleri", "Sadece mucizeleriyle etkilemeleri", "Hem sözleriyle hem de davranışlarıyla rehberlik etmeleri", "Sadece dini konularda örnek olmaları"], answer: "Hem sözleriyle hem de davranışlarıyla rehberlik etmeleri", explanation: "Peygamberler, hayatlarının her alanında insanlara örnek teşkil etmişlerdir.", theme: 'unit4', relatedConcept: "Sünnet" },
                { id: 'mc48', type: 'multipleChoice', question: "Hz. Muhammed (sav)'in peygamberliği hangi özelliği taşır?", options: ["Sadece Araplara özgü olması", "Belirli bir zaman dilimiyle sınırlı olması", "Evrensel ve son peygamber olması", "Sadece erkeklere hitap etmesi"], answer: "Evrensel ve son peygamber olması", explanation: "Hz. Muhammed (sav), tüm insanlığa gönderilen son peygamberdir.", theme: 'unit4', relatedConcept: "Hz. Muhammed" },
                { id: 'mc49', type: 'multipleChoice', question: "Peygamber kıssalarının en önemli faydalarından biri nedir?", options: ["Geçmişi merak gidermek", "Tarih bilgisi vermek", "İnsanlara öğüt vermek ve ders çıkarmalarını sağlamak", "Eğlence sunmak"], answer: "İnsanlara öğüt vermek ve ders çıkarmalarını sağlamak", explanation: "Peygamber kıssaları, insanlara ibret alacakları ve hayatlarına uygulayacakları dersler sunar.", theme: 'unit4', relatedConcept: "İbret" },
                { id: 'mc50', type: 'multipleChoice', question: "Peygamberlerin tebliğ ettiği dinin özü nedir?", options: ["Çok tanrılı inanç", "Putperestlik", "Allah'ın birliği (Tevhit)", "Doğaüstü güçlere inanma"], answer: "Allah'ın birliği (Tevhit)", explanation: "Tüm peygamberler, ortak mesajı, Allah'ın birliği ve sadece O'na kulluk etmektir.", theme: 'unit4', relatedConcept: "Tevhit" },
                { id: 'mc51', type: 'multipleChoice', question: "Peygamberler, insanlara hangi konularda rehberlik etmişlerdir?", options: ["Sadece ibadet", "Sadece ahlak", "Sadece hukuk", "Dini, ahlaki, sosyal ve hukuki tüm konularda"], answer: "Dini, ahlaki, sosyal ve hukuki tüm konularda", explanation: "Peygamberler, insan hayatının her alanında rehberlik etmişlerdir.", theme: 'unit4', relatedConcept: "İslam" },
                { id: 'mc52', type: 'multipleChoice', question: "Hz. İsa'nın babasız doğumu hangi kavramla açıklanır?", options: ["Doğal olay", "Bilimsel açıklama", "Mucize", "Tesadüf"], answer: "Mucize", explanation: "Hz. İsa'nın babasız doğumu, Allah'ın (cc) kudretinin bir mucizesidir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'mc53', type: 'multipleChoice', question: "Peygamberlerin insanlara karşı tutumları genellikle nasıldı?", options: ["Sert ve acımasız", "Korkutucu ve tehditkar", "Şefkatli, merhametli ve sabırlı", "Kaygısız ve umursamaz"], answer: "Şefkatli, merhametli ve sabırlı", explanation: "Peygamberler, kavimlerine karşı her zaman şefkat ve merhametle yaklaşmışlardır.", theme: 'unit4', relatedConcept: "Merhamet" },
                { id: 'mc54', type: 'multipleChoice', question: "Hz. Adem ve Havva'nın cennetten çıkarıldıktan sonraki pişmanlıkları neyi gösterir?", options: ["Allah'a isyan etmeyi", "Günahın affedilebilirliğini", "Sadece kendi hatalarını", "Cennete geri dönemeyeceklerini"], answer: "Günahın affedilebilirliğini", explanation: "Tövbe ve pişmanlıkları, Allah'ın (cc) affedici olduğunu ve tövbeleri kabul ettiğini gösterir.", theme: 'unit4', relatedConcept: "Tövbe" },
                { id: 'mc55', type: 'multipleChoice', question: "Hz. Nuh'un gemisinin Cudi Dağı'na oturması neyi simgeler?", options: ["Tufanın sona erdiğini", "Yeni bir başlangıcı", "Allah'ın (cc) rahmetini", "Hepsi"], answer: "Hepsi", explanation: "Cudi Dağı'na oturması, tufanın sona erdiğini, yeni bir hayatın başladığını ve Allah'ın rahmetini simgeler.", theme: 'unit4', relatedConcept: "Hz. Nuh" },
                { id: 'mc56', type: 'multipleChoice', question: "Hz. İbrahim'in putlara karşı mücadelesi hangi inancın temelini oluşturur?", options: ["Putperestlik", "Şirk", "Tevhit", "Ateizm"], answer: "Tevhit", explanation: "Hz. İbrahim'in mücadelesi, Allah'ın birliği (tevhit) inancının önemini vurgular.", theme: 'unit4', relatedConcept: "Tevhit" },
                { id: 'mc57', type: 'multipleChoice', question: "Hz. Musa'nın Kızıldeniz'i yarması hangi ilahi sıfatı gösterir?", options: ["Adalet", "Hikmet", "Kudret", "İrade"], answer: "Kudret", explanation: "Kızıldeniz'in yarılması, Allah'ın (cc) sınırsız gücünün ve mucizesinin bir göstergesidir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'mc58', type: 'multipleChoice', question: "Hz. Davut'un Calut'u yenmesi neyi simgeler?", options: ["Güçlünün her zaman kazanacağını", "Maddi gücün önemini", "Küçük bir gücün Allah'ın yardımıyla büyük bir gücü yenebileceğini", "Savaşın kaçınılmazlığını"], answer: "Küçük bir gücün Allah'ın yardımıyla büyük bir gücü yenebileceğini", explanation: "Hz. Davut'un Calut'u yenmesi, Allah'ın yardımıyla zayıfın güçlüye karşı zafer kazanabileceğini gösterir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'mc59', type: 'multipleChoice', question: "Hz. Süleyman'ın cinlere hükmetme yeteneği neyi ifade eder?", options: ["İnsanüstü bir varlık olduğunu", "Sihirbaz olduğunu", "Allah'ın (cc) ona verdiği özel bir mucize olduğunu", "Korkutucu olduğunu"], answer: "Allah'ın (cc) ona verdiği özel bir mucize olduğunu", explanation: "Hz. Süleyman'a verilen bu yetenek, Allah'ın (cc) ona bahşettiği özel bir mucizedir.", theme: 'unit4', relatedConcept: "Mucize" },
                { id: 'mc60', type: 'multipleChoice', question: "Hz. Eyyub'un sabrı, Müslümanlara hangi konuda ilham verir?", options: ["Kolay yoldan zengin olma", "Zorluklar karşısında direnme ve Allah'a güvenme", "Hastalıkta şikayet etme", "Başkalarına bağımlı olma"], answer: "Zorluklar karşısında direnme ve Allah'a güvenme", explanation: "Hz. Eyyub'un sabrı, Müslümanlara hayatın zorlukları karşısında Allah'a tevekkül etme ve direnme gücü verir.", theme: 'unit4', relatedConcept: "Tevekkül" },
                { id: 'mc61', type: 'multipleChoice', question: "Hz. Yunus'un balığın karnında iken yaptığı dua neyi ifade eder?", options: ["Öfkesini", "Korkusunu", "Pişmanlığını ve tövbesini", "Sevinçini"], answer: "Pişmanlığını ve tövbesini", explanation: "Hz. Yunus, balığın karnında iken yaptığı hatadan dolayı pişman olup Allah'a tövbe etmiştir.", theme: 'unit4', relatedConcept: "Tövbe" },
                { id: 'mc62', type: 'multipleChoice', question: "Peygamberlerin hepsi hangi dine davet etmişlerdir?", options: ["Hristiyanlık", "Yahudilik", "İslam", "Tevhit inancına"], answer: "Tevhit inancına", explanation: "Tüm peygamberler, temelde Allah'ın birliği ve O'na kulluk etme (tevhit) inancına davet etmişlerdir.", theme: 'unit4', relatedConcept: "Tevhit" },
                { id: 'mc63', type: 'multipleChoice', question: "Hz. Yusuf kıssasından çıkarılabilecek hisselerden biri aşağıdakilerden hangisidir?", options: ["Kıskançlığın iyi bir duygu olduğu", "Zorlukların insanı güçlendirdiği ve Allah'a yakınlaştırdığı", "Ailenin her zaman düşman olduğu", "İntikam almanın önemli olduğu"], answer: "Zorlukların insanı güçlendirdiği ve Allah'a yakınlaştırdığı", explanation: "Hz. Yusuf'un hayatındaki zorluklar, onun karakterini güçlendirmiş ve Allah'a olan bağlılığını artırmıştır.", theme: 'unit4', relatedConcept: "Sabır" },
                { id: 'mc64', type: 'multipleChoice', question: "Hz. Zekeriya'nın duası, Allah'ın (cc) hangi özelliğini gösterir?", options: ["Acizliğini", "Unutkanlığını", "Dualara icabet ettiğini ve her şeye gücünün yettiğini", "Sadece gençlere yardım ettiğini"], answer: "Dualara icabet ettiğini ve her şeye gücünün yettiğini", explanation: "Hz. Zekeriya'nın duasına icabet edilmesi, Allah'ın (cc) duaları kabul ettiğini ve sınırsız kudret sahibi olduğunu gösterir.", theme: 'unit4', relatedConcept: "Dua" },
                { id: 'mc65', type: 'multipleChoice', question: "Hz. Şuayb'ın kavminin helak olma sebebi nedir?", options: ["Putlara tapmaları", "Hırsızlık yapmaları", "Ölçü ve tartıda hile yapmaları ve peygamberi yalanlamaları", "Savaşmaları"], answer: "Ölçü ve tartıda hile yapmak", explanation: "Medyen halkı, ticaretteki hileleri ve Hz. Şuayb'ı yalanlamaları nedeniyle helak olmuştur.", theme: 'unit4', relatedConcept: "Zulüm" },
                { id: 'mc66', type: 'multipleChoice', question: "Peygamberlerin insanlara gönderilmesi, Allah'ın (cc) hangi sıfatının bir tecellisidir?", options: ["Kudret", "İrade", "Rahmet ve Hikmet", "Yaratıcılık"], answer: "Rahmet ve Hikmet", explanation: "Peygamberlerin gönderilmesi, Allah'ın insanlara olan rahmetinin ve her şeyi bir hikmetle yaratmasının bir göstergesidir.", theme: 'unit4', relatedConcept: "Hikmet" }
            ],
            'unit5': [ // 5. Ünite: Mimarimizde Dinî Motifler (Expanded to ~20 questions)
                { id: 'u5_tf1', type: 'trueFalse', question: "Camiler, İslam mimarisinin en önemli örnekleridir.", answer: "D", explanation: "Camiler, Müslümanların ibadet yerleri ve mimarinin önemli eserleridir.", theme: 'unit5' },
                { id: 'u5_tf2', type: 'trueFalse', question: "Minare, caminin içinde bulunan bir bölümdür.", answer: "Y", explanation: "Minare, caminin dışında, ezan okumak için inşa edilen yüksek yapıdır.", theme: 'unit5' },
                { id: 'u5_tf3', type: 'trueFalse', question: "Mihrap, caminin kıble yönünü gösterir.", answer: "D", explanation: "Mihrap, camide imamın namaz kıldırdığı ve kıbleyi gösteren niştir.", theme: 'unit5' },
                { id: 'u5_tf4', type: 'trueFalse', question: "Şadırvan, caminin içinde abdest alınan yerdir.", answer: "Y", explanation: "Şadırvan, caminin avlusunda abdest almak için kullanılan çeşmeli yapıdır.", theme: 'unit5' },
                { id: 'u5_tf5', type: 'trueFalse', question: "Kubbe, caminin tavanını oluşturan yarım küre şeklindeki yapıdır.", answer: "D", explanation: "Kubbe, camilerin önemli mimari unsurlarından biridir.", theme: 'unit5' },
                { id: 'u5_tf6', type: 'trueFalse', question: "Hattatlık, camilerde kullanılan bir süsleme sanatıdır.", answer: "D", explanation: "Hattatlık, güzel yazı yazma sanatı olup cami ve diğer dini yapılarda sıkça kullanılır.", theme: 'unit5' },
                { id: 'u5_tf7', type: 'trueFalse', question: "Çini sanatı, sadece camilerde kullanılır.", answer: "Y", explanation: "Çini sanatı, camilerin yanı sıra saray, köşk ve diğer dini mimari yapılarda da kullanılır.", theme: 'unit5' },
                { id: 'u5_tf8', type: 'trueFalse', question: "Minber, camide vaaz verilen yerdir.", answer: "D", explanation: "Minber, camide hutbe okunan ve vaaz verilen yüksek kürsüdür.", theme: 'unit5' },
                { id: 'u5_tf9', type: 'trueFalse', question: "Caminin avlusunda bulunan, namaz öncesi abdest almak için kullanılan yere şadırvan denir.", answer: "D", explanation: "Şadırvan, cami avlularında bulunan ve abdest almak için kullanılan bir yapıdır.", theme: 'unit5' },
                { id: 'u5_tf10', type: 'trueFalse', question: "Cami, sadece ibadet edilen bir yerdir.", answer: "Y", explanation: "Cami, ibadetin yanı sıra eğitim, sosyal yardımlaşma ve kültürel faaliyetlerin de yürütüldüğü bir merkezdir.", theme: 'unit5' },
                { id: 'u5_fb1', type: 'fillInTheBlanks', question: "Caminin kıble yönünü gösteren ve imamın namaz kıldırdığı yere ........................ denir.", answer: "mihrap", options: ["mihrap", "minber", "şadırvan", "kubbe"], explanation: "Mihrap, caminin en önemli bölümlerinden biridir.", theme: 'unit5' },
                { id: 'u5_fb2', type: 'fillInTheBlanks', question: "Caminin içinde vaaz verilen yüksek kürsüye ........................ denir.", answer: "minber", options: ["minber", "mihrap", "şadırvan", "kubbe"], explanation: "Minber, camide hutbe okunan yerdir.", theme: 'unit5' },
                { id: 'u5_fb3', type: 'fillInTheBlanks', question: "Camilerin dışındaki yüksek, ince yapıya ........................ denir.", answer: "minare", options: ["minare", "kubbe", "şadırvan", "mihrap"], explanation: "Minare, ezan okumak için kullanılan yapıdır.", theme: 'unit5' },
                { id: 'u5_fb4', type: 'fillInTheBlanks', question: "Camilerin tavanını örten yarım küre şeklindeki yapıya ........................ denir.", answer: "kubbe", options: ["kubbe", "minare", "şadırvan", "mihrap"], explanation: "Kubbe, cami mimarisinin önemli bir öğesidir.", theme: 'unit5' },
                { id: 'u5_fb5', type: 'fillInTheBlanks', question: "Cami ve diğer dini yapılarda güzel yazı yazma sanatına ........................ denir.", answer: "hattatlık", options: ["hattatlık", "ebru", "minyatür", "tezhip"], explanation: "Hattatlık, İslam sanatlarında önemli bir yer tutar.", theme: 'unit5' },
                { id: 'u5_mc1', type: 'multipleChoice', question: "Aşağıdakilerden hangisi caminin bölümlerinden biri değildir?", options: ["Kubbe", "Şadırvan", "Minare", "Mutfak"], answer: "Mutfak", explanation: "Mutfak, caminin bir bölümü değildir.", theme: 'unit5' },
                { id: 'u5_mc2', type: 'multipleChoice', question: "Osmanlı mimarisinin önemli cami örneklerinden biri aşağıdakilerden hangisidir?", options: ["Eyfel Kulesi", "Sultanahmet Camii", "Pisa Kulesi", "Tac Mahal"], answer: "Sultanahmet Camii", explanation: "Sultanahmet Camii, İstanbul'da bulunan önemli bir Osmanlı eseridir.", theme: 'unit5' },
                { id: 'u5_mc3', type: 'multipleChoice', question: "Camilerde kullanılan renkli ve desenli seramik süsleme sanatına ne ad verilir?", options: ["Hattatlık", "Ebru", "Çini", "Minyatür"], answer: "Çini", explanation: "Çini, İslam ve Türk mimarisinde sıkça kullanılan bir süsleme sanatıdır.", theme: 'unit5' },
                { id: 'u5_mc4', type: 'multipleChoice', question: "Aşağıdakilerden hangisi camilerin toplumsal işlevlerinden biridir?", options: ["Sadece namaz kılmak", "Eğitim ve sosyal yardımlaşma", "Ticaret yapmak", "Eğlence düzenlemek"], answer: "Eğitim ve sosyal yardımlaşma", explanation: "Camiler, ibadetin yanı sıra toplumsal dayanışma ve eğitim merkezi olarak da hizmet verir.", theme: 'unit5' },
                { id: 'u5_mc5', type: 'multipleChoice', question: "Cami mimarisinde kullanılan 'alem' neyin üzerinde bulunur?", options: ["Mihrap", "Minber", "Minare", "Şadırvan"], answer: "Minare", explanation: "Alem, minarelerin en üstünde bulunan hilal veya top şeklindeki süsleme elemanıdır.", theme: 'unit5' }
            ]
        };

        /**
         * Ensures that the given array of questions contains exactly 100 questions.
         * If the array has fewer than 100 questions, it duplicates existing questions randomly
         * until the count reaches 100. If it has more, it truncates to 100.
         * @param {Array<Object>} questionsArray The array of questions for a unit.
         * @returns {Array<Object>} An array containing exactly 100 questions.
         */
        function ensureOneHundredQuestions(questionsArray) {
            let currentQuestions = [...questionsArray]; // Create a shallow copy to avoid modifying the original
            const targetCount = 100;

            if (currentQuestions.length >= targetCount) {
                return currentQuestions.slice(0, targetCount); // If already 100 or more, just take the first 100
            }

            // If less than 100, duplicate questions until it reaches 100
            const originalLength = currentQuestions.length;
            while (currentQuestions.length < targetCount) {
                const randomIndex = Math.floor(Math.random() * originalLength);
                const questionToDuplicate = currentQuestions[randomIndex];
                // Create a new object for the duplicated question to ensure unique IDs if needed later,
                // and to prevent unintended modifications if question objects are mutable.
                // For now, just copying the object is sufficient as IDs are already unique per unit.
                currentQuestions.push({ ...questionToDuplicate, id: `${questionToDuplicate.id}_copy_${currentQuestions.length}` });
            }
            return currentQuestions;
        }


        // Initialize Firebase
        async function initFirebase() {
            try {
                const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
                if (Object.keys(firebaseConfig).length === 0) {
                    console.error("Firebase config is missing. Cannot initialize Firebase.");
                    return;
                }

                window.firebaseApp = initializeApp(firebaseConfig);
                window.auth = getAuth(window.firebaseApp);
                
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(window.auth, __initial_auth_token);
                } else {
                    await signInAnonymously(window.auth);
                }
                window.userId = window.auth.currentUser?.uid || crypto.randomUUID();
                console.log("Firebase initialized. User ID:", window.userId);
            } catch (e) {
                console.error("Error initializing Firebase or authenticating:", e);
            }
        }

        initFirebase(); // Call initFirebase when the script loads

        // DOM elements (declared globally but assigned in onload)
        let mainMenuScreen; // Main menu to select units
        let playerSelectionScreen; // Screen for player/team selection
        let gamePanel; // Main game area (score, grid, quiz content)
        let scoreBoard;
        let scoreBoardTeamsContainer;
        let currentPlayerTurnDisplay;
        let quizContentContainer;
        let questionContainer;
        let feedbackDiv;
        let nextTurnButton;
        let detailedExplanationContainer;
        let loadingSpinner;
        let finalScoreContainer;
        let overallResultDiv;
        let resetGameButton;
        let questionCounterDisplay;
        let questionNavigationContainer;
        let timerDisplay;
        let gridInstructionMessage;
        let questionScreenInstructionMessage;
        let fullscreenOverlay;
        let returnToMainMenuButton; // New button for returning to main menu
        let returnToMainMenuGridButton; // New button for returning to main menu from grid
        
        // Functions
        window.selectUnit = function(unitId) {
            console.log(`Selected unit: ${unitId}`);
            window.currentUnit = unitId;
            mainMenuScreen.classList.add('hidden'); // Hide main menu
            playerSelectionScreen.classList.remove('hidden'); // Show player selection for the unit
            setGameBackground(unitId); // Set background based on selected unit
        };

        window.selectNumTeams = function(num) {
            console.log(`selectNumTeams called. Number of teams: ${num}`);
            window.numTeams = num;
            window.teamScores = Array(window.numTeams).fill(0);
            window.currentPlayer = 1; // Start with the first team
            playerSelectionScreen.classList.add('hidden'); // Hide team selection screen
            gamePanel.classList.remove('hidden'); // Show the main game panel
            startGame(); // Initialize game state and show question grid
        };

        window.startGame = function() {
            console.log("startGame called for unit:", window.currentUnit);
            window.currentQuestionIndex = 0;
            window.answeredQuestions = {};
            // Get questions specific to the selected unit and slice to 100 if more exist
            // Ensure each unit has exactly 100 questions before shuffling and slicing
            shuffledQuestions = shuffleArray(ensureOneHundredQuestions(unitQuestions[window.currentUnit]));
            
            quizContentContainer.classList.add('hidden');
            finalScoreContainer.classList.add('hidden');
            questionNavigationContainer.classList.remove('hidden');
            
            updateScoreBoard();
            renderQuestionNumbers();
            gridInstructionMessage.classList.remove('hidden');
            questionScreenInstructionMessage.classList.add('hidden');
            if (questionCounterDisplay) {
                questionCounterDisplay.classList.remove('hidden');
            }
            setGameBackground(window.currentUnit); // Set background for the current unit's game
            console.log("Game started. Showing question grid for Team", window.teamNames[window.currentPlayer - 1]);
        };

        function updateScoreBoard() {
            console.log("updateScoreBoard called. Current Player:", window.currentPlayer, "Team Scores:", window.teamScores);
            if (scoreBoard) scoreBoard.classList.remove('hidden');

            if (scoreBoardTeamsContainer && currentPlayerTurnDisplay) {
                scoreBoardTeamsContainer.innerHTML = '';
                for (let i = 0; i < window.numTeams; i++) {
                    const teamName = window.teamNames[i];
                    const teamScore = window.teamScores[i];
                    const scoreBox = document.createElement('div');
                    scoreBox.classList.add('player-score-box');
                    scoreBox.innerHTML = `<div class="score-item">${teamName}: ${teamScore}</div>`;
                    if (window.currentPlayer === (i + 1)) {
                        scoreBox.classList.add('active-player-score');
                        scoreBox.classList.remove('inactive-player-score');
                    } else {
                        scoreBox.classList.remove('active-player-score');
                        scoreBox.classList.add('inactive-player-score');
                    }
                    scoreBoardTeamsContainer.appendChild(scoreBox);
                }
                currentPlayerTurnDisplay.textContent = `Sıra: ${window.teamNames[window.currentPlayer - 1]}`;
            }
            if (gridInstructionMessage) {
                gridInstructionMessage.textContent = `Sıra ${window.teamNames[window.currentPlayer - 1]}'nda. Henüz cevaplanmamış bir soru seçin.`;
            }
        }

        function renderCurrentQuestion() {
            console.log("renderCurrentQuestion called. Current Question Index:", window.currentQuestionIndex);
            if (questionCounterDisplay) {
                questionCounterDisplay.classList.add('hidden');
            }

            feedbackDiv.classList.remove('show', 'correct', 'incorrect');
            feedbackDiv.innerHTML = '';
            detailedExplanationContainer.innerHTML = '';
            detailedExplanationContainer.classList.add('hidden');
            
            clearInterval(timerInterval);
            timerDisplay.classList.add('hidden');
            questionScreenInstructionMessage.classList.add('hidden');
            nextTurnButton.classList.add('hidden');

            const allAnswered = shuffledQuestions.every(q => window.answeredQuestions[q.id]);
            if (allAnswered) {
                showFinalScore();
                return;
            }

            const q = shuffledQuestions[window.currentQuestionIndex];
            setGameBackground(q.theme || window.currentUnit); // Use question theme if available, else unit theme
            questionCounterDisplay.textContent = `Soru ${shuffledQuestions.indexOf(q) + 1} / ${shuffledQuestions.length}`;
            
            questionContainer.classList.add('question-block-closed');

            let questionHtml = `<p class="question-text">${q.question}</p>`;
            let optionsHtml = '<div class="options-container">';
            let optionsToShuffle = [];

            if (q.type === 'trueFalse') {
                optionsToShuffle = ["Doğru", "Yanlış"];
            } else if (q.type === 'fillInTheBlanks' || q.type === 'multipleChoice') {
                optionsToShuffle = [...q.options];
            }
            
            const shuffledOptions = shuffleArray(optionsToShuffle);
            const optionColors = ['option-color-1', 'option-color-2', 'option-color-3', 'option-color-4', 'option-color-5'];

            shuffledOptions.forEach((option, optIndex) => {
                const colorClass = optionColors[optIndex % optionColors.length];
                optionsHtml += `
                    <label class="option-label ${colorClass}">
                        <input type="radio" name="${q.id}" value="${option}" onchange="checkCurrentAnswer()">
                        <span>${option}</span>
                    </label>
                `;
            });
            optionsHtml += '</div>';
            questionHtml += optionsHtml;
            
            questionContainer.innerHTML = questionHtml;
            
            setTimeout(() => {
                questionContainer.classList.remove('question-block-closed');
            }, 50);

            if (window.answeredQuestions[q.id]) {
                const currentAnswerState = window.answeredQuestions[q.id]; 
                nextTurnButton.classList.remove('hidden');
                
                const selectedRadio = document.querySelector(`input[name="${q.id}"][value="${currentAnswerState.userAnswer}"]`);
                if (selectedRadio) {
                    selectedRadio.checked = true;
                    if (!currentAnswerState.isCorrect) {
                        const selectedLabel = selectedRadio.closest('label');
                        if (selectedLabel) {
                            selectedLabel.classList.add('incorrect-selected-option');
                        }
                    }
                }
                document.querySelectorAll(`input[name="${q.id}"]`).forEach(radio => radio.disabled = true);

                displayFeedback(currentAnswerState.isCorrect, q.answer, currentAnswerState.userAnswer, q.explanation);

                let actualAnswerValue = q.answer;
                if (q.type === 'trueFalse') {
                    actualAnswerValue = (q.answer === 'D' ? 'Doğru' : 'Yanlış');
                }
                const correctRadio = document.querySelector(`input[name="${q.id}"][value="${actualAnswerValue}"]`);
                if (correctRadio) {
                    const correctLabel = correctRadio.closest('label');
                    if (correctLabel) {
                        correctLabel.classList.add('correct-option-highlight');
                    }
                }

                questionScreenInstructionMessage.textContent = `Cevaplandı. Sırayı ${window.teamNames[window.currentPlayer % window.numTeams]}'na geçirmek için 'Sonraki Oyuncu' butonuna tıklayın.`;
                questionScreenInstructionMessage.classList.remove('hidden');

            } else {
                nextTurnButton.classList.add('hidden');
                startTimer();
            }

            updateScoreBoard();
            renderQuestionNumbers();
        }

        function startTimer() {
            timer = 40;
            timerDisplay.classList.remove('hidden');
            timerDisplay.classList.remove('warning', 'critical');
            timerDisplay.textContent = `Kalan Süre: ${timer} saniye`;

            timerInterval = setInterval(() => {
                timer--;
                timerDisplay.textContent = `Kalan Süre: ${timer} saniye`;

                if (timer <= 10 && timer > 5) {
                    timerDisplay.classList.add('warning');
                    timerDisplay.classList.remove('critical');
                } else if (timer <= 5) {
                    timerDisplay.classList.add('critical');
                    timerDisplay.classList.remove('warning');
                } else {
                    timerDisplay.classList.remove('warning', 'critical');
                }

                if (timer <= 0) {
                    handleTimeout();
                }
            }, 1000);
        }

        function handleTimeout() {
            clearInterval(timerInterval);
            timerDisplay.classList.add('hidden');

            const q = shuffledQuestions[window.currentQuestionIndex];
            if (!window.answeredQuestions[q.id]) {
                window.answeredQuestions[q.id] = { isCorrect: false, userAnswer: 'Süre Doldu', answeredBy: window.currentPlayer };
            }
            
            document.querySelectorAll(`input[name="${q.id}"]`).forEach(radio => radio.disabled = true);

            displayFeedback(false, q.answer, 'Süre Doldu', q.explanation);

            let actualAnswerValue = q.answer;
            if (q.type === 'trueFalse') {
                actualAnswerValue = (q.answer === 'D' ? 'Doğru' : 'Yanlış');
            }
            const correctRadio = document.querySelector(`input[name="${q.id}"][value="${actualAnswerValue}"]`);
            if (correctRadio) {
                const correctLabel = correctRadio.closest('label');
                if (correctLabel) {
                    correctLabel.classList.add('correct-option-highlight');
                }
            }

            renderQuestionNumbers();
            questionScreenInstructionMessage.textContent = `Süreyi kullandınız. Sırayı ${window.teamNames[window.currentPlayer % window.numTeams]}'na geçirmek için 'Sonraki Oyuncu' butonuna tıklayın.`;
            questionScreenInstructionMessage.classList.remove('hidden');
            nextTurnButton.classList.remove('hidden');
        }

        window.checkCurrentAnswer = function() {
            clearInterval(timerInterval);
            timerDisplay.classList.add('hidden');

            const q = shuffledQuestions[window.currentQuestionIndex];
            let userAnswer;
            let isCorrect = false;

            const selected = document.querySelector(`input[name="${q.id}"]:checked`);
            userAnswer = selected ? selected.value : '';
            
            let actualAnswer = q.answer;
            if (q.type === 'trueFalse') {
                actualAnswer = (q.answer === 'D' ? 'Doğru' : 'Yanlış');
            }

            isCorrect = (userAnswer === actualAnswer);

            if (isCorrect) {
                window.teamScores[window.currentPlayer - 1]++;
            }

            window.answeredQuestions[q.id] = { isCorrect: isCorrect, userAnswer: userAnswer, answeredBy: window.currentPlayer };
            
            displayFeedback(isCorrect, q.answer, userAnswer, q.explanation);

            document.querySelectorAll(`input[name="${q.id}"]`).forEach(radio => radio.disabled = true);

            if (!isCorrect) {
                const selectedLabel = selected.closest('label');
                if (selectedLabel) {
                    selectedLabel.classList.add('incorrect-selected-option');
                }
            }
            let correctOptionValue = q.answer;
            if (q.type === 'trueFalse') {
                correctOptionValue = (q.answer === 'D' ? 'Doğru' : 'Yanlış');
            }
            const correctRadio = document.querySelector(`input[name="${q.id}"][value="${correctOptionValue}"]`);
            if (correctRadio) {
                const correctLabel = correctRadio.closest('label');
                if (correctLabel) {
                    correctLabel.classList.add('correct-option-highlight');
                }
            }

            updateScoreBoard();
            renderQuestionNumbers();
            questionScreenInstructionMessage.textContent = `Cevaplandı. Sırayı ${window.teamNames[window.currentPlayer % window.numTeams]}'na geçirmek için 'Sonraki Oyuncu' butonuna tıklayın.`;
            questionScreenInstructionMessage.classList.remove('hidden');
            nextTurnButton.classList.remove('hidden');
        }

        window.moveToNextTurn = function() {
            detailedExplanationContainer.innerHTML = '';
            detailedExplanationContainer.classList.add('hidden');

            const allAnswered = shuffledQuestions.every(q => window.answeredQuestions[q.id]);

            if (allAnswered) {
                showFinalScore();
                return;
            }

            window.currentPlayer = (window.currentPlayer % window.numTeams) + 1;
            updateScoreBoard();
            returnToQuestionsGrid();
        }

        function displayFeedback(isCorrect, correctAnswer, userAnswer, explanation) {
            if (isCorrect) {
                feedbackDiv.classList.remove('show', 'correct', 'incorrect');
                feedbackDiv.innerHTML = ``;
            } else {
                feedbackDiv.classList.add('show', 'incorrect');
                feedbackDiv.classList.remove('correct');
                let icon = '❌';
                feedbackDiv.innerHTML = `<span class="feedback-icon">${icon}</span> Yanlış.`;
                if (explanation) {
                    feedbackDiv.innerHTML += `<p class="explanation-text">${explanation}</p>`;
                }
                let actualAnswerValue = correctAnswer;
                if (shuffledQuestions[window.currentQuestionIndex].type === 'trueFalse') {
                    actualAnswerValue = (correctAnswer === 'D' ? 'Doğru' : 'Yanlış');
                }
                feedbackDiv.innerHTML += `<p class="explanation-text mt-2">Doğru cevap: <span class="font-bold text-green-700">${actualAnswerValue}</span></p>`;
            }
        }

        function renderQuestionNumbers() {
            questionNavigationContainer.innerHTML = '';
            
            shuffledQuestions.forEach((q, index) => {
                const navItem = document.createElement('span');
                navItem.classList.add('question-nav-item');
                navItem.textContent = index + 1;
                
                if (!window.answeredQuestions[q.id]) {
                    navItem.onclick = () => selectQuestion(index);
                }

                if (index === window.currentQuestionIndex && !quizContentContainer.classList.contains('hidden')) {
                    navItem.classList.add('active-question');
                } else {
                    navItem.classList.remove('active-question');
                }

                if (window.answeredQuestions[q.id]) {
                    if (window.answeredQuestions[q.id].isCorrect) {
                        navItem.classList.add('answered-correctly');
                        navItem.classList.remove('answered-incorrectly');
                    } else {
                        navItem.classList.add('answered-incorrectly');
                        navItem.classList.remove('answered-correctly');
                    }
                    navItem.classList.add('disabled-selection');
                } else {
                    navItem.classList.remove('answered-correctly', 'answered-incorrectly', 'disabled-selection');
                }
                questionNavigationContainer.appendChild(navItem);
            });
        }

        window.selectQuestion = function(index) {
            const q = shuffledQuestions[index];

            if (window.answeredQuestions[q.id]) {
                return;
            }

            window.currentQuestionIndex = index;
            quizContentContainer.classList.remove('hidden');
            questionNavigationContainer.classList.add('hidden');
            
            fullscreenOverlay.classList.remove('hidden');
            setTimeout(() => fullscreenOverlay.classList.add('show'), 10);
            quizContentContainer.classList.add('fullscreen-active');

            renderCurrentQuestion();
            hideFinalScore();
            gridInstructionMessage.classList.add('hidden');
            questionScreenInstructionMessage.classList.add('hidden');
            detailedExplanationContainer.innerHTML = '';
            detailedExplanationContainer.classList.add('hidden');
        }

        window.returnToQuestionsGrid = function() {
            quizContentContainer.classList.add('hidden');
            questionNavigationContainer.classList.remove('hidden');
            if (questionCounterDisplay) {
                questionCounterDisplay.classList.remove('hidden');
            }
            renderQuestionNumbers();
            hideFinalScore();
            clearInterval(timerInterval);
            timerDisplay.classList.add('hidden');
            nextTurnButton.classList.add('hidden');
            detailedExplanationContainer.innerHTML = '';
            detailedExplanationContainer.classList.add('hidden');
            
            nextTurnButton.textContent = "Sonraki Oyuncu";
            nextTurnButton.onclick = window.moveToNextTurn;

            updateScoreBoard();
            gridInstructionMessage.classList.remove('hidden');
            questionScreenInstructionMessage.classList.add('hidden');

            setGameBackground(window.currentUnit); // Return to unit specific background

            fullscreenOverlay.classList.remove('show');
            setTimeout(() => fullscreenOverlay.classList.add('hidden'), 300);
            quizContentContainer.classList.remove('fullscreen-active');
        }

        function showFinalScore() {
            quizContentContainer.classList.add('hidden');
            questionNavigationContainer.classList.add('hidden');
            clearInterval(timerInterval);
            timerDisplay.classList.add('hidden');
            detailedExplanationContainer.innerHTML = '';
            detailedExplanationContainer.classList.add('hidden');

            finalScoreContainer.classList.remove('hidden');
            resetGameButton.classList.remove('hidden');
            nextTurnButton.classList.add('hidden');
            gridInstructionMessage.classList.add('hidden');
            questionScreenInstructionMessage.classList.add('hidden');
            setGameBackground(window.currentUnit); // Keep unit specific background for final score

            fullscreenOverlay.classList.remove('show');
            setTimeout(() => fullscreenOverlay.classList.add('hidden'), 300);
            quizContentContainer.classList.remove('fullscreen-active');

            let maxScore = 0;
            for (let i = 0; i < window.numTeams; i++) {
                if (window.teamScores[i] > maxScore) {
                    maxScore = window.teamScores[i];
                }
            }

            let winners = [];
            for (let i = 0; i < window.numTeams; i++) {
                if (window.teamScores[i] === maxScore) {
                    winners.push(window.teamNames[i]);
                }
            }

            let winnerMessage = '';
            if (winners.length === 1) {
                winnerMessage = `${winners[0]} kazandı! 🎉`;
                overallResultDiv.classList.add('correct');
                overallResultDiv.classList.remove('incorrect');
            } else if (winners.length > 1) {
                winnerMessage = `${winners.join(' ve ')} berabere kaldı! 🤝`;
                overallResultDiv.classList.remove('correct', 'incorrect');
            } else {
                winnerMessage = `Oyun berabere bitti! 🤝`;
                overallResultDiv.classList.remove('correct', 'incorrect');
            }

            let scoreSummaryHtml = '';
            for (let i = 0; i < window.numTeams; i++) {
                scoreSummaryHtml += `<p>${window.teamNames[i]} Puanı: ${window.teamScores[i]} / ${shuffledQuestions.length}</p>`;
            }

            overallResultDiv.innerHTML = `
                ${scoreSummaryHtml}
                <p class="mt-4 text-xl font-bold">${winnerMessage}</p>
            `;
            overallResultDiv.classList.add('show');
        }

        function hideFinalScore() {
            finalScoreContainer.classList.add('hidden');
            resetGameButton.classList.add('hidden');
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        window.resetGame = function() {
            window.teamScores = [];
            window.numTeams = 0;
            window.currentPlayer = 0;
            window.currentQuestionIndex = 0;
            window.answeredQuestions = {};
            clearInterval(timerInterval);
            timerDisplay.classList.add('hidden');
            shuffledQuestions = []; // Clear questions
            window.currentUnit = null;

            quizContentContainer.classList.add('hidden');
            hideFinalScore();
            questionNavigationContainer.classList.add('hidden');
            gamePanel.classList.add('hidden');
            playerSelectionScreen.classList.add('hidden');
            mainMenuScreen.classList.remove('hidden'); // Show main menu
            gridInstructionMessage.classList.add('hidden');
            questionScreenInstructionMessage.classList.add('hidden');
            detailedExplanationContainer.innerHTML = '';
            detailedExplanationContainer.classList.add('hidden');
            if (questionCounterDisplay) {
                questionCounterDisplay.classList.add('hidden');
            }
            setGameBackground('general');

            fullscreenOverlay.classList.remove('show');
            setTimeout(() => fullscreenOverlay.classList.add('hidden'), 300);
            quizContentContainer.classList.remove('fullscreen-active');

            if (currentPlayerTurnDisplay) {
                currentPlayerTurnDisplay.textContent = "Sıra: A Takımı";
                currentPlayerTurnDisplay.classList.remove('text-gray-600', 'font-normal');
                currentPlayerTurnDisplay.classList.add('current-turn');
            }
            if (scoreBoard) {
                scoreBoard.classList.remove('hidden');
            }
        }

        // New function to return to main menu from any game screen
        window.returnToMainMenu = function() {
            console.log("Returning to main menu.");
            window.teamScores = [];
            window.numTeams = 0;
            window.currentPlayer = 0;
            window.currentQuestionIndex = 0;
            window.answeredQuestions = {};
            clearInterval(timerInterval);
            timerDisplay.classList.add('hidden');
            shuffledQuestions = [];
            window.currentUnit = null;

            quizContentContainer.classList.add('hidden');
            hideFinalScore();
            questionNavigationContainer.classList.add('hidden');
            gamePanel.classList.add('hidden');
            playerSelectionScreen.classList.add('hidden');
            mainMenuScreen.classList.remove('hidden'); // Show main menu
            gridInstructionMessage.classList.add('hidden');
            questionScreenInstructionMessage.classList.add('hidden');
            detailedExplanationContainer.innerHTML = '';
            detailedExplanationContainer.classList.add('hidden');
            if (questionCounterDisplay) {
                questionCounterDisplay.classList.add('hidden');
            }
            setGameBackground('general');

            fullscreenOverlay.classList.remove('show');
            setTimeout(() => fullscreenOverlay.classList.add('hidden'), 300);
            quizContentContainer.classList.remove('fullscreen-active');

            if (currentPlayerTurnDisplay) {
                currentPlayerTurnDisplay.textContent = "Sıra: A Takımı";
                currentPlayerTurnDisplay.classList.remove('text-gray-600', 'font-normal');
                currentPlayerTurnDisplay.classList.add('current-turn');
            }
            if (scoreBoard) {
                scoreBoard.classList.remove('hidden');
            }
        }


        // Initial setup on page load
        window.onload = async function() { 
            console.log("Window loaded. Starting application setup.");

            // Assign DOM elements here to ensure they are loaded
            mainMenuScreen = document.getElementById('main-menu-screen');
            playerSelectionScreen = document.getElementById('player-selection-screen'); 
            gamePanel = document.getElementById('game-panel');
            scoreBoard = document.getElementById('score-board');
            scoreBoardTeamsContainer = document.getElementById('score-board-teams-container');
            currentPlayerTurnDisplay = document.getElementById('current-player-turn');
            quizContentContainer = document.getElementById('quiz-content');
            questionContainer = document.getElementById('current-question-container');
            feedbackDiv = document.getElementById('current-question-feedback');
            nextTurnButton = document.getElementById('next-turn-button'); 
            detailedExplanationContainer = document.getElementById('detailed-explanation-container'); 
            loadingSpinner = document.getElementById('loading-spinner'); 
            
            finalScoreContainer = document.getElementById('final-score-container');
            overallResultDiv = document.getElementById('overall-result');
            resetGameButton = document.getElementById('reset-game-button');
            questionCounterDisplay = document.getElementById('question-counter');
            questionNavigationContainer = document.getElementById('question-navigation');
            timerDisplay = document.getElementById('timer-display');
            gridInstructionMessage = document.getElementById('grid-instruction-message'); 
            questionScreenInstructionMessage = document.getElementById('question-screen-instruction-message'); 
            fullscreenOverlay = document.getElementById('fullscreen-overlay');
            returnToMainMenuButton = document.getElementById('return-to-main-menu-button'); // Assign the new button
            returnToMainMenuGridButton = document.getElementById('return-to-main-menu-grid-button'); // Assign the new grid button

            // Log to confirm elements are found
            const elementsToCheck = {
                mainMenuScreen, playerSelectionScreen, gamePanel, scoreBoard, scoreBoardTeamsContainer, currentPlayerTurnDisplay,
                quizContentContainer, questionContainer, feedbackDiv, nextTurnButton,
                detailedExplanationContainer, loadingSpinner, 
                finalScoreContainer, overallResultDiv, resetGameButton,
                questionCounterDisplay, questionNavigationContainer, timerDisplay,
                gridInstructionMessage, questionScreenInstructionMessage, fullscreenOverlay,
                returnToMainMenuButton, returnToMainMenuGridButton
            };

            for (const key in elementsToCheck) {
                if (elementsToCheck[key] === null) {
                    console.error(`ERROR: DOM element '${key}' not found! This is critical for the app to function.`);
                } else {
                    console.log(`DOM element '${key}' found.`);
                }
            }

            // Initially hide all game-related panels and show main menu
            if (gamePanel) {
                gamePanel.classList.add('hidden');
            }
            if (playerSelectionScreen) {
                playerSelectionScreen.classList.add('hidden');
            }
            if (mainMenuScreen) {
                mainMenuScreen.classList.remove('hidden');
            }
            if (questionCounterDisplay) {
                questionCounterDisplay.classList.add('hidden');
            }
            setGameBackground('general');
            console.log("Application setup complete. Showing main menu screen.");

            await initFirebase(); 
        };
    </script>
</head>
<body>
    <div id="fullscreen-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden opacity-0 transition-opacity duration-300"></div>

    <div class="container">
        <h1>Din Kültürü ve Ahlak Bilgisi Bilgi Yarışması</h1>

        <div id="main-menu-screen" class="player-selection-screen">
            <h2>Ünite Seçimi</h2>
            <div class="team-selection-buttons">
                <button class="action-button" onclick="selectUnit('unit1')">1. Ünite: Allah İnancı</button>
                <button class="action-button" onclick="selectUnit('unit2')">2. Ünite: Namaz</button>
                <button class="action-button" onclick="selectUnit('unit3')">3. Ünite: Kur'an-ı Kerim</button>
                <button class="action-button" onclick="selectUnit('unit4')">4. Ünite: Peygamber Kıssaları</button>
                <button class="action-button" onclick="selectUnit('unit5')">5. Ünite: Mimarimizde Dinî Motifler</button>
            </div>
        </div>

        <div id="player-selection-screen" class="player-selection-screen hidden">
            <h2>Kaç Takım Oynayacak?</h2>
            <div class="team-selection-buttons">
                <button class="action-button" onclick="selectNumTeams(1)">1 Takım</button>
                <button class="action-button" onclick="selectNumTeams(2)">2 Takım</button>
                <button class="action-button" onclick="selectNumTeams(3)">3 Takım</button>
                <button class="action-button" onclick="selectNumTeams(4)">4 Takım</button>
                <button class="action-button" onclick="selectNumTeams(5)">5 Takım</button>
            </div>
        </div>

        <div id="game-panel" class="hidden">
            <div id="score-board" class="score-board">
                <div id="score-board-teams-container" class="flex flex-wrap justify-center items-center">
                    </div>
                <div id="current-player-turn" class="current-turn">Sıra: A Takımı</div>
            </div>

            <div id="grid-instruction-message" class="text-center text-md font-medium text-gray-700 mb-4"></div>
            <div id="question-navigation" class="question-navigation">
                </div>
            
            <div class="button-group mt-4" id="question-grid-buttons">
                <button id="return-to-main-menu-grid-button" class="action-button return-button" onclick="returnToMainMenu()">Ana Sayfaya Dön</button>
            </div>

            <div id="quiz-content" class="hidden">
                <div class="question-area">
                    <div id="question-counter" class="question-counter"></div>
                    <div id="timer-display" class="timer-display hidden"></div>
                    <div id="current-question-container" class="question-block">
                        </div>
                </div>
                <div id="current-question-feedback" class="feedback-message"></div>
                <div class="button-group">
                    <button id="next-turn-button" class="action-button next-button hidden" onclick="moveToNextTurn()">Sonraki Oyuncu</button>
                    <button id="return-to-main-menu-button" class="action-button return-button" onclick="returnToMainMenu()">Ana Sayfaya Dön</button>
                </div>
                <div id="loading-spinner" class="loading-spinner"></div>
                <div id="detailed-explanation-container" class="detailed-explanation-container hidden"></div>
                <div id="question-screen-instruction-message" class="text-center text-md font-medium text-gray-700 mt-2 hidden"></div>
            </div>

            <div id="final-score-container" class="hidden">
                <div id="overall-result" class="feedback-message"></div>
                <button id="reset-game-button" class="action-button reset-button" onclick="resetGame()">Yeniden Başla</button>
                <button id="return-to-main-menu-from-final-button" class="action-button return-button mt-4" onclick="returnToMainMenu()">Ana Sayfaya Dön</button>
            </div>
        </div>
    </div>
</body>
</html>
