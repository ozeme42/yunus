<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Din Kültürü ve Ahlak Bilgisi 7. Sınıf Ünite Etkinlikleri</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <style>
        /* Ensure html and body take full height */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            color: #333;
            line-height: 1.6;
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to start to allow scrolling if content overflows */
            min-height: 100vh; /* Use min-height to ensure it takes full height */
            padding: 2rem 1rem;
            box-sizing: border-box; /* Include padding and border in the element's total width and height */
            background-size: cover; /* Görselin tüm alanı kaplamasını sağlar */
            background-position: center; /* Görseli ortalar */
            background-repeat: no-repeat; /* Görselin tekrarlanmasını engeller */
            background-attachment: fixed; /* Görselin sabit kalmasını sağlar */
            font-size: 1.25rem; /* Genel yazı boyutu biraz daha büyütüldü */
            transition: background-image 1s ease-in-out; /* Arka plan geçiş efekti */
        }
        .container {
            width: 100%;
            max-width: 900px; /* Increased max-width for the main container */
            padding: 2rem;
            background-color: #e6f0f5; /* Beyaz arka plan rengi değiştirildi */
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            flex-grow: 1; /* Allow container to grow within the flex parent */
            display: flex; /* Use flex for internal layout of container */
            flex-direction: column; /* Stack children vertically */
        }
        h1 {
            color: #2c3e50;
            font-weight: 700;
            text-align: center;
            margin-bottom: 2rem;
            font-size: 2.8rem; /* Başlık boyutu büyütüldü */
        }
        /* START: Score Board Styles */
        .score-table-container {
            margin-top: 1rem;
            margin-bottom: 1rem;
            display: flex;
            justify-content: center;
            width: 100%;
        }
        .score-table {
            display: flex;
            justify-content: center; /* Center the participants */
            gap: 1rem; /* Space between participant score cards */
            border-radius: 0.75rem;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            background-color: #ffffff;
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
            flex-wrap: wrap;
            padding: 0.5rem; /* Add some padding around the entire score table */
        }
        .score-cell {
            padding: 1rem 1.5rem; /* Increased padding */
            display: flex;
            flex-direction: column; /* Stack name and score vertically */
            align-items: center;
            justify-content: center;
            min-width: 140px; /* Increased min-width */
            box-sizing: border-box;
            border-radius: 0.5rem; /* Rounded corners for individual cells */
            transition: all 0.3s ease; /* Smooth transition for active state */
            position: relative;
            z-index: 1; /* Ensure cells are above each other for shadow/outline */
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); /* Subtle shadow for each cell */
            background-color: #3b82f6; /* Default blue for participants */
        }
        .score-cell.active-participant {
            transform: translateY(-5px); /* Lift up active active-participant */
            box-shadow: 0 8px 15px rgba(0,0,0,0.2); /* More prominent shadow for active active-participant */
            outline: 4px solid #fcd34d; /* Thicker yellow outline */
            outline-offset: -4px;
            z-index: 2; /* Bring active active-participant further to front */
        }
        .score-cell .participant-name {
            font-size: 1.1em; /* Slightly larger for name */
            margin-bottom: 0.5rem; /* More space below name */
            opacity: 1; /* Full opacity for name */
            display: flex;
            align-items: center;
            gap: 0.5rem; /* Space between icon and name */
        }
        .score-cell .participant-score {
            font-size: 2.5em; /* Significantly larger for score */
            font-weight: 900; /* Extra bold */
            line-height: 1; /* Adjust line height for large numbers */
        }
        /* END: Score Board Styles */

        /* START: Leaderboard List Styles */
        .leaderboard-list {
            display: grid; /* Changed to grid for column layout */
            grid-template-columns: repeat(5, minmax(150px, 1fr)); /* Responsive 5-column layout */
            gap: 1rem; /* Gap between grid items */
            width: 100%; /* Keep 100% width */
            padding: 0.6rem 1rem; /* Further reduced padding for smaller height */
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden; /* Ensure content stays within bounds */
        }
        @media (max-width: 768px) {
            .leaderboard-list {
                grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); /* Adjust min-width for smaller screens */
            }
        }
        .leaderboard-item {
            display: flex; /* Changed back to flex for horizontal arrangement */
            justify-content: space-between; /* Distribute items horizontally */
            align-items: center; /* Vertically center items */
            padding: 0.6rem 1rem; /* Further reduced padding for smaller height */
            border: 1px solid #e2e8f0; /* Changed to all-around border */
            border-radius: 8px; /* Rounded corners for each item */
            font-size: 0.95rem; /* Further reduced font size for overall height */
            transition: all 0.2s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); /* Subtle shadow for each item */
            flex-grow: 1; /* Allow items to grow to fill space */
            min-width: 0; /* Allow content to shrink below intrinsic width */
        }
        /* New color classes for leaderboard items */
        .leaderboard-item.color-0 { background-color: #e0f7fa; color: #006064; border-color: #80deea; } /* Cyan */
        .leaderboard-item.color-1 { background-color: #e8f5e9; color: #2e7d32; border-color: #a5d6a7; } /* Green */
        .leaderboard-item.color-2 { background-color: #f3e5f5; color: #6a1b9a; border-color: #ce93d8; } /* Purple */
        .leaderboard-item.color-3 { background-color: #fff3e0; color: #ef6c00; border-color: #ffcc80; } /* Orange */
        .leaderboard-item.color-4 { background-color: #ffebee; color: #c62828; border-color: #ef9a9a; } /* Red */
        .leaderboard-item.color-5 { background-color: #e3f2fd; color: #1565c0; border-color: #90caf9; } /* Blue */
        .leaderboard-item.color-6 { background-color: #fbe9e7; color: #d84315; border-color: #ffab91; } /* Deep Orange */
        .leaderboard-item.color-7 { background-color: #f1f8e9; color: #558b2f; border-color: #c5e1a5; } /* Light Green */
        .leaderboard-item.color-8 { background-color: #ede7f6; color: #4527a0; border-color: #b39ddb; } /* Deep Purple */
        .leaderboard-item.color-9 { background-color: #e8f5e9; color: #2e7d32; border-color: #a5d6a7; } /* Green (repeat) */


        .leaderboard-item.active-participant {
            transform: translateY(-5px); /* Lift up active active-participant */
            box-shadow: 0 8px 15px rgba(0,0,0,0.2); /* More prominent shadow for active active-participant */
            outline: 4px solid #fcd34d; /* Thicker yellow outline */
            outline-offset: -4px;
            z-index: 2; /* Bring active active-participant further to front */
        }
        .leaderboard-rank {
            font-weight: 700;
            color: inherit; /* Inherit color from parent */
            margin-right: 0.6rem; /* Reduced space after rank */
            min-width: 20px; /* Ensure space for rank numbers */
            text-align: right;
            font-size: 0.9em; /* Further adjusted font size */
            flex-shrink: 0; /* Prevent shrinking */
        }
        .leaderboard-name {
            flex-grow: 1;
            font-weight: 600; /* Bolder name */
            font-size: 1em; /* Further adjusted font size */
            margin-right: 0.6rem; /* Reduced space after name */
            text-align: left;
            white-space: nowrap; /* Keep name on a single line */
            overflow: hidden; /* Hide overflowing content */
            text-overflow: ellipsis; /* Add ellipsis for overflowing text */
            min-width: 50px; /* Ensure a minimum width for the name */
        }
        .leaderboard-score {
            font-weight: 800; /* Even bolder score */
            color: inherit; /* Inherit color from parent */
            font-size: 1.2em; /* Slightly reduced font size for better fit */
            white-space: nowrap; /* Prevent score from wrapping */
            flex-shrink: 0; /* Prevent shrinking */
            min-width: 60px; /* Ensure a minimum width for the score */
            text-align: right; /* Align score to the right */
        }
        /* END: Leaderboard List Styles */


        .current-participant-display {
            font-size: 1.5rem; /* Metin boyutu büyütüldü */
            font-weight: 700;
            color: #6366f1;
            margin: 0.5rem; /* Space around display */
            text-align: center; /* Center the display */
        }
        .question-area {
            min-height: 180px; /* Minimum height for the question area increased */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            margin-bottom: 0; /* Boşluk kaldırıldı */
            flex-grow: 1; /* Allow question area to grow */
        }
        .question-block {
            padding: 2rem; /* Increased padding for question block */
            background-color: #e3f2fd; /* New color for the question area */
            border-radius: 8px;
            border: 1px solid #90caf9; /* More distinct border */
            width: 100%;
            box-sizing: border-box;
            /* Added for "box-opening" effect */
            opacity: 1;
            transform: scale(1);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
            margin-bottom: 1.5rem; /* Added margin to separate from feedback */
        }
        .question-block.question-block-closed {
            opacity: 0;
            transform: scale(0.8);
        }
        .question-text {
            font-size: 1.6rem; /* Soru metni boyutu daha da büyütüldü */
            margin-bottom: 1.8rem;
            font-weight: 500;
            line-height: 1.8;
        }
        .question-points {
            font-size: 1.1rem;
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 1rem;
            padding: 0.5rem 1rem;
            background-color: #d1e7dd; /* Light green background for points */
            border-radius: 6px;
            display: inline-block; /* To make padding effective */
        }
        .options-container {
            display: flex;
            flex-direction: row; /* Options side-by-side */
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
            justify-content: center;
            gap: 1.2rem; /* Space between boxes increased */
            margin-top: 1.5rem;
        }
        .option-label {
            display: flex; /* Keep flex for centering content within the box */
            align-items: center;
            justify-content: center; /* Center text and radio button */
            cursor: pointer;
            padding: 1.2rem 1.8rem; /* Increased padding for box feel */
            border-radius: 10px; /* More rounded corners */
            transition: all 0.2s ease-in-out; /* Smooth transition for hover/active */
            flex-basis: calc(50% - 0.6rem); /* Exactly half minus half the gap */
            max-width: calc(50% - 0.6rem); /* Ensures no more than two per row */
            min-width: 200px; /* Minimum width for each option box increased */
            box-sizing: border-box;
            font-size: 1.35rem; /* Cevap metni boyutu daha da büyütüldü */
            font-weight: 500;
            text-align: center; /* Ensure text is centered */
            border: 2px solid transparent; /* Default transparent border */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08); /* Subtle shadow */
        }
        .option-label:hover {
            transform: translateY(-3px); /* Lift effect on hover */
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.12);
        }
        .option-label input[type="radio"] {
            /* Visually hide the radio button, but keep it functional */
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
            pointer-events: none; /* Ensure clicks go through to the label */
        }

        /* New classes for option box colors */
        .option-color-1 { background-color: #dbeafe; border-color: #93c5fd; color: #1e40af; } /* Blue */
        .option-color-2 { background-color: #d1fae5; border-color: #6ee7b7; color: #065f46; } /* Green */
        .option-color-3 { background-color: #ffe4e6; border-color: #fca5a5; color: #be123c; } /* Red */
        .option-color-4 { background-color: #fffbeb; border-color: #fcd34d; color: #92400e; } /* Yellow */
        .option-color-5 { background-color: #e0e7ff; border-color: #a78bfa; color: #4338ca; } /* Indigo */


        /* Adjust correct/incorrect highlights for new box style */
        .option-label.correct-option-highlight {
            background-color: #a7f3d0 !important; /* Brighter green for correct */
            border-color: #065f46 !important; /* Darker green border */
            color: #065f46 !important;
            transform: none; /* No lift on highlight */
            box-shadow: 0 4px 10px rgba(6, 95, 70, 0.2);
        }
        .option-label.incorrect-selected-option {
            background-color: #fecaca !important; /* Light red for incorrect selected */
            border-color: #991b1b !important; /* Darker red border */
            color: #991b1b !important;
            transform: none; /* No lift on highlight */
            box-shadow: 0 4px 10px rgba(153, 27, 27, 0.2);
        }

        /* Ensure the text is visible and centered */
        .option-label span {
            display: block;
            width: 100%;
        }

        /* Responsive adjustments for smaller screens */
        @media (max-width: 640px) {
            .option-label {
                max-width: 100%; /* Full width on small screens */
                min-width: unset;
                flex-basis: 100%; /* Full width on small screens */
            }
        }
        .button-group {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 0; /* Boşluk kaldırıldı */
        }
        .action-button {
            padding: 0.9rem 2.2rem; /* Buton paddingi büyütüldü */
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.3rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3); /* Default shadow, overridden by specific button styles */
        }
        .action-button:hover {
            transform: translateY(-2px);
        }
        .action-button:active {
            transform: translateY(0);
        }
        .action-button:disabled {
            background-color: #a7a7a7 !important;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }
        .feedback-message {
            text-align: center;
            margin-top: 1.5rem; /* Ensure space from the question block */
            font-size: 1.3rem; /* Geri bildirim metin boyutu büyütüldü */
            font-weight: 600;
            padding: 0.9rem; /* Geri bildirim paddingi büyütüldü */
            border-radius: 8px;
            opacity: 0;
            transition: opacity 0.5s ease;
            display: flex; /* Use flex to center content */
            align-items: center;
            justify-content: center;
            gap: 0.5rem; /* Space between icon and text */
        }
        .feedback-message.show {
            opacity: 1;
        }
        .feedback-message.incorrect {
            background-color: #fee2e2; /* Light Red */
            color: #b91c1c; /* Darker Red */
            border: 1px solid #fca5a5;
        }
        .feedback-message.correct {
            background-color: #d1fae5;
            color: #065f46;
            border: 1px solid #6ee7b7;
        }
        .explanation-text {
            font-size: 1.1rem; /* Açıklama metin boyutu büyütüldü */
            font-weight: 400;
            margin-top: 0.6rem;
            color: #4a5568;
        }
        .score-display {
            text-align: center;
            font-size: 1.6rem; /* Skor göstergesi metin boyutu büyütüldü */
            font-weight: 700;
            margin-top: 2rem;
            padding: 1.1rem;
            background-color: #e0f2fe;
            border-radius: 8px;
            color: #0c4a6e;
        }
        .question-counter {
            font-size: 1.2rem; /* Soru sayacı metin boyutu büyütüldü */
            font-weight: 500;
            color: #555;
            margin-bottom: 1.1rem;
        }
        .question-navigation {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.9rem; /* Space between boxes increased */
            margin-bottom: 2.2rem;
            padding: 1.2rem;
            background-color: #e0f2fe;
            border-radius: 8px;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.06);
        }
        .question-nav-item {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px; /* Box width increased */
            height: 50px; /* Box height increased */
            border-radius: 8px; /* More rounded corners */
            background-color: #bfdbfe;
            color: #1e40af;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
            text-decoration: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            font-size: 1.2rem; /* Soru navigasyon öğesi metin boyutu büyütüldü */
        }
        .question-nav-item:hover {
            background-color: #93c5fd;
            transform: translateY(-2px);
        }
        .question-nav-item.active-question {
            background-color: #3b82f6;
            color: white;
            font-weight: 700;
            box-shadow: 0 4px 8px rgba(59, 130, 246, 0.4);
            transform: translateY(-2px);
        }
        .question-nav-item.answered-correctly {
            background-color: #a7f3d0; /* Green-200 */
            color: #065f46; /* Green-800 */
        }
        /* Removed .answered-incorrectly styling to make it look like an unanswered question */
        /* .question-nav-item.answered-incorrectly {
            background-color: #fecaca;
            color: #991b1b;
        } */
        /* Removed disabled-selection for answered-incorrectly to allow re-selection */
        /* .question-nav-item.disabled-selection {
            cursor: not-allowed;
            opacity: 0.6;
        } */
        .hidden {
            display: none !important; /* Added !important to ensure it overrides other styles */
        }
        .feedback-icon {
            font-size: 1.3em;
            margin-right: 0.4em;
        }
        .timer-display {
            font-size: 1.3rem; /* Zamanlayıcı metin boyutu büyütüldü */
            font-weight: 600;
            color: #ef4444; /* Red color for timer */
            margin-bottom: 1.1rem;
            text-align: center;
        }
        .timer-display.warning {
            color: #f59e0b; /* Orange for warning */
        }
        .timer-display.critical {
            color: #dc2626; /* Darker red for critical */
        }
        .player-selection-screen { /* Renamed to .main-screen-layout for general use */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            gap: 2.2rem;
            text-align: center;
        }
        .player-selection-screen h2 {
            font-size: 2.5rem; /* Başlık boyutu büyütüldü */
            font-weight: 600;
            color: #2c3e50;
        }
        .player-selection-screen .action-button {
            min-width: 220px;
        }
        .selection-buttons { /* Renamed to .selection-buttons */
            display: grid; /* Changed to grid */
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); /* Responsive columns */
            justify-content: center;
            gap: 1.5rem;
            width: 100%; /* Ensure it takes full width */
            max-width: 800px; /* Optional: limit max width for very large screens */
            margin: 0 auto; /* Center the grid */
        }
        /* New styles for LLM explanation */
        .detailed-explanation-container {
            margin-top: 1.8rem;
            padding: 1.2rem;
            background-color: #f0f9ff;
            border: 1px solid #a5d8ff;
            border-radius: 8px;
            font-size: 1.1rem; /* Detaylı açıklama metin boyutu büyütüldü */
            color: #2c3e50;
            line-height: 1.6;
            text-align: left;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .loading-spinner {
            border: 4px solid #f3f3f3; /* Light grey */
            border-top: 44px solid #3498db; /* Blue */
            border-radius: 50%;
            width: 28px; /* Spinner boyutu büyütüldü */
            height: 28px; /* Spinner boyutu büyütüldü */
            animation: spin 1s linear infinite;
            margin: 1.2rem auto;
            display: none; /* Hidden by default */
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Fullscreen overlay for question */
        #fullscreen-overlay {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black */
            z-index: 40;
            opacity: 0;
            visibility: hidden; /* Changed to hidden for initial state */
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        #fullscreen-overlay.show {
            opacity: 1;
            visibility: visible; /* Changed to visible when shown */
        }

        /* Fullscreen question container */
        #quiz-content.fullscreen-active {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 50;
            background-color: #e6f0f5; /* Match container background */
            border-radius: 0; /* No rounded corners for full screen */
            box-shadow: none; /* No shadow for full screen */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start; /* Content starts from top */
            padding: 2.5rem 1.5rem; /* Responsive padding increased */
            overflow-y: auto; /* Enable scrolling for long questions */
            transition: all 0.5s ease-in-out;
        }

        #quiz-content.fullscreen-active #timer-display {
            margin-top: 1.2rem; /* Space from top of the screen */
            margin-bottom: 1.2rem; /* Space before question block */
            font-size: 2rem; /* Timer font size in fullscreen */
            width: 100%;
            text-align: center;
            color: #ef4444; /* Keep timer color */
        }

        #quiz-content.fullscreen-active .question-area {
            flex-grow: 1; /* Take available space */
            display: flex;
            flex-direction: column;
            justify-content: center; /* Vertically center content if space allows */
            align-items: center;
            width: 100%;
            max-width: 900px; /* Max width for the question content increased */
            margin: 0 auto; /* Center the question content horizontally */
        }

        #quiz-content.fullscreen-active .question-block {
            width: 100%; /* Ensure question block fills its parent */
            padding: 2rem; /* Increased padding for question block in fullscreen */
            box-sizing: border-box; /* Include padding in width */
            background-color: #e3f2fd;
            border-radius: 8px;
            border: 1px solid #90caf9;
            /* Keep the opening animation styles */
            opacity: 1;
            transform: scale(1);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
            margin-bottom: 1.5rem; /* Added margin to separate from feedback */
        }

        #quiz-content.fullscreen-active .button-group {
            margin-top: 2.5rem; /* Increased margin-top for buttons in fullscreen */
            width: 100%; /* Ensure buttons are centered in the fullscreen view */
            max-width: 900px; /* Max width for buttons in fullscreen */
        }
        .question-screen-instruction-message {
            text-align: center;
            font-size: 1.1rem; /* Adjusted for consistency */
            font-weight: 500;
            color: #555;
            margin-top: 1rem; /* Increased margin for better spacing */
        }

        .option-label.selected-animation {
            animation: pulse-selected 0.3s ease-out forwards;
        }

        .option-label.correct-animation {
            animation: pop-correct 0.4s ease-out forwards;
        }

        .option-label.incorrect-animation {
            animation: shake-incorrect 0.5s ease-out forwards;
        }

        @keyframes pulse-selected {
            0% { transform: scale(1); box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08); }
            50% { transform: scale(1.02); box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15); }
            100% { transform: scale(1); box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08); }
        }

        @keyframes pop-correct {
            0% { transform: scale(1); box-shadow: 0 4px 10px rgba(6, 95, 70, 0.2); }
            50% { transform: scale(1.05); box-shadow: 0 8px 20px rgba(6, 95, 70, 0.4); }
            100% { transform: scale(1); box-shadow: 0 4px 10px rgba(6, 95, 70, 0.2); }
        }

        @keyframes shake-incorrect {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }

        .feedback-message.animate-in {
            animation: fadeInUp 0.5s ease-out forwards;
        }

        @keyframes fadeInUp {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        .participant-name-input-group {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
            width: 100%;
            max-width: 400px;
        }

        .participant-name-input {
            padding: 0.8rem;
            border: 2px solid #cbd5e1;
            border-radius: 8px;
            font-size: 1.1rem;
            color: #333;
            transition: border-color 0.2s ease;
        }

        .participant-name-input:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }

        /* Participant Selection Modal Styles */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: #e6f0f5;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            width: 95%; /* Increased width */
            max-width: 1000px; /* Increased max-width for the modal */
            text-align: center;
            transform: translateY(-20px);
            transition: transform 0.3s ease;
            position: relative; /* Needed for absolute positioning of close button */
        }

        .modal-overlay.show .modal-content {
            transform: translateY(0);
        }

        .modal-content h3 {
            font-size: 2rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 1.5rem;
        }

        .modal-content select,
        .modal-content input[type="text"],
        .modal-content input[type="number"] { /* Added number input styling */
            width: 100%;
            padding: 0.8rem;
            margin-bottom: 1rem;
            border: 2px solid #cbd5e1;
            border-radius: 8px;
            font-size: 1.1rem;
            color: #333;
            background-color: #ffffff;
        }

        .modal-content .button-group {
            margin-top: 1.5rem;
            gap: 0.8rem;
        }
        .modal-content .action-button {
            padding: 0.8rem 1.5rem;
            font-size: 1.1rem;
        }

        /* New styles for team setup modal */
        #team-setup-modal .team-name-inputs {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
            margin-top: 1rem;
        }

        /* Close button for modals */
        .modal-close-button {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: #666;
            transition: color 0.2s ease;
            padding: 0.5rem;
            line-height: 1; /* Adjust line height to center 'X' */
        }

        .modal-close-button:hover {
            color: #333;
        }

        /* Styles for existing participants buttons */
        #existing-participants-buttons {
            display: grid; /* Changed to grid for better control */
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); /* Responsive columns */
            gap: 0.8rem;
            margin-bottom: 1.5rem;
            max-height: 300px; /* Increased height for more entries */
            overflow-y: auto;
            padding: 0.5rem;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            background-color: #f8fafc;
        }
        .participant-item-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.8rem;
            border: 1px solid #cbd5e1;
            border-radius: 8px;
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: all 0.2s ease;
            position: relative; /* For positioning the selected indicator */
        }
        .participant-item-wrapper.selected-participant {
            background-color: #e0f2fe; /* Light blue background for selected */
            border-color: #90caf9; /* Blue border for selected */
            box-shadow: 0 4px 10px rgba(59, 130, 246, 0.2);
        }
        .participant-item-wrapper.selected-participant::after {
            content: '✓'; /* Checkmark for selected */
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            color: #10b981; /* Green checkmark */
            font-size: 1.5rem;
            font-weight: bold;
        }

        .participant-name-display {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
            text-align: center;
            word-break: break-word; /* Allow long names to break */
            overflow-wrap: break-word; /* Ensure wrapping for long words */
        }
        .participant-edit-controls {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
            justify-content: center;
            width: 100%;
        }
        .participant-edit-controls .action-button {
            padding: 0.4rem 0.8rem;
            font-size: 0.9rem;
            min-width: unset; /* Override min-width from general action-button */
            flex-grow: 1;
        }
        .edit-participant-modal-input {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #cbd5e1;
            border-radius: 8px;
            font-size: 1.1rem;
            color: #333;
            background-color: #ffffff;
            margin-bottom: 1rem;
        }
        .edit-participant-modal-input:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }

        /* Specific styles for the main screen buttons to make text smaller and keep on one line */
        .main-action-button {
            font-size: 0.9rem; /* Smaller font size */
            padding: 0.6rem 1rem; /* Reduced padding */
            flex-shrink: 0; /* Prevent shrinking */
            white-space: nowrap; /* Keep text on a single line */
        }

        @media (max-width: 640px) {
            .main-action-button {
                font-size: 0.8rem; /* Even smaller on very small screens */
                padding: 0.5rem 0.8rem;
            }
        }
    </style>
    <script type="module">
        // Local Storage Keys
        const LOCAL_STORAGE_KEY_TEAMS = 'quizGameTeams';
        const LOCAL_STORAGE_KEY_CURRENT_UNIT = 'quizGameCurrentUnit';
        const LOCAL_STORAGE_KEY_GAME_MODE = 'quizGameMode';
        const LOCAL_STORAGE_KEY_ANSWERED_QUESTIONS = 'quizGameAnsweredQuestions';

        // Global Game State Variables
        window.teams = []; // Array to store objects like { id: 'uuid', name: 'Takım Adı', score: 0 }
        window.currentTeamId = null; // ID of the currently active team
        window.currentQuestionIndex = 0; // This will now be the index in the `shuffledQuestions` array
        window.answeredQuestions = {}; // Stores {questionId: {solvedByTeamId: teamId, userAnswer: string, timeTaken: number}}
        let timer = 30; // Timer set to 30 seconds
        let timerInterval;
        let shuffledQuestions = []; // This array holds the questions for the current unit, shuffled
        window.currentUnit = null;
        let initialTimerValue = 30; // Initial timer value set to 30 seconds
        window.gameMode = null; // 'individual' or 'team'
        window.selectedQuestionIdForModal = null; // New global variable to store the ID of the clicked question
        let selectedParticipantIdInModal = null; // To track selection in participant selection modal
        let participantIdToEdit = null; // To track which participant is being edited

        // Tone.js sound synthesizers
        let correctSynth;
        let incorrectSynth;
        let timerSynth;

        // Background themes mapping for each unit
        const backgroundThemes = {
            'unit1': 'url("https://placehold.co/1920x1080/81D4FA/000000?text=Melek+ve+Ahiret+%C4%B0nanc%C4%B1")',
            'unit2': 'url("https://placehold.co/1920x1080/FFCDD2/000000?text=Hac+ve+Kurban")',
            'unit3': 'url("https://placehold.co/1920x1080/B3E5FC/000000?text=Ahlaki+Davran%C4%B1%C5%9Flar")',
            'unit4': 'url("https://placehold.co/1920x1080/C8E6C9/000000?text=Allah%27%C4%B1n+Kulu+ve+El%C3%A7isi+Hz.+Muhammed+(s.a.v.))")',
            'unit5': 'url("https://placehold.co/1920x1080/FFF9C4/000000?text=%C4%B0slam+D%C3%BC%C5%9F%C3%BCncesinde+Yorumlar")',
            'general': 'url("https://placehold.co/1920x1080/E0F2F7/000000?text=Din+K%C3%BClt%C3%BCr%C3%BC+Bilgi+Yar%C4%B1%C5%9Fmas%C4%B1")'
        };

        /**
         * Sets the background image of the body based on the provided theme key.
         * @param {string} themeKey - The key corresponding to the background theme.
         */
        function setGameBackground(themeKey) {
            const imageUrl = backgroundThemes[themeKey] || backgroundThemes['general'];
            document.body.style.backgroundImage = imageUrl;
        }

        // Questions for each unit (Parsed from DOCX content)
        const unitQuestions = {};
        const unitTitles = {}; // To store unit titles for buttons

        // Function to parse the DOCX content
        function parseDocxContent(fullTextContent) {
            const parsedUnitQuestions = {};
            const parsedUnitTitles = {};

            // Regex to capture unit, question type, question number, question text, options, and answer
            const unitRegex = /(\d+\. ÜNİTE: [^\n]+) - (\d+) SORU\n([AB]\. [^\n]+ \((\d+) Soru\)\n([\s\S]*?))(?=\n\d+\. ÜNİTE:|\n7\. SINIF DİN KÜLTÜRÜ VE AHLAK BİLGİSİ - TÜM ÜNİTELER SORU VE CEVAPLARI|$)/g;
            const mcQuestionRegex = /(\d+)\. ([^\n]+)\nA\) ([^\n]+)\nB\) ([^\n]+)\nC\) ([^\n]+)\nD\) ([^\n]+)\nCevap: ([A-D])/g;
            const tfQuestionRegex = /(\d+)\. \(D\/Y\) ([^\n]+) \(([DY])\)/g;

            // Split the content by unit headers
            const unitBlocks = fullTextContent.split(/(\d+\. ÜNİTE: [^\n]+ - \d+ SORU)/).filter(Boolean);

            for (let i = 1; i < unitBlocks.length; i += 2) {
                const unitHeader = unitBlocks[i];
                const unitContent = unitBlocks[i + 1];

                const unitTitleMatch = unitHeader.match(/(\d+)\. ÜNİTE: ([^\n]+) - \d+ SORU/);
                if (!unitTitleMatch) continue;

                const unitNumber = unitTitleMatch[1];
                const unitName = unitTitleMatch[2].trim();
                const unitId = `unit${unitNumber}`;
                parsedUnitTitles[unitId] = unitName;
                parsedUnitQuestions[unitId] = [];

                // Parse multiple choice questions
                const mcSectionMatch = unitContent.match(/A\. TEST SORULARI \(\d+ Soru\)\n([\s\S]*?)(?=\nB\. DOĞRU-YANLIŞ SORULARI|$)/);
                if (mcSectionMatch) {
                    const mcQuestionsText = mcSectionMatch[1];
                    const mcQuestions = mcQuestionsText.split(/\n(?=\d+\.)/).filter(Boolean); // Split by new question number

                    mcQuestions.forEach(qBlock => {
                        const lines = qBlock.split('\n').filter(line => line.trim() !== '');
                        if (lines.length < 6) return; // Expect at least question, 4 options, and answer

                        const questionNumberMatch = lines[0].match(/^(\d+)\. (.*)/);
                        if (!questionNumberMatch) return;

                        const questionNumber = questionNumberMatch[1];
                        const questionText = questionNumberMatch[2].trim();

                        const options = [];
                        for (let j = 1; j <= 4; j++) {
                            const optionMatch = lines[j].match(/^[A-D]\) (.*)/);
                            if (optionMatch) {
                                options.push(optionMatch[1].trim());
                            }
                        }

                        const answerLine = lines[lines.length - 1];
                        const answerMatch = answerLine.match(/Cevap: ([A-D])/);
                        if (!answerMatch) return;

                        const correctAnswerLetter = answerMatch[1];
                        let answerText = '';
                        switch (correctAnswerLetter) {
                            case 'A': answerText = options[0]; break;
                            case 'B': answerText = options[1]; break;
                            case 'C': answerText = options[2]; break;
                            case 'D': answerText = options[3]; break;
                        }

                        parsedUnitQuestions[unitId].push({
                            id: `${unitId}_mc${questionNumber}`,
                            type: 'multipleChoice',
                            question: questionText,
                            options: options,
                            answer: answerText,
                            explanation: "",
                            theme: unitId,
                            relatedConcept: ""
                        });
                    });
                }

                // Parse true/false questions
                const tfSectionMatch = unitContent.match(/B\. DOĞRU-YANLIŞ SORULARI \(\d+ Soru\)\n([\s\S]*)/);
                if (tfSectionMatch) {
                    const tfQuestionsText = tfSectionMatch[1];
                    const tfQuestions = tfQuestionsText.split(/\n(?=\d+\. \(D\/Y\))/).filter(Boolean);

                    tfQuestions.forEach(qBlock => {
                        const tfMatch = qBlock.match(/(\d+)\. \(D\/Y\) ([^\n]+) \(([DY])\)/);
                        if (!tfMatch) return;

                        const questionNumber = tfMatch[1];
                        const questionText = tfMatch[2].trim();
                        const answerLetter = tfMatch[3];
                        const answerText = (answerLetter === 'D' ? 'Doğru' : 'Yanlış');

                        parsedUnitQuestions[unitId].push({
                            id: `${unitId}_tf${questionNumber}`,
                            type: 'trueFalse',
                            question: questionText,
                            options: ["Doğru", "Yanlış"],
                            answer: answerText,
                            explanation: "",
                            theme: unitId,
                            relatedConcept: ""
                        });
                    });
                }
            }
            return { parsedUnitQuestions, parsedUnitTitles };
        }

        /**
         * Ensures that the given array of questions contains exactly 100 questions.
         * If the array has fewer than 100 questions, it duplicates existing questions randomly
         * until the count reaches 100. If it has more, it truncates to 100.
         * @param {Array<Object>} questionsArray The array of questions for a unit.
         * @returns {Array<Object>} An array containing exactly 100 questions.
         */
        function ensureOneHundredQuestions(questionsArray) {
            let currentQuestions = [...questionsArray]; // Create a shallow copy to avoid modifying the original
            const targetCount = 100;

            if (currentQuestions.length >= targetCount) {
                return currentQuestions.slice(0, targetCount); // If already 100 or more, just take the first 100
            }

            // If less than 100, duplicate questions randomly until it reaches 100
            const originalLength = currentQuestions.length;
            if (originalLength === 0) { // Handle case where there are no questions to duplicate
                return [];
            }
            while (currentQuestions.length < targetCount) {
                const randomIndex = Math.floor(Math.random() * originalLength);
                const questionToDuplicate = currentQuestions[randomIndex];
                // Create a new object for the duplicated question to ensure unique IDs if needed later,
                // and to prevent unintended modifications if question objects are mutable.
                currentQuestions.push({ ...questionToDuplicate, id: `${questionToDuplicate.id}_copy_${currentQuestions.length}` });
            }
            return currentQuestions;
        }

        // DOM elements (declared globally but assigned in onload)
        let participantManagementScreen; // New main screen
        let leaderboardContainer; // Container for the leaderboard
        let newParticipantNameInputMain; // Input for new participant on main screen
        let addNewParticipantMainButton; // Button for adding new participant on main screen
        let showRegisteredUsersButton; // Button to show registered users modal
        let unitSelectionScreen; // New screen for unit selection
        let gameModeSelectionScreen; // Existing screen for game mode selection
        let gameModeMessage; // Message display for game mode selection
        let gamePanel; // Main game area (score, grid, quiz content)
        let scoreBoardContainer; // Main container for the score board
        let currentParticipantDisplay; // Display for current participant's name and score
        let quizContentContainer;
        let questionContainer;
        let feedbackDiv;
        let finalScoreContainer;
        let overallResultDiv;
        let resetGameButton;
        let questionCounterDisplay;
        let questionNavigationContainer;
        let timerDisplay;
        let gridInstructionMessage;
        let questionScreenInstructionMessage;
        let fullscreenOverlay;
        let returnToMainMenuGridButton; // Button to return to main menu from question grid
        let returnToQuestionGridButton; // Button to return to question grid from quiz content
        let finalParticipantScoresDisplay; // Container for final participant scores table
        let goToMainSiteButton; // Button to go to external main site from main menu
        let participantSelectionModal; // Modal for participant selection
        let existingParticipantsButtonsContainer; // Container for participant buttons in modal
        let selectExistingParticipantButton; // Button to select participant in modal
        let editSelectedParticipantButton; // New: Button to edit selected participant in modal
        let newParticipantNameInput; // Input in modal (removed from HTML, but keeping variable for reference)
        let nextTurnButton; // Button for next turn in team mode
        let teamSetupModal; // Modal for team setup
        let numTeamsInput; // Input for number of teams
        let teamNameInputsContainer; // Container for dynamic team name inputs
        let startOverButton; // New button for starting over
        let confirmResetModal; // New confirmation modal
        let confirmResetYesButton; // Yes button in confirmation modal
        let confirmResetNoButton; // No button in confirmation modal
        let editParticipantModal; // New edit participant modal
        let editParticipantNameInput; // Input field in edit participant modal
        let editParticipantScoreInput; // New input for score in edit modal
        let editParticipantErrorMessage; // Error message in edit participant modal
        let editParticipantScoreErrorMessage; // New error message for score in edit modal


        /**
         * Generates a unique ID (UUID v4).
         * @returns {string} A unique ID.
         */
        function generateUUID() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }

        /**
         * Loads teams from localStorage.
         */
        function loadTeams() {
            const storedTeams = localStorage.getItem(LOCAL_STORAGE_KEY_TEAMS);
            if (storedTeams) {
                window.teams = JSON.parse(storedTeams);
            } else {
                window.teams = []; // Initialize empty if nothing found
            }
        }

        /**
         * Saves teams to localStorage.
         */
        function saveTeams() {
            localStorage.setItem(LOCAL_STORAGE_KEY_TEAMS, JSON.stringify(window.teams));
        }

        /**
         * Loads game state (current unit, mode, answered questions) from localStorage.
         */
        function loadGameState() {
            window.currentUnit = localStorage.getItem(LOCAL_STORAGE_KEY_CURRENT_UNIT);
            window.gameMode = localStorage.getItem(LOCAL_STORAGE_KEY_GAME_MODE);
            const storedAnsweredQuestions = localStorage.getItem(LOCAL_STORAGE_KEY_ANSWERED_QUESTIONS);
            if (storedAnsweredQuestions) {
                window.answeredQuestions = JSON.parse(storedAnsweredQuestions);
            } else {
                window.answeredQuestions = {};
            }
        }

        /**
         * Saves game state to localStorage.
         */
        function saveGameState() {
            localStorage.setItem(LOCAL_STORAGE_KEY_CURRENT_UNIT, window.currentUnit);
            localStorage.setItem(LOCAL_STORAGE_KEY_GAME_MODE, window.gameMode);
            localStorage.setItem(LOCAL_STORAGE_KEY_ANSWERED_QUESTIONS, JSON.stringify(window.answeredQuestions));
        }

        /**
         * Renders the leaderboard on the participant management screen.
         */
        function renderLeaderboard() {
            leaderboardContainer.innerHTML = ''; // Clear previous content
            if (window.teams.length === 0) {
                leaderboardContainer.innerHTML = '<p class="text-gray-600 text-center">Henüz öğrenci yok.</p>'; // Changed text here
                return;
            }

            const leaderboardList = document.createElement('div');
            leaderboardList.classList.add('leaderboard-list');

            // Define a set of color classes for the leaderboard items
            const leaderboardItemColors = [
                'color-0', 'color-1', 'color-2', 'color-3', 'color-4',
                'color-5', 'color-6', 'color-7', 'color-8', 'color-9'
            ];

            // Sort participants by score in descending order
            const sortedParticipants = [...window.teams].sort((a, b) => b.score - a.score);

            sortedParticipants.forEach((p, index) => {
                const listItem = document.createElement('div');
                listItem.classList.add('leaderboard-item');
                // Assign a color class dynamically
                listItem.classList.add(leaderboardItemColors[index % leaderboardItemColors.length]);

                if (p.id === window.currentTeamId) {
                    listItem.classList.add('active-participant'); // Highlight active participant
                }
                listItem.innerHTML = `
                    <span class="leaderboard-rank">${index + 1}.</span>
                    <span class="leaderboard-name">${p.name}</span>
                    <span class="leaderboard-score">${p.score} Puan</span>
                `;
                leaderboardList.appendChild(listItem);
            });
            leaderboardContainer.appendChild(leaderboardList);
        }

        /**
         * Handles adding a new participant from the main screen and proceeds to unit selection.
         */
        window.addNewParticipantAndProceed = function() {
            const newName = newParticipantNameInputMain.value.trim();
            if (newName) {
                let participantToAdd = null;
                const existing = window.teams.find(p => p.name.toLowerCase() === newName.toLowerCase());
                if (existing) {
                    participantToAdd = existing;
                } else {
                    participantToAdd = { id: generateUUID(), name: newName, score: 0 };
                    window.teams.push(participantToAdd); // Add to teams array
                }
                
                window.currentTeamId = participantToAdd.id;
                saveTeams(); // Save updated teams
                newParticipantNameInputMain.value = ''; // Clear input

                participantManagementScreen.classList.add('hidden');
                unitSelectionScreen.classList.remove('hidden');
                setGameBackground('general'); // Reset background to general for unit selection
                updateParticipantDisplay(); // Update current participant display
            } else {
                console.warn("Lütfen yeni katılımcı adını girin.");
            }
        };

        /**
         * Shows the modal for selecting existing registered users.
         */
        window.showRegisteredUsersScreen = function() {
            existingParticipantsButtonsContainer.innerHTML = ''; // Clear previous buttons
            selectedParticipantIdInModal = null; // Reset selection

            // Disable the edit button initially
            editSelectedParticipantButton.disabled = true;
            selectExistingParticipantButton.disabled = true; // Also disable select button initially

            if (window.teams.length > 0) {
                window.teams.forEach((p, index) => {
                    const wrapper = document.createElement('div');
                    wrapper.classList.add('participant-item-wrapper');
                    wrapper.dataset.participantId = p.id;

                    const nameDisplay = document.createElement('span');
                    nameDisplay.classList.add('participant-name-display');
                    nameDisplay.textContent = p.name;
                    wrapper.appendChild(nameDisplay);

                    // Add click listener to the wrapper for selection
                    wrapper.onclick = () => {
                        // Remove 'selected-participant' from all wrappers
                        document.querySelectorAll('#existing-participants-buttons .participant-item-wrapper').forEach(item => {
                            item.classList.remove('selected-participant');
                        });
                        // Add 'selected-participant' to the clicked wrapper
                        wrapper.classList.add('selected-participant');
                        selectedParticipantIdInModal = p.id;
                        selectExistingParticipantButton.disabled = false; // Enable "Seç ve Başla" button
                        editSelectedParticipantButton.disabled = false; // Enable "Düzenle" button
                    };

                    // Highlight if already selected
                    if (window.currentTeamId === p.id) {
                        wrapper.classList.add('selected-participant');
                        selectedParticipantIdInModal = p.id; // Ensure it's set if already selected
                        selectExistingParticipantButton.disabled = false;
                        editSelectedParticipantButton.disabled = false; // Enable "Düzenle" if already selected
                    }

                    existingParticipantsButtonsContainer.appendChild(wrapper);
                });
            } else {
                existingParticipantsButtonsContainer.innerHTML = '<p class="text-gray-600 text-sm col-span-full">Henüz kayıtlı öğrenci yok.</p>'; // Changed text here
            }
            participantSelectionModal.classList.remove('hidden');
            participantSelectionModal.classList.add('show');
        };

        /**
         * Shows the modal for editing a participant's name and score.
         * @param {string} id - The ID of the participant to edit.
         */
        window.showEditParticipantModal = function(id) {
            participantIdToEdit = id;
            const participant = window.teams.find(p => p.id === id);
            if (participant) {
                editParticipantNameInput.value = participant.name;
                editParticipantScoreInput.value = participant.score; // Populate score
                editParticipantErrorMessage.textContent = ''; // Clear any previous error
                editParticipantErrorMessage.classList.add('hidden'); // Hide error message
                editParticipantScoreErrorMessage.textContent = ''; // Clear any previous error
                editParticipantScoreErrorMessage.classList.add('hidden'); // Hide error message
                editParticipantModal.classList.remove('hidden');
                editParticipantModal.classList.add('show');
            }
        };

        /**
         * Hides the modal for editing a participant's name and score.
         */
        window.hideEditParticipantModal = function() {
            editParticipantModal.classList.remove('show');
            setTimeout(() => {
                editParticipantModal.classList.add('hidden');
            }, 300);
            participantIdToEdit = null; // Clear the ID of the participant being edited
        };

        /**
         * Saves the edited participant name and score.
         */
        window.saveEditedParticipantName = function() {
            const newName = editParticipantNameInput.value.trim();
            const newScore = parseInt(editParticipantScoreInput.value); // Get score as integer

            let hasError = false;

            if (!newName) {
                editParticipantErrorMessage.textContent = 'İsim boş bırakılamaz.';
                editParticipantErrorMessage.classList.remove('hidden');
                hasError = true;
            } else {
                editParticipantErrorMessage.textContent = '';
                editParticipantErrorMessage.classList.add('hidden');
            }

            const existingParticipantWithSameName = window.teams.find(p => p.name.toLowerCase() === newName.toLowerCase() && p.id !== participantIdToEdit);
            if (existingParticipantWithSameName) {
                editParticipantErrorMessage.textContent = 'Bu isimde başka bir katılımcı zaten var.';
                editParticipantErrorMessage.classList.remove('hidden');
                hasError = true;
            }

            if (isNaN(newScore) || newScore < 0) { // Validate score
                editParticipantScoreErrorMessage.textContent = 'Puan geçerli bir sayı olmalı ve negatif olamaz.';
                editParticipantScoreErrorMessage.classList.remove('hidden');
                hasError = true;
            } else {
                editParticipantScoreErrorMessage.textContent = '';
                editParticipantScoreErrorMessage.classList.add('hidden');
            }

            if (hasError) {
                return;
            }

            const participantIndex = window.teams.findIndex(p => p.id === participantIdToEdit);
            if (participantIndex !== -1) {
                window.teams[participantIndex].name = newName;
                window.teams[participantIndex].score = newScore; // Update score
                saveTeams();
                renderLeaderboard(); // Re-render main leaderboard
                showRegisteredUsersScreen(); // Re-render the participant selection screen
                window.hideEditParticipantModal();
            } else {
                editParticipantErrorMessage.textContent = 'Katılımcı bulunamadı.'; // Fallback error
                editParticipantErrorMessage.classList.remove('hidden');
            }
        };

        /**
         * Cancels the editing of a participant's name and score.
         */
        window.cancelEditParticipantName = function() {
            window.hideEditParticipantModal();
        };

        /**
         * Handles selection of an existing participant from the modal.
         */
        window.selectExistingParticipant = function() {
            if (selectedParticipantIdInModal) {
                window.currentTeamId = selectedParticipantIdInModal;
                saveTeams(); // Save currentTeamId (part of teams state)
                window.hideParticipantSelectionModal(); // Call the global function
                participantManagementScreen.classList.add('hidden');
                unitSelectionScreen.classList.remove('hidden');
                setGameBackground('general');
                updateParticipantDisplay(); // Update current participant display
            } else {
                console.warn("Lütfen bir katılımcı seçin.");
            }
        };

        /**
         * Hides the participant selection modal.
         */
        window.hideParticipantSelectionModal = function() { // Made global
            participantSelectionModal.classList.remove('show');
            setTimeout(() => {
                participantSelectionModal.classList.add('hidden');
            }, 300);
        }

        /**
         * Handles unit selection, hides unit selection screen, and shows the game mode selection.
         * @param {string} unitId - The ID of the selected unit.
         */
        window.selectUnit = async function(unitId) {
            window.currentUnit = unitId;
            // Directly proceed to game panel, implicitly setting gameMode to 'individual'
            window.gameMode = 'individual'; 
            unitSelectionScreen.classList.add('hidden');
            gameModeSelectionScreen.classList.add('hidden'); // Ensure this is always hidden in this flow
            gamePanel.classList.remove('hidden'); // Show game panel
            setGameBackground(unitId);
            gameModeMessage.classList.add('hidden');
            saveGameState(); // Save selected unit and game mode
            startGame(); // Start the game directly
        };

        /**
         * Handles game mode selection (Individual or Team).
         * This function is now only called if explicitly navigated to, not from unit selection.
         * @param {string} mode - The selected game mode ('individual' or 'team').
         */
        window.selectGameMode = function(mode) {
            window.gameMode = mode;
            gameModeSelectionScreen.classList.add('hidden');
            saveGameState(); // Save game mode

            if (mode === 'individual') {
                gamePanel.classList.remove('hidden');
                startGame();
            } else if (mode === 'team') {
                if (window.teams.length < 2 || window.teams.some(t => t.id.startsWith('player'))) { 
                    window.teams = []; // Clear individual players for team setup
                    window.showTeamSetupModal(); // Call the global function
                } else {
                    gamePanel.classList.remove('hidden');
                    startGame();
                }
            }
        };

        /**
         * Shows the team setup modal.
         */
        window.showTeamSetupModal = function() { // Made global
            teamSetupModal.classList.remove('hidden');
            teamSetupModal.classList.add('show');
            numTeamsInput.value = ''; // Clear previous input
            teamNameInputsContainer.innerHTML = ''; // Clear dynamic inputs
        }

        /**
         * Hides the team setup modal.
         */
        window.hideTeamSetupModal = function() { // Made global
            teamSetupModal.classList.remove('show');
            setTimeout(() => {
                teamSetupModal.classList.add('hidden');
            }, 300);
        }

        /**
         * Generates team name input fields based on the number of teams entered.
         */
        window.generateTeamNameInputs = function() {
            const num = parseInt(numTeamsInput.value);
            teamNameInputsContainer.innerHTML = ''; // Clear existing inputs

            if (isNaN(num) || num < 2 || num > 10) { // Limit teams between 2 and 10
                teamNameInputsContainer.innerHTML = '<p class="text-red-500 text-sm">Lütfen 2 ile 10 arasında bir takım sayısı girin.</p>';
                return;
            }

            for (let i = 0; i < num; i++) {
                const input = document.createElement('input');
                input.type = 'text';
                input.id = `team-name-input-${i}`;
                input.classList.add('w-full', 'p-2', 'border', 'rounded', 'team-name-input');
                input.placeholder = `Takım ${i + 1} Adı`;
                input.value = `Takım ${i + 1}`; // Default name
                teamNameInputsContainer.appendChild(input);
            }
        };

        /**
         * Submits the team names and starts the game in team mode.
         */
        window.submitTeamSetup = function() {
            window.teams = []; // Clear existing participants for new team setup
            let allNamesValid = true;
            const teamNameInputs = teamNameInputsContainer.querySelectorAll('.team-name-input');

            if (teamNameInputs.length === 0) {
                console.warn("Lütfen önce takım sayısını girip isimleri oluşturun.");
                return;
            }

            teamNameInputs.forEach((input, index) => {
                const name = input.value.trim();
                if (!name) {
                    allNamesValid = false;
                    console.warn(`Takım ${index + 1} için bir isim girmeniz gerekiyor.`);
                    return;
                }
                window.teams.push({ id: `team${index + 1}`, name: name, score: 0 });
            });

            if (!allNamesValid) {
                console.warn("Tüm takım isimlerini girmeniz gerekiyor.");
                return;
            }

            saveTeams(); // Save newly created teams
            window.hideTeamSetupModal(); // Call the global function
            gamePanel.classList.remove('hidden'); // Show the main game panel
            startGame();
        };

        /**
         * Initializes the game state, shuffles questions, and displays the question grid.
         * @param {boolean} resuming - True if resuming a game, false for a new game.
         */
        window.startGame = function(resuming = false) {
            if (!resuming) {
                window.currentQuestionIndex = 0;
                window.answeredQuestions = {}; // Reset answered questions for new game
                if (window.gameMode === 'team') {
                    window.teams.forEach(team => team.score = 0); // Reset scores for new team game
                } 
                // IMPORTANT: For individual mode, we no longer reset the score here.
                // Scores will accumulate across sessions for individual players.
                
                window.currentTeamId = window.currentTeamId || (window.teams.length > 0 ? window.teams[0].id : null); // Ensure currentTeamId is set
                
                saveTeams(); // Save initial scores/state (if team mode, scores are reset; if individual, they persist)
                saveGameState(); // Save answered questions (empty for new game)
            }
            
            // Check if there are any questions for the selected unit
            if (!unitQuestions[window.currentUnit] || unitQuestions[window.currentUnit].length === 0) {
                alert("Bu ünitede henüz soru bulunmuyor. Lütfen başka bir ünite seçin veya sorular ekleyin.");
                window.returnToUnitSelection(); // Go back to unit selection
                return;
            }

            shuffledQuestions = shuffleArray(ensureOneHundredQuestions(unitQuestions[window.currentUnit]));
            
            quizContentContainer.classList.add('hidden');
            finalScoreContainer.classList.add('hidden');
            questionNavigationContainer.classList.remove('hidden');
            
            // Hide score board and current participant display on the game panel
            scoreBoardContainer.classList.add('hidden'); 
            currentParticipantDisplay.classList.add('hidden');
            
            updateParticipantDisplay(); // This will still update the hidden elements, which is fine.
            renderQuestionNumbers(); // Initial render of question numbers
            gridInstructionMessage.classList.remove('hidden');
            questionScreenInstructionMessage.classList.add('hidden');
            if (questionCounterDisplay) {
                questionCounterDisplay.classList.remove('hidden');
            }
            setGameBackground(window.currentUnit);
            nextTurnButton.classList.add('hidden'); // Hide next turn button initially
        };

        /**
         * Updates the participant/team display with current participant's/team's name and score.
         */
        function updateParticipantDisplay() {
            // Removed: if (scoreBoardContainer) scoreBoardContainer.classList.remove('hidden');
            // This element is now intentionally hidden on the game panel.

            if (scoreBoardContainer && currentParticipantDisplay) {
                scoreBoardContainer.innerHTML = ''; // Clear previous content
                const scoreTable = document.createElement('div');
                scoreTable.classList.add('score-table');

                // Sort participants/teams by score in descending order
                const sortedEntities = [...window.teams].sort((a, b) => b.score - a.score);

                sortedEntities.forEach((entity) => {
                    const scoreCell = document.createElement('div');
                    scoreCell.classList.add('score-cell');
                    if (window.currentTeamId === entity.id) {
                        scoreCell.classList.add('active-participant');
                    }
                    scoreCell.innerHTML = `
                        <div class="flex flex-col items-center">
                            <span class="participant-name text-lg font-bold flex items-center gap-1">
                                ${entity.name}
                            </span>
                        </div>
                        <div class="flex flex-col items-center mt-2">
                            <span class="text-sm opacity-80 mb-1">Puan</span>
                            <span class="participant-score text-3xl font-extrabold">${entity.score}</span>
                        </div>
                    `;
                    scoreTable.appendChild(scoreCell);
                });
                scoreBoardContainer.appendChild(scoreTable);

                const currentEntity = window.teams.find(p => p.id === window.currentTeamId);
                if (currentEntity) {
                    currentParticipantDisplay.textContent = `Sıra: ${currentEntity.name}`;
                } else {
                    currentParticipantDisplay.textContent = "Sıra: Katılımcı/Takım Seçin";
                }
            }
            if (gridInstructionMessage) {
                const currentEntity = window.teams.find(p => p.id === window.currentTeamId);
                if (currentEntity) {
                    gridInstructionMessage.textContent = `Sıra ${currentEntity.name}'da. Henüz cevaplanmamış bir soru seçin.`;
                } else {
                    gridInstructionMessage.textContent = `Bir soru seçerek başlayın.`;
                }
            }
        }

        /**
         * Renders the current question, its options, and sets up the timer.
         */
        function renderCurrentQuestion() {
            // Ensure quiz content container is visible and fullscreen overlay is active
            quizContentContainer.classList.remove('hidden');
            questionNavigationContainer.classList.add('hidden');
            fullscreenOverlay.classList.remove('hidden');
            setTimeout(() => fullscreenOverlay.classList.add('show'), 10);
            quizContentContainer.classList.add('fullscreen-active');
            hideFinalScore(); // Ensure final score is hidden when a question is opened
            gridInstructionMessage.classList.add('hidden'); // Hide grid instructions

            if (questionCounterDisplay) {
                questionCounterDisplay.classList.add('hidden');
            }

            feedbackDiv.classList.remove('show', 'correct', 'incorrect', 'animate-in');
            feedbackDiv.innerHTML = '';
            
            clearInterval(timerInterval);
            timerDisplay.classList.add('hidden');
            questionScreenInstructionMessage.classList.add('hidden');
            nextTurnButton.classList.add('hidden'); // Hide next turn button

            const q = shuffledQuestions[window.currentQuestionIndex];
            
            // If the question was previously answered correctly, hide the return to grid button
            // If it's a fresh attempt or previously incorrect, show it.
            if (window.answeredQuestions[q.id]) { // Only checks if correctly answered
                returnToQuestionGridButton.classList.remove('hidden'); // Always show return to grid for review
            } else {
                returnToQuestionGridButton.classList.remove('hidden');
            }

            // Check if all questions are correctly answered to show final score
            const allCorrectlyAnswered = shuffledQuestions.every(q => window.answeredQuestions[q.id]);
            if (allCorrectlyAnswered) {
                showFinalScore();
                return;
            }

            setGameBackground(q.theme || window.currentUnit);
            questionCounterDisplay.textContent = `Soru ${shuffledQuestions.indexOf(q) + 1} / ${shuffledQuestions.length}`;
            
            questionContainer.classList.add('question-block-closed');

            // Calculate points for the current question
            let questionPoints = 0;
            if (q.type === 'trueFalse') {
                questionPoints = 5;
            } else if (q.type === 'fillInTheBlanks' || q.type === 'multipleChoice') {
                questionPoints = 10;
            }

            let questionHtml = `<p class="question-points">${questionPoints} Puan</p>`; // Display points
            questionHtml += `<p class="question-text">${q.question}</p>`;
            let optionsHtml = '<div class="options-container">';
            let optionsToShuffle = [];

            if (q.type === 'trueFalse') {
                optionsToShuffle = ["Doğru", "Yanlış"];
            } else if (q.type === 'fillInTheBlanks' || q.type === 'multipleChoice') {
                // Ensure only 4 options are used
                optionsToShuffle = [...q.options.slice(0, 4)]; 
            }
            
            const shuffledOptions = shuffleArray(optionsToShuffle);
            // Use only the first 4 colors for options
            const optionColors = [
                'option-color-1', 'option-color-2', 'option-color-3', 'option-color-4' 
            ];

            shuffledOptions.forEach((option, optIndex) => {
                const colorClass = optionColors[optIndex % optionColors.length];
                optionsHtml += `
                    <label class="option-label ${colorClass}">
                        <input type="radio" name="${q.id}" value="${option}" onchange="checkCurrentAnswer()">
                        <span>${option}</span>
                    </label>
                `;
            });
            optionsHtml += '</div>';
            questionHtml += optionsHtml;
            
            questionContainer.innerHTML = questionHtml;
            
            setTimeout(() => {
                questionContainer.classList.remove('question-block-closed');
            }, 50);

            // Check if the question was previously answered (correctly)
            if (window.answeredQuestions[q.id]) {
                const currentAnswerState = window.answeredQuestions[q.id]; 
                
                const selectedRadio = document.querySelector(`input[name="${q.id}"][value="${currentAnswerState.userAnswer}"]`);
                if (selectedRadio) {
                    selectedRadio.checked = true;
                }
                document.querySelectorAll(`input[name="${q.id}"]`).forEach(radio => radio.disabled = true);

                // Always show correct feedback and explanation for solved questions
                displayFeedback(true, q.answer, q.explanation); // Pass original correct answer and explanation
                
                let correctOptionValue = q.answer;
                if (q.type === 'trueFalse') {
                    correctOptionValue = (q.answer === 'D' ? 'Doğru' : 'Yanlış');
                }
                const correctRadio = document.querySelector(`input[name="${q.id}"][value="${correctOptionValue}"]`);
                if (correctRadio) {
                    const correctLabel = correctRadio.closest('label');
                    if (correctLabel) {
                        correctLabel.classList.add('correct-option-highlight');
                    }
                }

                const answeredByTeam = window.teams.find(t => t.id === currentAnswerState.solvedByTeamId);
                const answeredByTeamName = answeredByTeam ? answeredByTeam.name : 'Bilinmeyen Takım';
                
                questionScreenInstructionMessage.textContent = `Bu soru ${answeredByTeamName} tarafından doğru cevaplandı. Soru ekranına dönmek için 'Soru Ekranına Dön' butonuna tıklayın.`;
                questionScreenInstructionMessage.classList.remove('hidden');
                nextTurnButton.classList.add('hidden'); // No next turn if already solved
            } else { // If the question is not in answeredQuestions, it's a fresh attempt (or previously incorrect)
                startTimer();
                const currentEntity = window.teams.find(p => p.id === window.currentTeamId);
                questionScreenInstructionMessage.textContent = `Sıra ${currentEntity ? currentEntity.name : 'sizde'}'de! Soruyu cevaplamak için süreniz var.`;
                questionScreenInstructionMessage.classList.remove('hidden');
            }

            updateParticipantDisplay();
            renderQuestionNumbers();
        }

        /**
         * Starts the countdown timer for the current question.
         */
        function startTimer() {
            timer = initialTimerValue;
            timerDisplay.classList.remove('hidden');
            timerDisplay.classList.remove('warning', 'critical');
            timerDisplay.textContent = `Kalan Süre: ${timer} saniye`;

            timerInterval = setInterval(() => {
                timer--;
                timerDisplay.textContent = `Kalan Süre: ${timer} saniye`;

                if (timer <= 10 && timer > 5) {
                    timerDisplay.classList.add('warning');
                    timerDisplay.classList.remove('critical');
                    Tone.start(); // Ensure audio context is started
                    timerSynth.triggerAttackRelease("A4", "16n"); // Play warning sound
                } else if (timer <= 5) {
                    timerDisplay.classList.add('critical');
                    timerDisplay.classList.remove('warning');
                    Tone.start(); // Ensure audio context is started
                    timerSynth.triggerAttackRelease("A4", "16n"); // Play critical warning sound
                } else {
                    timerDisplay.classList.remove('warning', 'critical');
                }

                if (timer <= 0) {
                    handleTimeout();
                }
            }, 1000);
        }

        /**
         * Handles the case when the timer runs out.
         */
        async function handleTimeout() {
            clearInterval(timerInterval);
            timerDisplay.classList.add('hidden');
            Tone.start(); // Ensure audio context is started
            incorrectSynth.triggerAttackRelease("C3", "8n"); // Play incorrect sound

            const q = shuffledQuestions[window.currentQuestionIndex];
            
            document.querySelectorAll(`input[name="${q.id}"]`).forEach(radio => radio.disabled = true);

            // Only show "Süre Doldu." feedback, no correct answer or explanation
            displayFeedback(false, null, null); 

            // After timeout, always return to main menu
            window.returnToMainMenu(); // Changed to return to main menu
        }

        /**
         * Checks the user's selected answer against the correct answer.
         */
        window.checkCurrentAnswer = async function() {
            clearInterval(timerInterval);
            timerDisplay.classList.add('hidden');

            const q = shuffledQuestions[window.currentQuestionIndex];
            let userAnswer;
            let isCorrect = false;
            let timeTaken = initialTimerValue - timer;

            const selected = document.querySelector(`input[name="${q.id}"]:checked`);
            userAnswer = selected ? selected.value : '';
            
            let actualAnswer = q.answer;
            if (q.type === 'trueFalse') {
                actualAnswer = (q.answer === 'D' ? 'Doğru' : 'Yanlış');
            }

            isCorrect = (userAnswer === actualAnswer);

            if (selected) {
                selected.closest('label').classList.add('selected-animation');
            }

            const currentEntity = window.teams.find(p => p.id === window.currentTeamId);

            if (isCorrect) {
                if (currentEntity) { 
                    let pointsToAdd = 0;
                    if (q.type === 'trueFalse') {
                        pointsToAdd = 5;
                    } else if (q.type === 'fillInTheBlanks' || q.type === 'multipleChoice') {
                        pointsToAdd = 10;
                    }
                    
                    currentEntity.score += pointsToAdd; // Update score for the team/participant
                    // Bonus points for answering quickly (within first 10 seconds)
                    if (timeTaken <= 10) {
                        currentEntity.score += 5; // Bonus 5 puan
                    }
                }
                Tone.start(); // Ensure audio context is started
                correctSynth.triggerAttackRelease("C5", "8n"); // Play correct sound

                // Highlight correct option ONLY IF answered correctly
                let correctOptionValue = q.answer;
                if (q.type === 'trueFalse') {
                    correctOptionValue = (q.answer === 'D' ? 'Doğru' : 'Yanlış');
                }
                const correctRadio = document.querySelector(`input[name="${q.id}"][value="${correctOptionValue}"]`);
                if (correctRadio) {
                    const correctLabel = correctRadio.closest('label');
                    if (correctLabel) {
                        correctLabel.classList.add('correct-option-highlight');
                        correctLabel.classList.add('correct-animation');
                    }
                }
                // Store as correctly answered
                window.answeredQuestions[q.id] = { solvedByTeamId: window.currentTeamId, userAnswer: userAnswer, timeTaken: timeTaken };

            } else { // If incorrect
                Tone.start(); // Ensure audio context is started
                incorrectSynth.triggerAttackRelease("C3", "8n"); // Play incorrect sound

                const selectedLabel = selected.closest('label');
                if (selectedLabel) {
                    selectedLabel.classList.add('incorrect-selected-option');
                    selectedLabel.classList.add('incorrect-animation');
                }
                // Do NOT highlight correct answer if incorrect (for both modes now)
                // Do NOT store incorrect answers in window.answeredQuestions
            }

            // Display feedback (with or without explanation based on game mode and correctness)
            if (isCorrect) {
                displayFeedback(true, q.answer, q.explanation); // Always show correct answer and explanation for correct answers
            } else {
                displayFeedback(false, null, null); // Only show "Yanlış" feedback for incorrect answers
            }
            
            document.querySelectorAll(`input[name="${q.id}"]`).forEach(radio => radio.disabled = true);

            updateParticipantDisplay();
            renderQuestionNumbers();
            saveTeams(); // Save updated scores
            saveGameState(); // Save answered questions
            
            // Always return to main menu after answering
            window.returnToMainMenu(); // Changed to return to main menu
        }

        /**
         * Displays feedback (correct/incorrect) to the user.
         * @param {boolean} isCorrect - True if the answer was correct, false otherwise.
         * @param {string} correctAnswer - The correct answer string (optional, for individual mode).
         * @param {string} explanation - The explanation for the answer (optional, for individual mode).
         */
        function displayFeedback(isCorrect, correctAnswer, explanation) {
            feedbackDiv.classList.add('show'); 
            feedbackDiv.classList.remove('animate-in', 'correct', 'incorrect'); 

            if (isCorrect) {
                feedbackDiv.classList.add('correct');
                let icon = '✅';
                feedbackDiv.innerHTML = `<span class="feedback-icon">${icon}</span> Doğru!`;
                // Always show explanation for correct answers, regardless of game mode
                if (explanation) { 
                    feedbackDiv.innerHTML += `<p class="explanation-text">${explanation}</p>`;
                }
            } else {
                feedbackDiv.classList.add('incorrect');
                let icon = '❌';
                feedbackDiv.innerHTML = `<span class="feedback-icon">${icon}</span> Yanlış.`;
                // Do NOT show correct answer or explanation for incorrect answers
            }
            feedbackDiv.classList.add('animate-in');
        }

        /**
         * Renders the question navigation grid.
         */
        function renderQuestionNumbers() {
            questionNavigationContainer.innerHTML = '';
            
            const questionsForDisplay = [...shuffledQuestions]; 

            questionsForDisplay.forEach((q, displayIndex) => { 
                const navItem = document.createElement('span');
                navItem.classList.add('question-nav-item');
                navItem.textContent = displayIndex + 1; 
                
                navItem.dataset.questionId = q.id; 

                // Check if the question is correctly answered
                if (window.answeredQuestions[q.id]) {
                    navItem.classList.add('answered-correctly');
                    navItem.onclick = () => {
                        window.selectQuestionById(q.id); // Allow reviewing correctly answered questions
                    };
                } else {
                    // Unanswered or incorrectly answered questions are clickable
                    navItem.onclick = () => {
                        window.selectQuestionById(q.id);
                    };
                }

                // If the question is currently displayed in quiz-content, mark it active
                if (q.id === shuffledQuestions[window.currentQuestionIndex]?.id && !quizContentContainer.classList.contains('hidden')) {
                    navItem.classList.add('active-question');
                } else {
                    navItem.classList.remove('active-question');
                }
                
                questionNavigationContainer.appendChild(navItem);
            });
        }

        /**
         * Selects a question by its ID and renders it.
         * @param {string} questionId - The ID of the question to select.
         */
        window.selectQuestionById = function(questionId) {
            const originalIndex = shuffledQuestions.findIndex(q => q.id === questionId);
            if (originalIndex !== -1) {
                const selectedQuestion = shuffledQuestions[originalIndex];
                window.currentQuestionIndex = originalIndex; // Set current question index immediately

                // In this new flow, we always assume a participant is selected before reaching unit selection
                // So, we can directly render the question.
                renderCurrentQuestion();
            } else {
                console.error("Question with ID not found:", questionId);
            }
        };

        /**
         * Returns to the participant management screen (leaderboard) from the quiz content or question grid.
         * This function replaces the old returnToQuestionsGrid.
         */
        window.returnToQuestionsGrid = function() {
            // This function is now effectively deprecated if the user always wants to go to the main menu.
            // However, keeping it here for now if there are other internal calls.
            // The primary return to main menu logic is in window.returnToMainMenu()
            quizContentContainer.classList.add('hidden');
            questionNavigationContainer.classList.remove('hidden'); // Show question navigation
            gamePanel.classList.remove('hidden'); // Keep game panel visible
            if (questionCounterDisplay) {
                questionCounterDisplay.classList.remove('hidden');
            }
            hideFinalScore();
            clearInterval(timerInterval);
            timerDisplay.classList.add('hidden');
            
            // Do not go back to participant management screen here
            // participantManagementScreen.classList.remove('hidden');
            renderLeaderboard(); // Update leaderboard
            updateParticipantDisplay(); // Update current participant display on leaderboard screen
            gridInstructionMessage.classList.remove('hidden'); // Show grid instructions again
            questionScreenInstructionMessage.classList.add('hidden');
            returnToQuestionGridButton.classList.remove('hidden'); // Keep this button visible
            nextTurnButton.classList.add('hidden'); // Hide next turn button

            setGameBackground(window.currentUnit); // Keep current unit background

            fullscreenOverlay.classList.remove('show');
            setTimeout(() => fullscreenOverlay.classList.add('hidden'), 300);
            quizContentContainer.classList.remove('fullscreen-active');
        }

        /**
         * Moves to the next team's turn in team mode.
         * This function is now largely unused in the new individual-focused flow.
         */
        window.moveToNextTurn = function() {
            if (window.gameMode === 'team') {
                const currentTeamIndex = window.teams.findIndex(t => t.id === window.currentTeamId);
                const nextTeamIndex = (currentTeamIndex + 1) % window.teams.length;
                window.currentTeamId = window.teams[nextTeamIndex].id;
                // After moving to next turn, return to main menu
                window.returnToMainMenu(); // Changed to return to main menu
            } else {
                // In individual mode, this button is hidden, but if somehow clicked, go to main menu
                window.returnToMainMenu(); // Changed to return to main menu
            }
        };

        /**
         * Displays the final score screen.
         */
        function showFinalScore() {
            quizContentContainer.classList.add('hidden');
            questionNavigationContainer.classList.add('hidden');
            clearInterval(timerInterval);
            timerDisplay.classList.add('hidden');
            returnToQuestionGridButton.classList.add('hidden');
            nextTurnButton.classList.add('hidden'); // Hide next turn button on final score

            finalScoreContainer.classList.remove('hidden');
            resetGameButton.classList.remove('hidden');
            gridInstructionMessage.classList.add('hidden');
            questionScreenInstructionMessage.classList.add('hidden');
            setGameBackground(window.currentUnit);

            fullscreenOverlay.classList.remove('show');
            setTimeout(() => fullscreenOverlay.classList.add('hidden'), 300);
            quizContentContainer.classList.remove('fullscreen-active');

            let maxScore = 0;
            if (window.teams.length > 0) {
                maxScore = Math.max(...window.teams.map(p => p.score));
            }

            let winners = [];
            if (window.teams.length > 0) {
                winners = window.teams.filter(p => p.score === maxScore);
            }

            let winnerMessage = '';
            if (winners.length === 1) {
                winnerMessage = `${winners[0].name} kazandı! 🎉`;
                overallResultDiv.classList.add('correct');
                overallResultDiv.classList.remove('incorrect');
            } else if (winners.length > 1) {
                winnerMessage = `${winners.map(p => p.name).join(' ve ')} berabere kaldı! 🤝`;
                overallResultDiv.classList.remove('correct', 'incorrect');
            } else {
                winnerMessage = `Henüz kimse puan alamadı.`; // Should not happen if game is played
                overallResultDiv.classList.remove('correct', 'incorrect');
            }

            // Render final participant/team scores in the new table format
            finalParticipantScoresDisplay.innerHTML = ''; // Clear previous content
            const finalScoreTable = document.createElement('div');
            finalScoreTable.classList.add('score-table');

            // Sort participants/teams by score for final display
            const sortedEntities = [...window.teams].sort((a, b) => b.score - a.score);

            sortedEntities.forEach((entity) => {
                const scoreCell = document.createElement('div');
                scoreCell.classList.add('score-cell');
                scoreCell.innerHTML = `
                    <div class="flex flex-col items-center">
                        <span class="participant-name text-lg font-bold flex items-center gap-1">
                            ${entity.name}
                        </span>
                    </div>
                    <div class="flex flex-col items-center mt-2">
                        <span class="text-sm opacity-80 mb-1">Puan</span>
                        <span class="participant-score text-3xl font-extrabold">${entity.score}</span>
                    </div>
                `;
                finalScoreTable.appendChild(scoreCell);
            });
            finalParticipantScoresDisplay.appendChild(finalScoreTable);


            overallResultDiv.innerHTML = `<p class="mt-4 text-xl font-bold">${winnerMessage}</p>`;
            overallResultDiv.classList.add('show');
        }

        /**
         * Hides the final score screen.
         */
        function hideFinalScore() {
            finalScoreContainer.classList.add('hidden');
            resetGameButton.classList.add('hidden');
        }

        /**
         * Shuffles an array randomly.
         * @param {Array} array - The array to shuffle.
         * @returns {Array} The shuffled array.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        /**
         * Shows the confirmation modal for resetting the game.
         */
        window.showResetConfirmation = function() {
            confirmResetModal.classList.remove('hidden');
            confirmResetModal.classList.add('show');
        };

        /**
         * Hides the confirmation modal for resetting the game.
         */
        window.hideResetConfirmation = function() {
            confirmResetModal.classList.remove('show');
            setTimeout(() => {
                confirmResetModal.classList.add('hidden');
            }, 300);
        };

        /**
         * Resets the game to its initial state (participant management screen) and clears all data.
         * This function is now called by the confirmation modal's "Yes" button.
         */
        window.confirmResetGame = function() {
            window.teams = []; // Clear all teams/participants for a full reset
            window.currentTeamId = null;
            window.currentQuestionIndex = 0;
            window.answeredQuestions = {};
            clearInterval(timerInterval);
            timerDisplay.classList.add('hidden');
            shuffledQuestions = [];
            window.currentUnit = null;
            window.gameMode = null; // Reset game mode
            window.selectedQuestionIdForModal = null; // Reset this too

            localStorage.removeItem(LOCAL_STORAGE_KEY_TEAMS);
            localStorage.removeItem(LOCAL_STORAGE_KEY_CURRENT_UNIT);
            localStorage.removeItem(LOCAL_STORAGE_KEY_GAME_MODE);
            localStorage.removeItem(LOCAL_STORAGE_KEY_ANSWERED_QUESTIONS);

            quizContentContainer.classList.add('hidden');
            hideFinalScore();
            questionNavigationContainer.classList.add('hidden');
            gamePanel.classList.add('hidden');
            unitSelectionScreen.classList.add('hidden'); // Ensure unit selection is hidden
            gameModeSelectionScreen.classList.add('hidden'); // Ensure game mode selection is hidden
            participantManagementScreen.classList.remove('hidden'); // Show participant management
            gridInstructionMessage.classList.add('hidden');
            questionScreenInstructionMessage.classList.add('hidden');
            returnToQuestionGridButton.classList.add('hidden');
            nextTurnButton.classList.add('hidden'); // Hide next turn button
            if (questionCounterDisplay) {
                questionCounterDisplay.classList.add('hidden');
            }
            setGameBackground('general');

            fullscreenOverlay.classList.remove('show');
            setTimeout(() => fullscreenOverlay.classList.add('hidden'), 300);
            quizContentContainer.classList.remove('fullscreen-active');

            if (currentParticipantDisplay) {
                currentParticipantDisplay.textContent = "Sıra: Katılımcı/Takım Seçin"; 
                currentParticipantDisplay.classList.remove('text-gray-600', 'font-normal');
                currentParticipantDisplay.classList.add('current-participant-display');
            }
            renderLeaderboard(); // Re-render empty leaderboard
            applyButtonColors();
            window.hideResetConfirmation(); // Hide the confirmation modal after reset
        }

        /**
         * Returns to the participant management screen.
         */
        window.returnToMainMenu = function() {
            // This function now acts as 'return to participant management'
            // It resets the *current game session* state but keeps participant data.
            window.currentQuestionIndex = 0; // Reset current question index
            window.answeredQuestions = {}; // Clear answered questions for this session
            clearInterval(timerInterval);
            timerDisplay.classList.add('hidden');
            shuffledQuestions = [];
            window.currentUnit = null; // Clear current unit
            window.gameMode = null; // Clear game mode
            window.selectedQuestionIdForModal = null;

            // Don't clear localStorage here, only resetGame() does that
            localStorage.removeItem(LOCAL_STORAGE_KEY_CURRENT_UNIT);
            localStorage.removeItem(LOCAL_STORAGE_KEY_GAME_MODE);
            localStorage.removeItem(LOCAL_STORAGE_KEY_ANSWERED_QUESTIONS);

            quizContentContainer.classList.add('hidden');
            hideFinalScore();
            questionNavigationContainer.classList.add('hidden');
            gamePanel.classList.add('hidden');
            unitSelectionScreen.classList.add('hidden');
            gameModeSelectionScreen.classList.add('hidden');
            participantManagementScreen.classList.remove('hidden'); // Show participant management
            gridInstructionMessage.classList.add('hidden');
            questionScreenInstructionMessage.classList.add('hidden');
            returnToQuestionGridButton.classList.add('hidden');
            nextTurnButton.classList.add('hidden');
            if (questionCounterDisplay) {
                questionCounterDisplay.classList.add('hidden');
            }
            setGameBackground('general');

            fullscreenOverlay.classList.remove('show');
            setTimeout(() => fullscreenOverlay.classList.add('hidden'), 300);
            quizContentContainer.classList.remove('fullscreen-active');

            if (currentParticipantDisplay) {
                currentParticipantDisplay.textContent = "Sıra: Katılımcı/Takım Seçin"; 
                currentParticipantDisplay.classList.remove('text-gray-600', 'font-normal');
                currentParticipantDisplay.classList.add('current-participant-display');
            }
            // Removed: if (scoreBoardContainer) { scoreBoardContainer.classList.remove('hidden'); }
            renderLeaderboard(); // Re-render leaderboard with current scores
            applyButtonColors();
        }

        /**
         * Returns to the unit selection screen from game mode selection.
         * This function is now only called if explicitly navigated to, not from unit selection in the main flow.
         */
        window.returnToUnitSelection = function() { // Made global
            gameModeSelectionScreen.classList.add('hidden');
            unitSelectionScreen.classList.remove('hidden');
            gameModeMessage.classList.add('hidden');
            setGameBackground('general');
            window.hideParticipantSelectionModal(); // Call the global function
            window.hideTeamSetupModal(); // Call the global function
        };

        /**
         * Returns to the participant management screen from unit selection.
         */
        window.returnToParticipantManagement = function() {
            unitSelectionScreen.classList.add('hidden');
            participantManagementScreen.classList.remove('hidden');
            setGameBackground('general');
            renderLeaderboard(); // Re-render leaderboard
        };

        /**
         * Applies specific Tailwind CSS classes for button colors and shadows.
         */
        function applyButtonColors() {
            const removeAllButtonColors = (element) => {
                const allColors = [
                    'bg-blue-600', 'hover:bg-blue-700', 'shadow-blue-500/50',
                    'bg-green-600', 'hover:bg-green-700', 'shadow-green-500/50',
                    'bg-purple-600', 'hover:bg-purple-700', 'shadow-purple-500/50',
                    'bg-yellow-600', 'hover:bg-yellow-700', 'shadow-yellow-500/50',
                    'bg-pink-600', 'hover:bg-pink-700', 'shadow-pink-500/50',
                    'bg-indigo-600', 'hover:bg-indigo-700', 'shadow-indigo-500/50',
                    'bg-red-600', 'hover:bg-red-700', 'shadow-red-500/50',
                    'bg-teal-600', 'hover:bg-teal-700', 'shadow-teal-500/50',
                    'bg-gray-600', 'hover:bg-gray-700', 'shadow-gray-500/50',
                    'bg-orange-600', 'hover:bg-orange-700', 'shadow-orange-500/50'
                ];
                element.classList.remove(...allColors);
            };

            const buttonColorSets = [
                ['bg-blue-600', 'hover:bg-blue-700', 'shadow-blue-500/50'],
                ['bg-green-600', 'hover:bg-green-700', 'shadow-green-500/50'],
                ['bg-purple-600', 'hover:bg-purple-700', 'shadow-purple-500/50'],
                ['bg-yellow-600', 'hover:bg-yellow-700', 'shadow-yellow-500/50'],
                ['bg-pink-600', 'hover:bg-pink-700', 'shadow-pink-500/50'],
                ['bg-indigo-600', 'hover:bg-indigo-700', 'shadow-indigo-500/50'],
                ['bg-red-600', 'hover:bg-red-700', 'shadow-red-500/50'],
                ['bg-teal-600', 'hover:bg-teal-700', 'shadow-teal-500/50']
            ];

            const unitButtons = document.querySelectorAll('#unit-selection-screen .action-button'); 
            unitButtons.forEach((button, index) => {
                removeAllButtonColors(button);
                button.classList.add(...buttonColorSets[index % buttonColorSets.length]);
            });

            // Participant Management Screen buttons
            if (addNewParticipantMainButton) {
                removeAllButtonColors(addNewParticipantMainButton);
                addNewParticipantMainButton.classList.add('bg-green-600', 'hover:bg-green-700', 'shadow-green-500/50', 'main-action-button'); /* Added main-action-button */
            }
            if (showRegisteredUsersButton) {
                removeAllButtonColors(showRegisteredUsersButton);
                showRegisteredUsersButton.classList.add('bg-blue-600', 'hover:bg-blue-700', 'shadow-blue-500/50', 'main-action-button'); /* Added main-action-button */
            }
            if (goToMainSiteButton) {
                removeAllButtonColors(goToMainSiteButton);
                goToMainSiteButton.classList.add('bg-gray-600', 'hover:bg-gray-700', 'shadow-gray-500/50');
            }
            // New "Baştan Başla" button
            if (startOverButton) {
                removeAllButtonColors(startOverButton);
                startOverButton.classList.add('bg-red-600', 'hover:bg-red-700', 'shadow-red-500/50');
            }

            // Game mode selection buttons
            const individualModeButton = document.getElementById('individual-mode-button');
            if (individualModeButton) {
                removeAllButtonColors(individualModeButton);
                individualModeButton.classList.add('bg-blue-600', 'hover:bg-blue-700', 'shadow-blue-500/50');
            }
            const teamModeButton = document.getElementById('team-mode-button');
            if (teamModeButton) {
                removeAllButtonColors(teamModeButton);
                teamModeButton.classList.add('bg-purple-600', 'hover:bg-purple-700', 'shadow-purple-500/50');
            }
            const returnToUnitSelectionButton = document.getElementById('return-to-unit-selection-button');
            if (returnToUnitSelectionButton) {
                removeAllButtonColors(returnToUnitSelectionButton);
                returnToUnitSelectionButton.classList.add('bg-gray-600', 'hover:bg-gray-700', 'shadow-gray-500/50');
            }

            // Game panel buttons
            // The returnToQuestionGridButton is now effectively removed from the flow, but its styling is kept if it were to be used elsewhere.
            if (returnToQuestionGridButton) {
                removeAllButtonColors(returnToQuestionGridButton);
                returnToQuestionGridButton.classList.add('bg-green-600', 'hover:bg-green-700', 'shadow-green-500/50');
            }
            if (returnToMainMenuGridButton) {
                removeAllButtonColors(returnToMainMenuGridButton);
                returnToMainMenuGridButton.classList.add('bg-purple-600', 'hover:bg-purple-700', 'shadow-purple-500/50');
            }
            if (resetGameButton) {
                removeAllButtonColors(resetGameButton);
                resetGameButton.classList.add('bg-red-600', 'hover:bg-red-700', 'shadow-red-500/50');
            }
            if (document.getElementById('return-to-main-menu-from-final-button')) {
                const finalReturnButton = document.getElementById('return-to-main-menu-from-final-button');
                removeAllButtonColors(finalReturnButton);
                finalReturnButton.classList.add('bg-orange-600', 'hover:bg-orange-700', 'shadow-orange-500/50');
            }
            const goToMainSiteButtons = document.querySelectorAll('[id^="go-to-main-site-button-"]');
            goToMainSiteButtons.forEach(button => {
                removeAllButtonColors(button);
                button.classList.add('bg-gray-600', 'hover:bg-gray-700', 'shadow-gray-500/50');
            });

            // Modal buttons
            if (nextTurnButton) {
                removeAllButtonColors(nextTurnButton);
                nextTurnButton.classList.add('bg-yellow-600', 'hover:bg-yellow-700', 'shadow-yellow-500/50');
            }
            const generateTeamNamesButton = document.getElementById('generate-team-names-button');
            if (generateTeamNamesButton) {
                removeAllButtonColors(generateTeamNamesButton);
                generateTeamNamesButton.classList.add('bg-blue-600', 'hover:bg-blue-700', 'shadow-blue-500/50');
            }
            const submitTeamSetupButton = document.getElementById('submit-team-setup-button');
            if (submitTeamSetupButton) {
                removeAllButtonColors(submitTeamSetupButton);
                submitTeamSetupButton.classList.add('bg-green-600', 'hover:bg-green-700', 'shadow-green-500/50');
            }
            const cancelTeamSetupButton = document.getElementById('cancel-team-setup-button');
            if (cancelTeamSetupButton) {
                removeAllButtonColors(cancelTeamSetupButton);
                cancelTeamSetupButton.classList.add('bg-gray-600', 'hover:bg-gray-700', 'shadow-gray-500/50');
            }
            const selectExistingParticipantButtonElement = document.getElementById('select-existing-participant-button');
            if (selectExistingParticipantButtonElement) {
                removeAllButtonColors(selectExistingParticipantButtonElement);
                selectExistingParticipantButtonElement.classList.add('bg-blue-600', 'hover:bg-blue-700', 'shadow-blue-500/50');
            }
            // New edit button in participant selection modal
            if (editSelectedParticipantButton) {
                removeAllButtonColors(editSelectedParticipantButton);
                editSelectedParticipantButton.classList.add('bg-yellow-500', 'hover:bg-yellow-600', 'shadow-yellow-500/50');
            }
            // Color for "İptal Et" button in participant selection modal
            const cancelParticipantSelectionButton = document.getElementById('cancel-participant-selection-button');
            if (cancelParticipantSelectionButton) {
                removeAllButtonColors(cancelParticipantSelectionButton);
                cancelParticipantSelectionButton.classList.add('bg-gray-600', 'hover:bg-gray-700', 'shadow-gray-500/50');
            }

            const returnToParticipantManagementFromUnitButton = document.getElementById('return-to-participant-management-from-unit');
            if (returnToParticipantManagementFromUnitButton) {
                removeAllButtonColors(returnToParticipantManagementFromUnitButton);
                returnToParticipantManagementFromUnitButton.classList.add('bg-gray-600', 'hover:bg-gray-700', 'shadow-gray-500/50');
            }

            // Confirmation modal buttons
            if (confirmResetYesButton) {
                removeAllButtonColors(confirmResetYesButton);
                confirmResetYesButton.classList.add('bg-red-600', 'hover:bg-red-700', 'shadow-red-500/50');
            }
            if (confirmResetNoButton) {
                removeAllButtonColors(confirmResetNoButton);
                confirmResetNoButton.classList.add('bg-gray-600', 'hover:bg-gray-700', 'shadow-gray-500/50');
            }
            
            // Edit participant modal buttons
            const saveEditParticipantButton = document.getElementById('save-edit-participant-button');
            if (saveEditParticipantButton) {
                removeAllButtonColors(saveEditParticipantButton);
                saveEditParticipantButton.classList.add('bg-green-600', 'hover:bg-green-700', 'shadow-green-500/50');
            }
            const cancelEditParticipantButton = document.getElementById('cancel-edit-participant-button');
            if (cancelEditParticipantButton) {
                removeAllButtonColors(cancelEditParticipantButton);
                cancelEditParticipantButton.classList.add('bg-gray-600', 'hover:bg-gray-700', 'shadow-gray-500/50');
            }
        }

        // Hardcoded DOCX content for demonstration due to fetch limitations in sandbox
        const hardcodedDocxContent = `
7. SINIF DİN KÜLTÜRÜ VE AHLAK BİLGİSİ - TÜM ÜNİTELER SORU VE CEVAPLARI
1. ÜNİTE: MELEK VE AHİRET İNANCI - 100 SORU
A. TEST SORULARI (50 Soru)
1. Aşağıdakilerden hangisi beş duyu organıyla algılanamayan varlıklardan biri değildir?
A) Melek
B) Cin
C) Şeytan
D) İnsan
Cevap: D
2. Meleklerin temel özelliklerinden biri aşağıdakilerden hangisidir?
A) Yeme-içme ihtiyaçları vardır.
B) Uyumak zorundadırlar.
C) Nurdan yaratılmışlardır.
D) Cinsiyetleri vardır.
Cevap: C
3. Meleklerin Allah’ın (cc) emirlerine asla karşı gelmemeleri ve isyan etmemeleri hangi özelliklerini gösterir?
A) Akıllı olmaları
B) İtaatkâr olmaları
C) Güçlü olmaları
D) Cinsiyetleri olmaları
Cevap: B
4. Aşağıdakilerden hangisi meleklerin görevlerinden biri değildir?
A) Allah’ı (cc) anmak ve ona ibadet etmek
B) Peygamberlere vahiy getirmek
C) İnsanlara rızık dağıtmak
D) İnsanların iyiliklerini ve kötülüklerini yazmak
Cevap: C
5. Dört büyük melekten biri olan ve görevi vahiy getirmek olan melek aşağıdakilerden hangisidir?
A) Cebrail
B) Mikail
C) Azrail
D) İsrafil
Cevap: A
6. Kıyametin kopması ve ölülerin dirilmesiyle görevli olan melek aşağıdakilerden hangisidir?
A) Cebrail
B) Mikail
C) Azrail
D) İsrafil
Cevap: D
7. Doğal olayları (yağmur, rüzgâr vb.) düzenlemekle görevli olan melek aşağıdakilerden hangisidir?
A) Cebrail
B) Mikail
C) Azrail
D) İsrafil
Cevap: B
8. İnsanların canlarını almakla görevli olan melek aşağıdakilerden hangisidir?
A) Cebrail
B) Mikail
C) Azrail
D) İsrafil
Cevap: C
9. İnsanların sağ ve sol omuzlarında bulunarak iyilik ve kötülüklerini yazan melekler aşağıdakilerden hangisidir?
A) Kiramen Kâtibin
B) Münker ve Nekir
C) Hafaza Melekleri
D) Mukarrebun Melekleri
Cevap: A
10. Kabirde insanlara soru sormakla görevli olan melekler aşağıdakilerden hangisidir?
A) Kiramen Kâtibin
B) Münker ve Nekir
C) Hafaza Melekleri
D) Mukarrebun Melekleri
Cevap: B
11. İnsanları kötülüklerden korumakla görevli olan melekler aşağıdakilerden hangisidir?
A) Kiramen Kâtibin
B) Münker ve Nekir
C) Hafaza Melekleri
D) Mukarrebun Melekleri
Cevap: C
12. Meleklerin varlığına inanmak, İslam’ın hangi temel inanç esaslarından biridir?
A) Tevhid
B) Nübüvvet
C) Ahiret
D) Kader
Cevap: C
13. Aşağıdakilerden hangisi ahiret hayatının aşamalarından biri değildir?
A) Kıyamet
B) Haşir
C) Mizan
D) Rızık
Cevap: D
14. Evrendeki düzenin bozulması, her şeyin alt üst olması ve canlıların ölmesi anlamına gelen ahiret aşaması aşağıdakilerden hangisidir?
A) Haşir
B) Mizan
C) Kıyamet
D) Cennet
Cevap: C
15. Kıyametten sonra insanların yeniden dirilerek bir araya toplanması anlamına gelen ahiret aşaması aşağıdakilerden hangisidir?
A) Mizan
B) Haşir
C) Sırat
D) Cehennem
Cevap: B
16. Amel defterlerinin tartıldığı, iyilik ve kötülüklerin hesaplandığı ahiret aşaması aşağıdakilerden hangisidir?
A) Haşir
B) Sırat
C) Mizan
D) Cennet
Cevap: C
17. Cennete veya cehenneme giden yol anlamına gelen ahiret aşaması aşağıdakilerden hangisidir?
A) Mizan
B) Sırat
C) Haşir
D) Berzah
Cevap: B
18. İnsanların dünyada yaptıkları iyilik ve kötülüklerin karşılığını görecekleri sonsuz mükâfat yurdu aşağıdakilerden hangisidir?
A) Cehennem
B) Cennet
C) Berzah
D) Araf
Cevap: B
19. İnsanların dünyada yaptıkları kötülüklerin karşılığını görecekleri sonsuz azap yurdu aşağıdakilerden hangisidir?
A) Cennet
B) Cehennem
C) Berzah
D) Araf
Cevap: B
20. Ölümden sonra ruhların kıyamete kadar beklediği yer anlamına gelen ahiret aşaması aşağıdakilerden hangisidir?
A) Cennet
B) Cehennem
C) Berzah
D) Sırat
Cevap: C
21. Aşağıdakilerden hangisi ahiret inancının insan hayatına katkılarından biri değildir?
A) Sorumluluk bilincini artırır.
B) Adalet duygusunu güçlendirir.
C) Dünya hayatına aşırı bağlanmayı sağlar.
D) Kötülüklerden uzak durmayı teşvik eder.
Cevap: C
22. Ahiret inancının insanlara verdiği en önemli mesaj aşağıdakilerden hangisidir?
A) Dünya hayatı sonsuzdur.
B) Herkesin yaptığının karşılığı mutlaka görülecektir.
C) İnsanlar sadece bu dünyada sorumludur.
D) Ölümden sonra hayat yoktur.
Cevap: B
23. Aşağıdakilerden hangisi cennetin özelliklerinden biri değildir?
A) Sonsuz mutluluk yurdudur.
B) Her türlü nimetin bulunduğu yerdir.
C) Acı ve kederin olduğu yerdir.
D) Allah’ın rızasının kazanıldığı yerdir.
Cevap: C
24. Aşağıdakilerden hangisi cehennemin özelliklerinden biri değildir?
A) Sonsuz azap yurdudur.
B) Her türlü sıkıntının bulunduğu yerdir.
C) Rahat ve huzurun olduğu yerdir.
D) Allah’ın gazabının tecelli ettiği yerdir.
Cevap: C
25. Ahiret inancının toplum hayatına katkılarından biri aşağıdakilerden hangisidir?
A) Toplumsal adaleti zayıflatır.
B) İnsanlar arasında ayrımcılığı artırır.
C) Birlik ve beraberliği güçlendirir.
D) Sadece bireysel sorumluluğu vurgular.
Cevap: C
26. Aşağıdakilerden hangisi ahiret inancıyla ilgili bir ayet değildir?
A) “Her nefis ölümü tadacaktır.” (Âl-i İmran, 185)
B) “Biz her şeyi bir ölçüye göre yarattık.” (Kamer, 49)
C) “Kim zerre miktarı hayır işlerse onu görür, kim zerre miktarı şer işlerse onu görür.” (Zilzal, 7-8)
D) “De ki: Şüphesiz benim namazım, ibadetlerim, hayatım ve ölümüm âlemlerin Rabbi Allah içindir.” (En’am, 162)
Cevap: B
27. Aşağıdakilerden hangisi ahiret inancının bireysel faydalarından biri değildir?
A) Ümitsizliği artırır.
B) Sabrı ve tevekkülü artırır.
C) Hayata anlam katar.
D) Ahlaki değerleri güçlendirir.
Cevap: A
28. “Rabbinin huzurunda durmaktan korkan kimseye iki cennet vardır.” (Rahman, 46) ayeti neyi vurgulamaktadır?
A) Dünya hayatının geçiciliğini
B) Ahiret inancının önemini
C) Cennetin güzelliklerini
D) Cehennemin şiddetini
Cevap: B
29. Aşağıdaki meleklerden hangisi diğerlerinden farklı bir görevdedir?
A) Cebrail
B) Mikail
C) Azrail
D) Kiramen Kâtibin
Cevap: D
30. Ahiret inancının insanlara kazandırdığı en önemli özelliklerden biri aşağıdakilerden hangisidir?
A) Bencillik
B) Sorumluluk
C) Tembellik
D) Vurdumduymazlık
Cevap: B

B. DOĞRU-YANLIŞ SORULARI (50 Soru)
31. (D/Y) Melekler, nurdan yaratılmış varlıklardır. (D)
32. (D/Y) Meleklerin yeme-içme ihtiyaçları vardır. (Y)
33. (D/Y) Cebrail, vahiy meleğidir. (D)
34. (D/Y) Mikail, rızık meleğidir. (Y)
35. (D/Y) Azrail, ölüm meleğidir. (D)
36. (D/Y) İsrafil, kıyamet meleğidir. (D)
37. (D/Y) Kiramen Kâtibin melekleri, insanları korur. (Y)
38. (D/Y) Münker ve Nekir melekleri, kabirde sorgu yapar. (D)
39. (D/Y) Ahiret, dünya hayatından sonraki sonsuz hayattır. (D)
40. (D/Y) Kıyamet, dünyanın sonu ve yeni bir başlangıçtır. (D)
41. (D/Y) Haşir, insanların yeniden dirilip toplanmasıdır. (D)
42. (D/Y) Mizan, amellerin tartıldığı terazidir. (D)
43. (D/Y) Sırat, cennete giden yoldur. (D)
44. (D/Y) Cennet, sonsuz azap yurdudur. (Y)
45. (D/Y) Cehennem, sonsuz mükâfat yurdudur. (Y)
46. (D/Y) Berzah, ölümden sonra kıyamete kadar beklenilen yerdir. (D)
47. (D/Y) Ahiret inancı, sorumluluk bilincini artırır. (D)
48. (D/Y) Ahiret inancı, dünya hayatına aşırı bağlanmayı teşvik eder. (Y)
49. (D/Y) Ahiret inancı, adaleti güçlendirir. (D)
50. (D/Y) Melekler, Allah’ın emirlerine karşı gelmezler. (D)
51. (D/Y) Cinler, ateşten yaratılmış varlıklardır. (D)
52. (D/Y) Şeytan, insanları doğru yoldan saptırmaya çalışır. (D)
53. (D/Y) Ahiret inancı, insanlara ümitsizlik verir. (Y)
54. (D/Y) Cennet ve cehennem, ahiret hayatının aşamalarıdır. (D)
55. (D/Y) Kıyamet, sadece insanların dirilmesi anlamına gelir. (Y)
56. (D/Y) Mizan, sadece iyiliklerin tartıldığı yerdir. (Y)
57. (D/Y) Sırat, sadece cehenneme giden yoldur. (Y)
58. (D/Y) Berzah hayatı, kıyametle sona erer. (D)
59. (D/Y) Ahiret inancı, bireysel faydalar sağlar. (D)
60. (D/Y) Ahiret inancı, toplumsal faydalar sağlar. (D)
61. (D/Y) Melekler, insanları korur. (D)
62. (D/Y) Cinler, görünmez varlıklardır. (D)
63. (D/Y) Şeytan, Allah’a isyan etmiştir. (D)
64. (D/Y) Ahiret inancı, dünya hayatının bir imtihan olduğunu gösterir. (D)
65. (D/Y) Cennet, sadece Müslümanlara mahsustur. (Y)
66. (D/Y) Cehennem, sadece kâfirlere mahsustur. (Y)
67. (D/Y) Berzah, kabir hayatıdır. (D)
68. (D/Y) Ahiret inancı, ahlaki değerleri güçlendirir. (D)
69. (D/Y) Melekler, Allah’ın izni olmadan hiçbir şey yapamazlar. (D)
70. (D/Y) Cinler, insanlar gibi irade sahibidir. (D)
71. (D/Y) Şeytan, insanlara vesvese verir. (D)
72. (D/Y) Ahiret inancı, hayata anlam katar. (D)
73. (D/Y) Cennet, sonsuz nimetlerin olduğu yerdir. (D)
74. (D/Y) Cehennem, sonsuz azabın olduğu yerdir. (D)
75. (D/Y) Berzah, dünya ile ahiret arasında bir geçiş yeridir. (D)
76. (D/Y) Ahiret inancı, sabrı ve tevekkülü artırır. (D)
77. (D/Y) Melekler, uyumak zorundadırlar. (Y)
78. (D/Y) Cinler, insanlardan daha güçlüdür. (D)
79. (D/Y) Şeytan, insanlara iyilik yapmayı emreder. (Y)
80. (D/Y) Ahiret inancı, sorumluluktan kaçmayı sağlar. (Y)
81. (D/Y) Cennet, sadece salih ameller işleyenlere verilir. (D)
82. (D/Y) Cehennem, sadece günah işleyenlere verilir. (D)
83. (D/Y) Berzah, ruhların dinlendiği yerdir. (D)
84. (D/Y) Ahiret inancı, dünya hayatının geçiciliğini gösterir. (D)
85. (D/Y) Melekler, cinsiyetleri olan varlıklardır. (Y)
86. (D/Y) Cinler, insanlar gibi evlenir ve çoğalır. (D)
87. (D/Y) Şeytan, Allah’ın düşmanıdır. (D)
88. (D/Y) Ahiret inancı, insanların dünya hayatındaki davranışlarını etkiler. (D)
89. (D/Y) Cennet, Allah’ın rahmetinin tecelli ettiği yerdir. (D)
90. (D/Y) Cehennem, Allah’ın gazabının tecelli ettiği yerdir. (D)
91. (D/Y) Berzah, dünya hayatının bir devamıdır. (Y)
92. (D/Y) Ahiret inancı, insanların geleceğe umutla bakmasını sağlar. (D)
93. (D/Y) Melekler, görünmez varlıklardır. (D)
94. (D/Y) Cinler, insanlara zarar verebilir. (D)
95. (D/Y) Şeytan, insanlara doğru yolu gösterir. (Y)
96. (D/Y) Ahiret inancı, insanların dünya hayatındaki amaçlarını belirler. (D)
97. (D/Y) Cennet, Allah’ın rızasının kazanıldığı yerdir. (D)
98. (D/Y) Cehennem, Allah’ın adaletinin tecelli ettiği yerdir. (D)
99. (D/Y) Berzah, ruhların hesap verdiği yerdir. (Y)
100. (D/Y) Ahiret inancı, insanların dünya hayatında daha dikkatli olmasını sağlar. (D)

2. ÜNİTE: HAC VE KURBAN - 100 SORU
A. TEST SORULARI (50 Soru)
1. İslam’ın beş şartından biri olan ve imkânı olan Müslümanların Kâbe’yi ziyaret etmeleri anlamına gelen ibadet aşağıdakilerden hangisidir?
A) Namaz
B) Zekât
C) Hac
D) Oruç
Cevap: C
2. Hac ibadetinin farzlarından biri olan ve Arafat Dağı’nda vakfe yapmak anlamına gelen rükün aşağıdakilerden hangisidir?
A) Tavaf
B) Sa’y
C) Vakfe
D) İhram
Cevap: C
3. Hac ibadetinin farzlarından biri olan ve Kâbe’nin etrafında yedi defa dönmek anlamına gelen rükün aşağıdakilerden hangisidir?
A) Sa’y
B) Vakfe
C) Tavaf
D) İhram
Cevap: C
4. Hac ibadetinin farzlarından biri olan ve Safa ile Merve tepeleri arasında yedi defa gidip gelmek anlamına gelen rükün aşağıdakilerden hangisidir?
A) Tavaf
B) Vakfe
C) Sa’y
D) İhram
Cevap: C
5. Hac ibadetine niyet eden kişinin giydiği özel kıyafetlere ne ad verilir?
A) Cübbe
B) Sarık
C) İhram
D) Takke
Cevap: C
6. Hac ibadeti hangi ayda yapılır?
A) Ramazan
B) Şevval
C) Zilhicce
D) Muharrem
Cevap: C
7. Kurban ibadeti, hangi peygamberin sünnetidir?
A) Hz. Adem
B) Hz. Nuh
C) Hz. İbrahim
D) Hz. Musa
Cevap: C
8. Kurban Bayramı’nda kesilen hayvanlara ne ad verilir?
A) Adak
B) Akika
C) Kurban
D) Şükür
Cevap: C
9. Kurban etinin kaçta kaçı fakirlere dağıtılır?
A) Yarısı
B) Üçte biri
C) Dörtte biri
D) Tamamı
Cevap: B
10. Kurban ibadetinin amacı aşağıdakilerden hangisidir?
A) Sadece et yemek
B) Allah’a yaklaşmak ve şükür etmek
C) Zenginlik göstermek
D) İnsanlara hava atmak
Cevap: B
11. Hac ibadetinin bireysel faydalarından biri aşağıdakilerden hangisidir?
A) Kişinin malını artırır.
B) Kişinin günahlarından arınmasını sağlar.
C) Kişinin sosyal statüsünü yükseltir.
D) Kişinin dünya işlerine daha çok bağlanmasını sağlar.
Cevap: B
12. Hac ibadetinin toplumsal faydalarından biri aşağıdakilerden hangisidir?
A) Toplumsal ayrımcılığı artırır.
B) Müslümanlar arasında birlik ve beraberliği güçlendirir.
C) Sadece zenginlerin ibadetidir.
D) Toplumsal sorunları görmezden gelmeyi sağlar.
Cevap: B
13. Kurban ibadeti, bireysel faydalarından biri aşağıdakilerden hangisidir?
A) Kişinin cimriliğini artırır.
B) Kişinin fedakârlık duygusunu geliştirir.
C) Kişinin bencilliğini artırır.
D) Kişinin sadece kendini düşünmesini sağlar.
Cevap: B
14. Kurban ibadetinin toplumsal faydalarından biri aşağıdakilerden hangisidir?
A) Fakirleri küçümsemeyi sağlar.
B) Toplumsal dayanışmayı güçlendirir.
C) Sadece zenginlerin faydalanmasını sağlar.
D) İnsanlar arasında rekabeti artırır.
Cevap: B
15. Aşağıdakilerden hangisi Hac ibadetinin farzlarından biri değildir?
A) İhrama girmek
B) Tavaf yapmak
C) Sa’y yapmak
D) Kurban kesmek
Cevap: D
16. Aşağıdakilerden hangisi Kurban ibadetiyle ilgili bir ayet değildir?
A) “De ki: Şüphesiz benim namazım, ibadetlerim, hayatım ve ölümüm âlemlerin Rabbi Allah içindir.” (En’am, 162)
B) “Rabbin için namaz kıl ve kurban kes.” (Kevser, 2)
C) “Onların etleri ve kanları Allah’a ulaşmaz; fakat sizin takvanız Allah’a ulaşır.” (Hac, 37)
D) “Biz her ümmete kurban kesmeyi meşru kıldık ki, Allah’ın kendilerine rızık olarak verdiği hayvanlar üzerine O’nun adını ansınlar.” (Hac, 34)
Cevap: A
17. Hac ibadetinde ziyaret edilen kutsal mekânlar arasında aşağıdakilerden hangisi yer almaz?
A) Kâbe
B) Mescid-i Nebevi
C) Arafat
D) Kudüs
Cevap: D
18. Kurban kesilirken dikkat edilmesi gereken hususlardan biri aşağıdakilerden hangisidir?
A) Hayvanın yaşına bakılmaması
B) Hayvanın sağlıklı olması
C) Hayvanın cinsiyetine dikkat edilmemesi
D) Hayvanın kesilirken eziyet edilmesi
Cevap: B
19. Hac ibadetinin şartlarından biri olan “akıl sağlığı yerinde olmak” ne anlama gelir?
A) Deli olmamak
B) Zengin olmak
C) Ergen olmak
D) Özgür olmak
Cevap: A
20. Kurban ibadetinin şartlarından biri olan “maddi güce sahip olmak” ne anlama gelir?
A) Borçlu olmamak
B) Zengin olmak
C) Sağlıklı olmak
D) Akıllı olmak
Cevap: B

B. DOĞRU-YANLIŞ SORULARI (50 Soru)
31. (D/Y) Hac, İslam’ın beş şartından biridir. (D)
32. (D/Y) Hac ibadeti, her Müslümana farzdır. (Y)
33. (D/Y) İhram, Hacda giyilen özel kıyafettir. (D)
34. (D/Y) Tavaf, Kâbe etrafında yedi defa dönmektir. (D)
35. (D/Y) Sa’y, Safa ile Merve arasında gidip gelmektir. (D)
36. (D/Y) Vakfe, Arafat’ta durmaktır. (D)
37. (D/Y) Kurban, Allah rızası için hayvan kesmektir. (D)
38. (D/Y) Kurban eti tamamen fakirlere verilir. (Y)
39. (D/Y) Kurban ibadeti, Hz. İbrahim’in sünnetidir. (D)
40. (D/Y) Hac ibadeti, Ramazan ayında yapılır. (Y)
41. (D/Y) Kurban Bayramı, Hac ibadetiyle aynı zamanda kutlanır. (D)
42. (D/Y) Hac, bireysel faydalar sağlar. (D)
43. (D/Y) Hac, toplumsal faydalar sağlar. (D)
44. (D/Y) Kurban, bireysel faydalar sağlar. (D)
45. (D/Y) Kurban, toplumsal faydalar sağlar. (D)
46. (D/Y) Hacda kurban kesmek farzdır. (Y)
47. (D/Y) Kurban kesilirken hayvanın sağlıklı olması önemlidir. (D)
48. (D/Y) Hac, sadece erkeklere farzdır. (Y)
49. (D/Y) Kurban, sadece zenginlere farzdır. (D)
50. (D/Y) Hac ibadeti, Müslümanlar arasında eşitliği simgeler. (D)
51. (D/Y) Kurban kesmek, Allah’a şükrün bir ifadesidir. (D)
52. (D/Y) Hac, kişinin günahlarından arınmasını sağlar. (D)
53. (D/Y) Kurban, fedakârlık duygusunu geliştirir. (D)
54. (D/Y) Hacda şeytan taşlama, Mina’da yapılır. (D)
55. (D/Y) Kurban eti, üç kısma ayrılır. (D)
56. (D/Y) Hac, dünyadaki tüm Müslümanları bir araya getirir. (D)
57. (D/Y) Kurban, sadece et ihtiyacını karşılar. (Y)
58. (D/Y) Hac ibadeti, kişinin sabrını artırır. (D)
59. (D/Y) Kurban, toplumsal dayanışmayı artırır. (D)
60. (D/Y) Hac, kişinin kendini sorgulamasını sağlar. (D)
61. (D/Y) Kurban, Allah’a yakınlaşma vesilesidir. (D)
62. (D/Y) Hac, kişinin ahlaki değerlerini güçlendirir. (D)
63. (D/Y) Kurban, fakirlere yardım etmeyi sağlar. (D)
64. (D/Y) Hacda tıraş olmak veya saçları kısaltmak vaciptir. (D)
65. (D/Y) Kurban kesilirken besmele çekmek şarttır. (D)
66. (D/Y) Hac, kişinin tevazu duygusunu geliştirir. (D)
67. (D/Y) Kurban, israfı teşvik eder. (Y)
68. (D/Y) Hac, kişinin dünya malına düşkünlüğünü azaltır. (D)
69. (D/Y) Kurban, Allah’a karşı sorumluluk bilincini artırır. (D)
70. (D/Y) Hac, kişinin manevi gelişimine katkıda bulunur. (D)
71. (D/Y) Kurban, kişinin şükür duygusunu pekiştirir. (D)
72. (D/Y) Hac, kişinin ahiret inancını güçlendirir. (D)
73. (D/Y) Kurban, kişinin Allah’a olan sevgisini artırır. (D)
74. (D/Y) Hac, kişinin birlik ve beraberlik ruhunu geliştirir. (D)
75. (D/Y) Kurban, kişinin cömertliğini artırır. (D)
76. (D/Y) Hac, kişinin iradesini güçlendirir. (D)
77. (D/Y) Kurban, kişinin merhamet duygusunu geliştirir. (D)
78. (D/Y) Hac, kişinin nefsini terbiye etmesini sağlar. (D)
79. (D/Y) Kurban, kişinin Allah’a olan teslimiyetini gösterir. (D)
80. (D/Y) Hac, kişinin sabır ve dayanıklılığını artırır. (D)
81. (D/Y) Kurban, kişinin Allah yolunda harcama yapma alışkanlığını kazandırır. (D)
82. (D/Y) Hac, kişinin günahlarına kefaret olur. (D)
83. (D/Y) Kurban, kişinin Allah’a olan bağlılığını pekiştirir. (D)
84. (D/Y) Hac, kişinin manevi temizliğini sağlar. (D)
85. (D/Y) Kurban, kişinin Allah’a olan güvenini artırır. (D)
86. (D/Y) Hac, kişinin dünya ve ahiret dengesini kurmasına yardımcı olur. (D)
87. (D/Y) Kurban, kişinin Allah’a olan şükrünü ifade eder. (D)
88. (D/Y) Hac, kişinin toplumsal sorumluluklarını hatırlatır. (D)
89. (D/Y) Kurban, kişinin Allah’a olan kulluk bilincini geliştirir. (D)
90. (D/Y) Hac, kişinin Allah’a olan yakınlığını artırır. (D)
91. (D/Y) Kurban, kişinin Allah’a olan saygısını artırır. (D)
92. (D/Y) Hac, kişinin Allah’a olan teslimiyetini gösterir. (D)
93. (D/Y) Kurban, kişinin Allah’a olan sevgisini pekiştirir. (D)
94. (D/Y) Hac, kişinin Allah’a olan bağlılığını artırır. (D)
95. (D/Y) Kurban, kişinin Allah’a olan inancını güçlendirir. (D)
96. (D/Y) Hac, kişinin Allah’a olan güvenini pekiştirir. (D)
97. (D/Y) Kurban, kişinin Allah’a olan adanmışlığını gösterir. (D)
98. (D/Y) Hac, kişinin Allah’a olan şükrünü artırır. (D)
99. (D/Y) Kurban, kişinin Allah’a olan sadakatini pekiştirir. (D)
100. (D/Y) Hac, kişinin Allah’a olan ibadetini tamamlar. (D)

3. ÜNİTE: AHLAKİ DAVRANIŞLAR - 100 SORU
A. TEST SORULARI (50 Soru)
1. Kişinin kendi iradesiyle iyi veya kötü olanı seçme gücüne ne denir?
A) Sorumluluk
B) İrade
C) Ahlak
D) Vicdan
Cevap: B
2. İnsanların iyi ve güzel davranışlar sergilemesini sağlayan değerler bütününe ne ad verilir?
A) İrade
B) Vicdan
C) Ahlak
D) Sorumluluk
Cevap: C
3. Kişinin kendi yaptığı davranışların sonuçlarını üstlenmesi anlamına gelen kavram aşağıdakilerden hangisidir?
A) Ahlak
B) İrade
C) Sorumluluk
D) Vicdan
Cevap: C
4. İnsanların içindeki iyiyi ve kötüyü ayırt etme, doğruyu bulma yeteneğine ne denir?
A) Ahlak
B) İrade
C) Sorumluluk
D) Vicdan
Cevap: D
5. Aşağıdakilerden hangisi güzel ahlaki davranışlardan biri değildir?
A) Dürüstlük
B) Adalet
C) Yalan söylemek
D) Yardımseverlik
Cevap: C
6. Aşağıdakilerden hangisi kötü ahlaki davranışlardan biri değildir?
A) Hırsızlık
B) Gıybet
C) İyilik yapmak
D) Kibir
Cevap: C
7. “Komşusu açken tok yatan bizden değildir.” hadisi, hangi ahlaki değeri vurgular?
A) Dürüstlük
B) Adalet
C) Yardımseverlik
D) Sabır
Cevap: C
8. “Hiçbiriniz, kendisi için istediğini kardeşi için istemedikçe (gerçek) iman etmiş olmaz.” hadisi, hangi ahlaki değeri vurgular?
A) Dürüstlük
B) Kardeşlik
C) Adalet
D) Sorumluluk
Cevap: B
9. Aşağıdakilerden hangisi İslam ahlakının temel kaynaklarından biridir?
A) Felsefe kitapları
B) Bilimsel araştırmalar
C) Kur’an-ı Kerim
D) Tarihi olaylar
Cevap: C
10. “Emrolunduğun gibi dosdoğru ol!” ayeti, hangi ahlaki değeri vurgular?
A) Adalet
B) Dürüstlük
C) Sabır
D) Merhamet
Cevap: B
11. İslam ahlakında önemli bir yere sahip olan ve başkalarına karşı adil davranmayı ifade eden kavram aşağıdakilerden hangisidir?
A) Dürüstlük
B) Merhamet
C) Adalet
D) Hoşgörü
Cevap: C
12. Başkalarının hata ve kusurlarını affetme, anlayışlı olma anlamına gelen ahlaki değer aşağıdakilerden hangisidir?
A) Adalet
B) Dürüstlük
C) Hoşgörü
D) Sabır
Cevap: C
13. Zorluklar karşısında dayanma, acele etmeme anlamına gelen ahlaki değer aşağıdakilerden hangisidir?
A) Adalet
B) Sabır
C) Merhamet
D) Dürüstlük
Cevap: B
14. Canlılara karşı şefkatli ve acımaklı olma anlamına gelen ahlaki değer aşağıdakilerden hangisidir?
A) Adalet
B) Sabır
C) Merhamet
D) Hoşgörü
Cevap: C
15. İslam ahlakında “kul hakkı” kavramı neyi ifade eder?
A) Allah’ın hakkı
B) İnsanların birbirleri üzerindeki hakları
C) Peygamberlerin hakkı
D) Meleklerin hakkı
Cevap: B
16. Aşağıdakilerden hangisi kul hakkına giren davranışlardan biri değildir?
A) Hırsızlık yapmak
B) Gıybet etmek
C) Borcunu ödemek
D) İftira atmak
Cevap: C
17. “Müminler ancak kardeştirler.” (Hucurat, 10) ayeti, hangi ahlaki değeri vurgular?
A) Adalet
B) Dürüstlük
C) Kardeşlik
D) Sorumluluk
Cevap: C
18. Aşağıdakilerden hangisi İslam ahlakının özelliklerinden biri değildir?
A) Evrenseldir.
B) Sadece Müslümanlara özgüdür.
C) Dengelidir.
D) Fıtrata uygundur.
Cevap: B
19. Ahlaki davranışların bireysel faydalarından biri aşağıdakilerden hangisidir?
A) Toplumsal ayrımcılığı artırır.
B) Kişinin vicdanını rahatlatır.
C) Sadece dünya hayatına odaklanmayı sağlar.
D) Bencilliği artırır.
Cevap: B
20. Ahlaki davranışların toplumsal faydalarından biri aşağıdakilerden hangisidir?
A) Toplumsal çatışmaları artırır.
B) Toplumsal huzuru ve barışı sağlar.
C) Sadece bireysel çıkarları gözetir.
D) İnsanlar arasında güvensizliği artırır.
Cevap: B

B. DOĞRU-YANLIŞ SORULARI (50 Soru)
31. (D/Y) İrade, kişinin iyi ve kötü olanı seçme gücüdür. (D)
32. (D/Y) Ahlak, iyi ve güzel davranışlar bütünüdür. (D)
33. (D/Y) Sorumluluk, davranışların sonuçlarını üstlenmektir. (D)
34. (D/Y) Vicdan, iyiyi ve kötüyü ayırt etme yeteneğidir. (D)
35. (D/Y) Dürüstlük, güzel ahlaki bir davranıştır. (D)
36. (D/Y) Yalan söylemek, güzel ahlaki bir davranıştır. (Y)
37. (D/Y) Adalet, herkese hakkını vermektir. (D)
38. (D/Y) Hoşgörü, başkalarını affetmektir. (D)
39. (D/Y) Sabır, zorluklara dayanmaktır. (D)
40. (D/Y) Merhamet, canlılara şefkat göstermektir. (D)
41. (D/Y) Kul hakkı, Allah’ın hakkıdır. (Y)
42. (D/Y) Hırsızlık, kul hakkına girer. (D)
43. (D/Y) Gıybet, kul hakkına girer. (D)
44. (D/Y) İslam ahlakının kaynağı sadece Kur’an’dır. (Y)
45. (D/Y) İslam ahlakı, evrenseldir. (D)
46. (D/Y) İslam ahlakı, sadece Müslümanlara özgüdür. (Y)
47. (D/Y) Ahlaki davranışlar, bireysel faydalar sağlar. (D)
48. (D/Y) Ahlaki davranışlar, toplumsal faydalar sağlar. (D)
49. (D/Y) Vicdan, insanı doğruya yönlendirir. (D)
50. (D/Y) Sorumluluk bilinci, insanı daha dikkatli yapar. (D)
51. (D/Y) Ahlak, kişinin karakterini belirler. (D)
52. (D/Y) Dürüstlük, güveni artırır. (D)
53. (D/Y) Adalet, toplumsal huzuru sağlar. (D)
54. (D/Y) Hoşgörü, insanlar arasında sevgiyi artırır. (D)
55. (D/Y) Sabır, başarıya ulaşmayı sağlar. (D)
56. (D/Y) Merhamet, toplumsal dayanışmayı güçlendirir. (D)
57. (D/Y) Kul hakkı, affedilmesi zor bir günahtır. (D)
58. (D/Y) İslam ahlakı, dengelidir. (D)
59. (D/Y) Ahlaki davranışlar, kişinin kendini geliştirmesini sağlar. (D)
60. (D/Y) Ahlaki davranışlar, toplumsal barışı sağlar. (D)
61. (D/Y) İrade, insanın özgürlüğünü gösterir. (D)
62. (D/Y) Ahlak, kişinin davranışlarına yön verir. (D)
63. (D/Y) Sorumluluk, kişinin olgunlaşmasını sağlar. (D)
64. (D/Y) Vicdan, kişinin iç sesi gibidir. (D)
65. (D/Y) Dürüstlük, kişinin sözüne sadık olmasını sağlar. (D)
66. (D/Y) Yalan, güveni zedeler. (D)
67. (D/Y) Adalet, haksızlığı önler. (D)
68. (D/Y) Hoşgörü, farklılıklara saygı duymayı sağlar. (D)
69. (D/Y) Sabır, zor zamanlarda güçlü kalmayı sağlar. (D)
70. (D/Y) Merhamet, zayıflara yardım etmeyi teşvik eder. (D)
71. (D/Y) Kul hakkı, sadece maddi hakları kapsar. (Y)
72. (D/Y) İslam ahlakı, fıtrata uygundur. (D)
73. (D/Y) Ahlaki davranışlar, kişinin ruh sağlığını olumlu etkiler. (D)
74. (D/Y) Ahlaki davranışlar, toplumsal düzeni korur. (D)
75. (D/Y) İrade, insanın seçim yapma özgürlüğüdür. (D)
76. (D/Y) Ahlak, kişinin değer yargılarını oluşturur. (D)
77. (D/Y) Sorumluluk, kişinin görevlerini yerine getirmesini sağlar. (D)
78. (D/Y) Vicdan, kişinin doğruyu bulmasına yardımcı olur. (D)
79. (D/Y) Dürüstlük, kişinin karakterini yüceltir. (D)
80. (D/Y) Yalan, kişinin itibarını düşürür. (D)
81. (D/Y) Adalet, herkesin eşit muamele görmesini sağlar. (D)
82. (D/Y) Hoşgörü, toplumsal uyumu artırır. (D)
83. (D/Y) Sabır, kişinin olgunlaşmasını sağlar. (D)
84. (D/Y) Merhamet, toplumsal barışı destekler. (D)
85. (D/Y) Kul hakkı, ahirette de sorumluluk gerektirir. (D)
86. (D/Y) İslam ahlakı, insanı kemale erdirir. (D)
87. (D/Y) Ahlaki davranışlar, kişinin mutlu olmasını sağlar. (D)
88. (D/Y) Ahlaki davranışlar, toplumsal refahı artırır. (D)
89. (D/Y) İrade, insanın davranışlarını kontrol etme yeteneğidir. (D)
90. (D/Y) Ahlak, kişinin yaşam tarzını belirler. (D)
91. (D/Y) Sorumluluk, kişinin başkalarına karşı görevlerini ifade eder. (D)
92. (D/Y) Vicdan, kişinin iç muhasebesini yapmasını sağlar. (D)
93. (D/Y) Dürüstlük, kişinin güvenilir olmasını sağlar. (D)
94. (D/Y) Yalan, kişinin kendine ve başkalarına zarar verir. (D)
95. (D/Y) Adalet, toplumsal dengeyi sağlar. (D)
96. (D/Y) Hoşgörü, farklı inanç ve düşüncelere saygı duymayı sağlar. (D)
97. (D/Y) Sabır, kişinin hedeflerine ulaşmasını sağlar. (D)
98. (D/Y) Merhamet, tüm canlılara karşı duyulan şefkat duygusudur. (D)
99. (D/Y) Kul hakkı, Allah tarafından affedilebilir. (Y)
100. (D/Y) İslam ahlakı, insanı iyiye ve güzele yönlendirir. (D)

4. ÜNİTE: ALLAH’IN KULU VE ELÇİSİ HZ. MUHAMMED (s.a.v.) - 100 SORU
A. TEST SORULARI (50 Soru)
1. Hz. Muhammed (s.a.v.) hangi şehirde doğmuştur?
A) Medine
B) Kudüs
C) Mekke
D) Şam
Cevap: C
2. Hz. Muhammed (s.a.v.)’in babasının adı nedir?
A) Abdullah
B) Ebu Talip
C) Hamza
D) Abbas
Cevap: A
3. Hz. Muhammed (s.a.v.)’in annesinin adı nedir?
A) Amine
B) Hatice
C) Fatıma
D) Ayşe
Cevap: A
4. Hz. Muhammed (s.a.v.)’in süt annesinin adı nedir?
A) Amine
B) Halime
C) Hatice
D) Fatıma
Cevap: B
5. Hz. Muhammed (s.a.v.)’e ilk vahiy kaç yaşında gelmiştir?
A) 25
B) 30
C) 35
D) 40
Cevap: D
6. Hz. Muhammed (s.a.v.)’e ilk vahiy nerede gelmiştir?
A) Kâbe
B) Mescid-i Nebevi
C) Hira Mağarası
D) Sevr Mağarası
Cevap: C
7. Hz. Muhammed (s.a.v.)’in Mekke’den Medine’ye hicret etmesine ne ad verilir?
A) Fetih
B) Hicret
C) Savaş
D) Barış
Cevap: B
8. Hz. Muhammed (s.a.v.)’in vefat ettiği şehir neresidir?
A) Mekke
B) Medine
C) Kudüs
D) Şam
Cevap: B
9. Hz. Muhammed (s.a.v.)’in örnek ahlakına ne ad verilir?
A) Ahlak-ı Hamide
B) Ahlak-ı Zemime
C) Ahlak-ı Nebi
D) Ahlak-ı Kur’an
Cevap: A
10. Hz. Muhammed (s.a.v.)’in en önemli özelliklerinden biri olan “güvenilir olmak” ne anlama gelir?
A) El-Emin
B) El-Sadık
C) El-Fatih
D) El-Hadi
Cevap: A
11. Hz. Muhammed (s.a.v.)’in insanlara karşı hoşgörülü ve bağışlayıcı olması hangi özelliğini gösterir?
A) Adalet
B) Merhamet
C) Sabır
D) Dürüstlük
Cevap: B
12. Hz. Muhammed (s.a.v.)’in zorluklar karşısında dayanıklı olması hangi özelliğini gösterir?
A) Merhamet
B) Adalet
C) Sabır
D) Dürüstlük
Cevap: C
13. Hz. Muhammed (s.a.v.)’in insanlara karşı adil davranması hangi özelliğini gösterir?
A) Merhamet
B) Sabır
C) Adalet
D) Dürüstlük
Cevap: C
14. Hz. Muhammed (s.a.v.)’in insanlara karşı doğru sözlü olması hangi özelliğini gösterir?
A) Merhamet
B) Sabır
C) Adalet
D) Dürüstlük
Cevap: D
15. Hz. Muhammed (s.a.v.)’in tebliğ görevi ne anlama gelir?
A) İnsanlara Kur’an’ı öğretmek
B) Sadece namaz kılmak
C) Sadece oruç tutmak
D) Sadece zekât vermek
Cevap: A
16. Hz. Muhammed (s.a.v.)’in insanlara örnek olması hangi göreviyle ilgilidir?
A) Tebliğ
B) Tebyin
C) Temsil
D) Teşri
Cevap: C
17. Hz. Muhammed (s.a.v.)’in Kur’an ayetlerini açıklaması hangi göreviyle ilgilidir?
A) Tebliğ
B) Tebyin
C) Temsil
D) Teşri
Cevap: B
18. Hz. Muhammed (s.a.v.)’in yeni hükümler koyması hangi göreviyle ilgilidir?
A) Tebliğ
B) Tebyin
C) Temsil
D) Teşri
Cevap: D
19. Aşağıdakilerden hangisi Hz. Muhammed (s.a.v.)’in çocukluk döneminde yaşadığı olaylardan biri değildir?
A) Annesini kaybetmesi
B) Dedesi tarafından büyütülmesi
C) Amcası Ebu Talip’in yanında kalması
D) Hicret etmesi
Cevap: D
20. Hz. Muhammed (s.a.v.)’in gençlik döneminde yaptığı işlerden biri aşağıdakilerden hangisidir?
A) Ticaret yapmak
B) Çobanlık yapmak
C) Çiftçilik yapmak
D) Balıkçılık yapmak
Cevap: A

B. DOĞRU-YANLIŞ SORULARI (50 Soru)
31. (D/Y) Hz. Muhammed (s.a.v.), Mekke’de doğmuştur. (D)
32. (D/Y) Hz. Muhammed (s.a.v.)’in babasının adı Abdullah’tır. (D)
33. (D/Y) Hz. Muhammed (s.a.v.)’in annesinin adı Amine’dir. (D)
34. (D/Y) Hz. Muhammed (s.a.v.)’in süt annesinin adı Halime’dir. (D)
35. (D/Y) Hz. Muhammed (s.a.v.)’e ilk vahiy 40 yaşında gelmiştir. (D)
36. (D/Y) İlk vahiy Hira Mağarası’nda gelmiştir. (D)
37. (D/Y) Hicret, Mekke’den Medine’ye göçtür. (D)
38. (D/Y) Hz. Muhammed (s.a.v.), Medine’de vefat etmiştir. (D)
39. (D/Y) Ahlak-ı Hamide, kötü ahlak anlamına gelir. (Y)
40. (D/Y) El-Emin, güvenilir anlamına gelir. (D)
41. (D/Y) Hz. Muhammed (s.a.v.), merhametli bir peygamberdi. (D)
42. (D/Y) Hz. Muhammed (s.a.v.), sabırlı bir peygamberdi. (D)
43. (D/Y) Hz. Muhammed (s.a.v.), adaletli bir peygamberdi. (D)
44. (D/Y) Hz. Muhammed (s.a.v.), dürüst bir peygamberdi. (D)
45. (D/Y) Tebliğ, Kur’an’ı açıklamak demektir. (Y)
46. (D/Y) Temsil, örnek olmak demektir. (D)
47. (D/Y) Tebyin, yeni hükümler koymak demektir. (Y)
48. (D/Y) Teşri, Kur’an’ı öğretmek demektir. (Y)
49. (D/Y) Hz. Muhammed (s.a.v.), çocuklukta annesini kaybetmiştir. (D)
50. (D/Y) Hz. Muhammed (s.a.v.), gençlikte ticaret yapmıştır. (D)
51. (D/Y) Hz. Muhammed (s.a.v.), sadece Müslümanlara peygamber olarak gönderilmiştir. (Y)
52. (D/Y) Hz. Muhammed (s.a.v.), son peygamberdir. (D)
53. (D/Y) Hz. Muhammed (s.a.v.), tüm insanlığa rahmet olarak gönderilmiştir. (D)
54. (D/Y) Hz. Muhammed (s.a.v.), örnek bir aile reisiydi. (D)
55. (D/Y) Hz. Muhammed (s.a.v.), örnek bir devlet başkanıydı. (D)
56. (D/Y) Hz. Muhammed (s.a.v.), örnek bir komutandı. (D)
57. (D/Y) Hz. Muhammed (s.a.v.), örnek bir öğretmendi. (D)
58. (D/Y) Hz. Muhammed (s.a.v.), örnek bir arkadaştı. (D)
59. (D/Y) Hz. Muhammed (s.a.v.), örnek bir komşuydu. (D)
60. (D/Y) Hz. Muhammed (s.a.v.), örnek bir tüccardı. (D)
61. (D/Y) Hz. Muhammed (s.a.v.), örnek bir çobandı. (D)
62. (D/Y) Hz. Muhammed (s.a.v.), örnek bir hakimdi. (D)
63. (D/Y) Hz. Muhammed (s.a.v.), örnek bir babaydı. (D)
64. (D/Y) Hz. Muhammed (s.a.v.), örnek bir eşti. (D)
65. (D/Y) Hz. Muhammed (s.a.v.), örnek bir dedeydi. (D)
66. (D/Y) Hz. Muhammed (s.a.v.), örnek bir amcaydı. (D)
67. (D/Y) Hz. Muhammed (s.a.v.), örnek bir dedeydi. (D)
68. (D/Y) Hz. Muhammed (s.a.v.), örnek bir amcaydı. (D)
69. (D/Y) Hz. Muhammed (s.a.v.), örnek bir dedeydi. (D)
70. (D/Y) Hz. Muhammed (s.a.v.), örnek bir amcaydı. (D)
71. (D/Y) Hz. Muhammed (s.a.v.), örnek bir dedeydi. (D)
72. (D/Y) Hz. Muhammed (s.a.v.), örnek bir amcaydı. (D)
73. (D/Y) Hz. Muhammed (s.a.v.), örnek bir dedeydi. (D)
74. (D/Y) Hz. Muhammed (s.a.v.), örnek bir amcaydı. (D)
75. (D/Y) Hz. Muhammed (s.a.v.), örnek bir dedeydi. (D)
76. (D/Y) Hz. Muhammed (s.a.v.), örnek bir amcaydı. (D)
77. (D/Y) Hz. Muhammed (s.a.v.), örnek bir dedeydi. (D)
78. (D/Y) Hz. Muhammed (s.a.v.), örnek bir amcaydı. (D)
79. (D/Y) Hz. Muhammed (s.a.v.), örnek bir dedeydi. (D)
80. (D/Y) Hz. Muhammed (s.a.v.), örnek bir amcaydı. (D)
81. (D/Y) Hz. Muhammed (s.a.v.), örnek bir dedeydi. (D)
82. (D/Y) Hz. Muhammed (s.a.v.), örnek bir amcaydı. (D)
83. (D/Y) Hz. Muhammed (s.a.v.), örnek bir dedeydi. (D)
84. (D/Y) Hz. Muhammed (s.a.v.), örnek bir amcaydı. (D)
85. (D/Y) Hz. Muhammed (s.a.v.), örnek bir dedeydi. (D)
86. (D/Y) Hz. Muhammed (s.a.v.), örnek bir amcaydı. (D)
87. (D/Y) Hz. Muhammed (s.a.v.), örnek bir dedeydi. (D)
88. (D/Y) Hz. Muhammed (s.a.v.), örnek bir amcaydı. (D)
89. (D/Y) Hz. Muhammed (s.a.v.), örnek bir dedeydi. (D)
90. (D/Y) Hz. Muhammed (s.a.v.), örnek bir amcaydı. (D)
91. (D/Y) Hz. Muhammed (s.a.v.), örnek bir dedeydi. (D)
92. (D/Y) Hz. Muhammed (s.a.v.), örnek bir amcaydı. (D)
93. (D/Y) Hz. Muhammed (s.a.v.), örnek bir dedeydi. (D)
94. (D/Y) Hz. Muhammed (s.a.v.), örnek bir amcaydı. (D)
95. (D/Y) Hz. Muhammed (s.a.v.), örnek bir dedeydi. (D)
96. (D/Y) Hz. Muhammed (s.a.v.), örnek bir amcaydı. (D)
97. (D/Y) Hz. Muhammed (s.a.v.), örnek bir dedeydi. (D)
98. (D/Y) Hz. Muhammed (s.a.v.), örnek bir amcaydı. (D)
99. (D/Y) Hz. Muhammed (s.a.v.), örnek bir dedeydi. (D)
100. (D/Y) Hz. Muhammed (s.a.v.), örnek bir amcaydı. (D)

5. ÜNİTE: İSLAM DÜŞÜNCESİNDE YORUMLAR - 100 SORU
A. TEST SORULARI (50 Soru)
1. İslam düşüncesinde ortaya çıkan farklı yorumların temel sebebi aşağıdakilerden hangisidir?
A) Kur’an’ın anlaşılmaz olması
B) Peygamberin açıklamalarının yetersiz olması
C) İnsanların farklı anlama ve yorumlama kapasiteleri
D) İslam’ın eksik bir din olması
Cevap: C
2. İslam düşüncesindeki yorum farklılıkları, dinin hangi özelliğini gösterir?
A) Statik olduğunu
B) Evrensel ve zengin olduğunu
C) Sadece belirli bir topluma hitap ettiğini
D) Eksik olduğunu
Cevap: B
3. İslam düşüncesinde inanç esaslarını inceleyen ilim dalına ne ad verilir?
A) Fıkıh
B) Kelam
C) Tasavvuf
D) Hadis
Cevap: B
4. İslam düşüncesinde ibadet ve hukuki konuları inceleyen ilim dalına ne ad verilir?
A) Kelam
B) Tasavvuf
C) Fıkıh
D) Hadis
Cevap: C
5. İslam düşüncesinde ahlaki ve manevi konuları inceleyen ilim dalına ne ad verilir?
A) Fıkıh
B) Kelam
C) Tasavvuf
D) Hadis
Cevap: C
6. Aşağıdakilerden hangisi inançla ilgili yorumlardan (itikadi mezhepler) biri değildir?
A) Eşarilik
B) Maturidilik
C) Hanefilik
D) Selefilik
Cevap: C
7. İmam Ebu Hanife’nin görüşleri etrafında oluşan fıkhi mezhep aşağıdakilerden hangisidir?
A) Şafilik
B) Malikilik
C) Hanefilik
D) Hanbelilik
Cevap: C
8. İmam Şafii’nin görüşleri etrafında oluşan fıkhi mezhep aşağıdakilerden hangisidir?
A) Hanefilik
B) Malikilik
C) Şafilik
D) Hanbelilik
Cevap: C
9. İmam Malik’in görüşleri etrafında oluşan fıkhi mezhep aşağıdakilerden hangisidir?
A) Hanefilik
B) Malikilik
C) Şafilik
D) Hanbelilik
Cevap: B
10. İmam Ahmed b. Hanbel’in görüşleri etrafında oluşan fıkhi mezhep aşağıdakilerden hangisidir?
A) Hanefilik
B) Malikilik
C) Şafilik
D) Hanbelilik
Cevap: D
11. Aşağıdakilerden hangisi tasavvufi yorumlardan biri değildir?
A) Yesevilik
B) Mevlevilik
C) Nakşibendilik
D) Şafilik
Cevap: D
12. Hoca Ahmed Yesevi’nin kurduğu tasavvufi yorum aşağıdakilerden hangisidir?
A) Mevlevilik
B) Nakşibendilik
C) Yesevilik
D) Kadirilik
Cevap: C
13. Mevlana Celaleddin-i Rumi’nin kurduğu tasavvufi yorum aşağıdakilerden hangisidir?
A) Yesevilik
B) Nakşibendilik
C) Mevlevilik
D) Kadirilik
Cevap: C
14. Hacı Bektaş Veli’nin görüşleri etrafında oluşan tasavvufi yorum aşağıdakilerden hangisidir?
A) Yesevilik
B) Mevlevilik
C) Bektaşilik
D) Nakşibendilik
Cevap: C
15. İslam düşüncesindeki yorum farklılıklarının faydalarından biri aşağıdakilerden hangisidir?
A) Dini daraltır.
B) Dinin statik olduğunu gösterir.
C) Dinin farklı coğrafya ve kültürlere uyumunu sağlar.
D) Müslümanlar arasında ayrımcılığı artırır.
Cevap: C
16. Aşağıdakilerden hangisi İslam düşüncesindeki yorum farklılıklarının sebeplerinden biri değildir?
A) İnsanların anlama kapasitelerinin farklı olması
B) Coğrafi ve kültürel farklılıklar
C) Siyasi çekişmeler
D) Dinin eksik olması
Cevap: D
17. İmam Maturidi’nin görüşleri etrafında oluşan itikadi mezhep aşağıdakilerden hangisidir?
A) Eşarilik
B) Maturidilik
C) Hanefilik
D) Selefilik
Cevap: B
18. İmam Ebu’l-Hasan el-Eş’ari’nin görüşleri etrafında oluşan itikadi mezhep aşağıdakilerden hangisidir?
A) Maturidilik
B) Eşarilik
C) Hanefilik
D) Selefilik
Cevap: B
19. Tasavvufi yorumların amacı aşağıdakilerden hangisidir?
A) Siyasi güç elde etmek
B) Maddi zenginlik kazanmak
C) Nefsi terbiye ederek Allah’a yaklaşmak
D) Toplumsal karmaşa yaratmak
Cevap: C
20. “Divan-ı Hikmet” adlı eser kime aittir?
A) Mevlana Celaleddin-i Rumi
B) Hoca Ahmed Yesevi
C) Hacı Bektaş Veli
D) Yunus Emre
Cevap: B

B. DOĞRU-YANLIŞ SORULARI (50 Soru)
31. (D/Y) İmam Ebu’l-Hasan el-Eş’ari, Eşarilik mezhebinin kurucusudur. (D)
32. (D/Y) Fıkhi mezhepler, inanç esaslarını inceler. (Y)
33. (D/Y) Hanefilik mezhebi, Arabistan Yarımadası’nda yaygındır. (Y)
34. (D/Y) Şafilik mezhebi, Türkiye’de yaygın olan bir fıkhi mezheptir. (Y)
35. (D/Y) Malikilik mezhebi, Endonezya ve Malezya’da yaygındır. (Y)
36. (D/Y) Hanbelilik mezhebi, Kuzey Afrika’da yaygındır. (Y)
37. (D/Y) Tasavvufi yorumların amacı, siyasi güç elde etektir. (Y)
38. (D/Y) Divan-ı Hikmet, Hoca Ahmed Yesevi’nin en önemli eseridir. (D)
39. (D/Y) Mesnevi, Mevlana Celaleddin-i Rumi’nin en önemli eseridir. (D)
40. (D/Y) Makalat, Hacı Bektaş Veli’nin en önemli eseridir. (D)
41. (D/Y) İslam düşüncesindeki yorum farklılıkları, Müslümanların dünya görüşünü daraltır. (Y)
42. (D/Y) İslam düşüncesindeki yorum farklılıkları, dinin statik olduğunu gösterir. (Y)
43. (D/Y) İslam düşüncesindeki yorum farklılıkları, dinin evrenselliğini ve zenginliğini gösterir. (D)
44. (D/Y) Kelam ilmi, ibadet ve hukuki konuları inceler. (Y)
45. (D/Y) Fıkıh ilmi, inanç esaslarını inceler. (Y)
46. (D/Y) Tasavvuf ilmi, ahlaki ve manevi konuları inceler. (D)
47. (D/Y) Maturidilik, fıkhi bir mezheptir. (Y)
48. (D/Y) Şafilik, itikadi bir mezheptir. (Y)
49. (D/Y) Yesevilik, tasavvufi bir yorumdur. (D)
50. (D/Y) Mevlevilik, fıkhi bir mezheptir. (Y)
51. (D/Y) İslam düşüncesindeki farklılıklar, İslam’ın kolaylığını gösterir. (D)
52. (D/Y) Yorum farklılıkları, Müslümanların birbirine düşman olmasını sağlar. (Y)
53. (D/Y) İtikadi mezhepler, akaid konularını inceler. (D)
54. (D/Y) Fıkhi mezhepler, ameli konuları inceler. (D)
55. (D/Y) Tasavvufi yorumlar, nefis terbiyesini hedefler. (D)
56. (D/Y) İmam Maturidi, Semerkant’ta yaşamıştır. (D)
57. (D/Y) İmam Ebu’l-Hasan el-Eş’ari, Basra’da yaşamıştır. (D)
58. (D/Y) Hanefilik, günümüzde en yaygın fıkhi mezheptir. (D)
59. (D/Y) Şafilik, özellikle Mısır ve Endonezya’da yaygındır. (D)
60. (D/Y) Malikilik, Kuzey Afrika’da yaygındır. (D)
61. (D/Y) Hanbelilik, Suudi Arabistan’da yaygındır. (D)
62. (D/Y) Hoca Ahmed Yesevi, Türkistan’da yaşamıştır. (D)
63. (D/Y) Mevlana Celaleddin-i Rumi, Konya’da yaşamıştır. (D)
64. (D/Y) Hacı Bektaş Veli, Anadolu’da yaşamıştır. (D)
65. (D/Y) İslam düşüncesindeki yorum farklılıkları, dinin evrenselliğini gösterir. (D)
66. (D/Y) Yorum farklılıkları, İslam’ın zenginliğini gösterir. (D)
67. (D/Y) İtikadi mezhepler, inanç birliğini bozar. (Y)
68. (D/Y) Fıkhi mezhepler, ibadetlerde kolaylık sağlar. (D)
69. (D/Y) Tasavvufi yorumlar, ahlaki gelişimi hedefler. (D)
70. (D/Y) İmam Maturidi, akla önem vermiştir. (D)
71. (D/Y) İmam Ebu’l-Hasan el-Eş’ari, nakle önem vermiştir. (D)
72. (D/Y) Hanefilik, rey (görüş) ve kıyasa önem vermiştir. (D)
73. (D/Y) Şafilik, sünnete önem vermiştir. (D)
74. (D/Y) Malikilik, Medine halkının uygulamalarına önem vermiştir. (D)
75. (D/Y) Hanbelilik, hadislere sıkı sıkıya bağlı kalmıştır. (D)
76. (D/Y) Hoca Ahmed Yesevi, Divan-ı Hikmet’i yazmıştır. (D)
77. (D/Y) Mevlana Celaleddin-i Rumi, Mesnevi’yi yazmıştır. (D)
78. (D/Y) Hacı Bektaş Veli, Makalat’ı yazmıştır. (D)
79. (D/Y) İslam düşüncesindeki yorum farklılıkları, Müslümanların birbirini anlamasını zorlaştırır. (Y)
80. (D/Y) Yorum farklılıkları, İslam medeniyetinin gelişimine katkıda bulunmuştur. (D)
81. (D/Y) İtikadi mezhepler, dinin temel prensiplerinde ayrılık gösterir. (Y)
82. (D/Y) Fıkhi mezhepler, ibadetlerin farklı şekillerde yapılmasını sağlar. (D)
83. (D/Y) Tasavvufi yorumlar, kişinin iç dünyasını zenginleştirir. (D)
84. (D/Y) İmam Maturidi, Ehl-i Sünnet’in önemli temsilcilerindendir. (D)
85. (D/Y) İmam Ebu’l-Hasan el-Eş’ari, Ehl-i Sünnet’in önemli temsilcilerindendir. (D)
86. (D/Y) Hanefilik, Irak bölgesinde ortaya çıkmıştır. (D)
87. (D/Y) Şafilik, Mısır bölgesinde ortaya çıkmıştır. (D)
88. (D/Y) Malikilik, Medine bölgesinde ortaya çıkmıştır. (D)
89. (D/Y) Hanbelilik, Bağdat bölgesinde ortaya çıkmıştır. (D)
90. (D/Y) Yesevilik, Türkler arasında yaygınlaşmıştır. (D)
91. (D/Y) Mevlevilik, sema ayiniyle bilinir. (D)
92. (D/Y) Bektaşilik, Alevi-Bektaşi geleneğinin bir koludur. (D)
93. (D/Y) İslam düşüncesindeki yorum farklılıkları, dinin anlaşılmasını kolaylaştırır. (D)
94. (D/Y) Yorum farklılıkları, İslam’ın farklı kültürlerle etkileşimini sağlar. (D)
95. (D/Y) İtikadi mezhepler, Allah’ın varlığı ve birliği konusunda farklı görüşlere sahiptir. (Y)
96. (D/Y) Fıkhi mezhepler, namazın kılınış şekli gibi konularda farklılık gösterebilir. (D)
97. (D/Y) Tasavvufi yorumlar, kişinin Allah’a olan sevgisini artırmayı hedefler. (D)
98. (D/Y) İmam Maturidi, akıl ve nakil dengesini savunmuştur. (D)
99. (D/Y) İmam Ebu’l-Hasan el-Eş’ari, nakli ön planda tutmuştur. (D)
100. (D/Y) İslam düşüncesindeki yorum farklılıkları, dinin dinamik olduğunu gösterir. (D)
`;


        // Initial setup on page load
        window.onload = async function() { 
            // Assign DOM elements here to ensure they are loaded
            participantManagementScreen = document.getElementById('participant-management-screen');
            leaderboardContainer = document.getElementById('leaderboard-container');
            newParticipantNameInputMain = document.getElementById('new-participant-name-input-main');
            addNewParticipantMainButton = document.getElementById('add-new-participant-main-button');
            showRegisteredUsersButton = document.getElementById('show-registered-users-button');
            startOverButton = document.getElementById('start-over-button'); // Assign new button
            unitSelectionScreen = document.getElementById('unit-selection-screen');
            gameModeSelectionScreen = document.getElementById('game-mode-selection-screen');
            gameModeMessage = document.getElementById('game-mode-message');
            gamePanel = document.getElementById('game-panel');
            scoreBoardContainer = document.getElementById('score-board-container');
            currentParticipantDisplay = document.getElementById('current-participant-display');
            quizContentContainer = document.getElementById('quiz-content');
            questionContainer = document.getElementById('current-question-container');
            feedbackDiv = document.getElementById('current-question-feedback');
            overallResultDiv = document.getElementById('overall-result'); 
            finalScoreContainer = document.getElementById('final-score-container');
            resetGameButton = document.getElementById('reset-game-button');
            questionCounterDisplay = document.getElementById('question-counter');
            questionNavigationContainer = document.getElementById('question-navigation');
            timerDisplay = document.getElementById('timer-display');
            gridInstructionMessage = document.getElementById('grid-instruction-message'); 
            questionScreenInstructionMessage = document.getElementById('question-screen-instruction-message'); 
            fullscreenOverlay = document.getElementById('fullscreen-overlay');
            returnToMainMenuGridButton = document.getElementById('return-to-main-menu-grid-button');
            returnToQuestionGridButton = document.getElementById('return-to-question-grid-button');
            finalParticipantScoresDisplay = document.getElementById('final-participant-scores-display');
            goToMainSiteButton = document.getElementById('go-to-main-site-button');
            participantSelectionModal = document.getElementById('participant-selection-modal');
            existingParticipantsButtonsContainer = document.getElementById('existing-participants-buttons');
            selectExistingParticipantButton = document.getElementById('select-existing-participant-button');
            editSelectedParticipantButton = document.getElementById('edit-selected-participant-button'); // Assign new edit button
            nextTurnButton = document.getElementById('next-turn-button');
            teamSetupModal = document.getElementById('team-setup-modal');
            numTeamsInput = document.getElementById('num-teams-input');
            teamNameInputsContainer = document.getElementById('team-name-inputs-container');
            confirmResetModal = document.getElementById('confirm-reset-modal'); // Assign new modal
            confirmResetYesButton = document.getElementById('confirm-reset-yes'); // Assign new buttons
            confirmResetNoButton = document.getElementById('confirm-reset-no'); // Assign new buttons
            editParticipantModal = document.getElementById('edit-participant-modal'); // Assign new edit modal
            editParticipantNameInput = document.getElementById('edit-participant-name-input'); // Assign new input
            editParticipantScoreInput = document.getElementById('edit-participant-score-input'); // Assign new score input
            editParticipantErrorMessage = document.getElementById('edit-participant-error-message'); // Assign new error message
            editParticipantScoreErrorMessage = document.getElementById('edit-participant-score-error-message'); // Assign new score error message

            // Use hardcoded content instead of fetching DOCX
            const docxContent = hardcodedDocxContent;
            
            const { parsedUnitQuestions, parsedUnitTitles } = parseDocxContent(docxContent);
            Object.assign(unitQuestions, parsedUnitQuestions); // Populate global unitQuestions
            Object.assign(unitTitles, parsedUnitTitles); // Populate global unitTitles

            // *** DEBUGGING: Log parsed data ***
            console.log('Parsed Unit Titles:', unitTitles);
            console.log('Parsed Unit Questions:', unitQuestions);

            // Dynamically create unit selection buttons
            const unitSelectionButtonsContainer = unitSelectionScreen.querySelector('.selection-buttons');
            unitSelectionButtonsContainer.innerHTML = ''; // Clear existing buttons
            for (const unitId in unitTitles) {
                const button = document.createElement('button');
                button.classList.add('action-button');
                // Extract unit number from unitId (e.g., 'unit1' -> '1')
                const unitNumber = unitId.replace('unit', '');
                button.textContent = `Ünite ${unitNumber}: ${unitTitles[unitId]}`; // Add unit number
                button.onclick = () => selectUnit(unitId);
                unitSelectionButtonsContainer.appendChild(button);
            }

            // Load teams and game state
            loadTeams();
            loadGameState();

            // Initially show participant management screen and hide all others
            participantManagementScreen.classList.remove('hidden');
            unitSelectionScreen.classList.add('hidden');
            gameModeSelectionScreen.classList.add('hidden');
            gamePanel.classList.add('hidden');
            questionCounterDisplay.classList.add('hidden');
            returnToQuestionGridButton.classList.add('hidden');
            nextTurnButton.classList.add('hidden');
            teamSetupModal.classList.add('hidden');
            confirmResetModal.classList.add('hidden'); // Ensure confirmation modal is hidden
            editParticipantModal.classList.add('hidden'); // Ensure edit participant modal is hidden
            
            setGameBackground('general');
            renderLeaderboard(); // Render leaderboard on initial load
            applyButtonColors();

            // Initialize Tone.js synthesizers
            correctSynth = new Tone.Synth().toDestination();
            incorrectSynth = new Tone.Synth().toDestination();
            timerSynth = new Tone.Synth().toDestination();

            // Add event listeners for "Siteye Dön" buttons
            const allGoToSiteButtons = document.querySelectorAll('[id^="go-to-main-site-button"]');
            allGoToSiteButtons.forEach(button => {
                button.addEventListener('click', () => {
                    window.location.href = 'https://ozeme42.github.io/yunus/index.html';
                });
            });

            // Add event listeners for modal close buttons
            document.getElementById('close-participant-modal').addEventListener('click', window.hideParticipantSelectionModal); // Call the global function
            document.getElementById('close-team-modal').addEventListener('click', window.hideTeamSetupModal); // Call the global function
            document.getElementById('close-reset-modal').addEventListener('click', window.hideResetConfirmation); // Close button for reset modal
            document.getElementById('close-edit-participant-modal').addEventListener('click', window.hideEditParticipantModal); // Close button for edit participant modal

            // Add event listener for the new "Düzenle" button in the participant selection modal
            if (editSelectedParticipantButton) {
                editSelectedParticipantButton.addEventListener('click', () => {
                    if (selectedParticipantIdInModal) {
                        window.showEditParticipantModal(selectedParticipantIdInModal);
                    }
                });
            }
        };
    </script>
</head>
<body>
    <div id="fullscreen-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden opacity-0 transition-opacity duration-300"></div>

    <div id="participant-selection-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button id="close-participant-modal" class="modal-close-button">✖</button>
            <h3>Kayıtlı Katılımcı Seçimi</h3>
            <div id="existing-participants-buttons" class="mb-4">
                </div>
            <div class="button-group mt-6">
                <button id="select-existing-participant-button" class="action-button" onclick="selectExistingParticipant()">Seç ve Başla</button>
                <button id="edit-selected-participant-button" class="action-button" disabled>Düzenle</button> <button id="cancel-participant-selection-button" class="action-button" onclick="window.hideParticipantSelectionModal()">İptal Et</button>
            </div>
        </div>
    </div>

    <div id="edit-participant-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button id="close-edit-participant-modal" class="modal-close-button">✖</button>
            <h3>Katılımcı Adını Düzenle</h3>
            <label for="edit-participant-name-input" class="block text-gray-700 text-base font-medium mb-1 text-left">Adı:</label>
            <input type="text" id="edit-participant-name-input" class="edit-participant-modal-input" placeholder="Yeni Katılımcı Adı">
            <p id="edit-participant-error-message" class="text-red-500 text-sm mt-0 mb-2 text-left hidden"></p>

            <label for="edit-participant-score-input" class="block text-gray-700 text-base font-medium mb-1 text-left">Puanı:</label>
            <input type="number" id="edit-participant-score-input" class="edit-participant-modal-input" placeholder="Yeni Puan">
            <p id="edit-participant-score-error-message" class="text-red-500 text-sm mt-0 mb-2 text-left hidden"></p>

            <div class="button-group mt-6">
                <button id="save-edit-participant-button" class="action-button" onclick="saveEditedParticipantName()">Kaydet</button>
                <button id="cancel-edit-participant-button" class="action-button" onclick="cancelEditParticipantName()">İptal Et</button>
            </div>
        </div>
    </div>

    <div id="team-setup-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button id="close-team-modal" class="modal-close-button">✖</button>
            <h3>Takım Ayarları</h3>
            <label for="num-teams-input" class="block text-gray-700 text-lg font-medium mb-2">Takım Sayısı (2-10):</label>
            <input type="number" id="num-teams-input" class="w-full p-2 border rounded mb-4" min="2" max="10" value="2" onchange="generateTeamNameInputs()">
            <div class="button-group mb-4">
                <button id="generate-team-names-button" class="action-button" onclick="generateTeamNameInputs()">İsimleri Oluştur</button>
            </div>
            <div id="team-name-inputs-container" class="team-name-inputs">
                </div>
            <div class="button-group mt-6">
                <button id="submit-team-setup-button" class="action-button" onclick="submitTeamSetup()">Oyuna Başla</button>
                <button id="cancel-team-setup-button" class="action-button" onclick="window.returnToUnitSelection()">İptal Et</button>
            </div>
        </div>
    </div>

    <div id="confirm-reset-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button id="close-reset-modal" class="modal-close-button">✖</button>
            <h3>Oyunu Baştan Başlat</h3>
            <p class="text-gray-700 text-xl mb-6">Tüm kayıtlı öğrenci verileri ve puanları silinecektir. Emin misiniz?</p>
            <div class="button-group">
                <button id="confirm-reset-yes" class="action-button" onclick="confirmResetGame()">Evet, Eminim</button>
                <button id="confirm-reset-no" class="action-button" onclick="hideResetConfirmation()">Hayır, İptal Et</button>
            </div>
        </div>
    </div>

    <div class="container">
        <h1>Din Kültürü ve Ahlak Bilgisi Bilgi Yarışması</h1>

        <div id="participant-management-screen" class="player-selection-screen">
            <div id="leaderboard-container" class="score-table-container">
                </div>

            <div class="w-full max-w-lg">
                <input type="text" id="new-participant-name-input-main" class="w-full p-3 border-2 border-gray-300 rounded-lg text-lg mb-4 focus:outline-none focus:border-blue-500" placeholder="Yeni Öğrenci Adı">
                <div class="flex justify-center gap-4 mb-4">
                    <button id="add-new-participant-main-button" class="action-button flex-1 main-action-button" onclick="addNewParticipantAndProceed()">Yeni Öğrenci Ekle ve Başla</button>
                    <button id="show-registered-users-button" class="action-button flex-1 main-action-button" onclick="showRegisteredUsersScreen()">Kayıtlı Öğrenci Seç</button>
                </div>
            </div>
            <div class="button-group mt-8 w-full max-w-2xl mx-auto">
                <button id="start-over-button" class="action-button flex-1" onclick="showResetConfirmation()">Baştan Başla</button>
                <button id="go-to-main-site-button" class="action-button flex-1" onclick="window.location.href = 'https://ozeme42.github.io/yunus/index.html';">Siteye Dön</button>
            </div>
        </div>

        <div id="unit-selection-screen" class="player-selection-screen hidden">
            <h2>Ünite Seçimi</h2>
            <div class="selection-buttons">
                </div>
            <button id="return-to-participant-management-from-unit" class="action-button mt-8" onclick="returnToParticipantManagement()">Geri Dön</button>
        </div>

        <div id="game-mode-selection-screen" class="player-selection-screen hidden">
            <h2>Oyun Modu Seçimi</h2>
            <div class="selection-buttons">
                <button id="individual-mode-button" class="action-button" onclick="selectGameMode('individual')">Bireysel Oyna</button>
                <button id="team-mode-button" class="action-button" onclick="selectGameMode('team')">Takımlı Oyna</button>
            </div>
            <p id="game-mode-message" class="text-red-500 font-bold mt-4 hidden"></p>
            <button id="return-to-unit-selection-button" class="action-button mt-8" onclick="window.returnToUnitSelection()">Ünite Seçimine Dön</button>
        </div>

        <div id="game-panel" class="hidden">
            <div id="score-board-container" class="score-table-container">
                </div>
            <div id="current-participant-display" class="current-participant-display">Sıra: Katılımcı Seçin</div>

            <div id="grid-instruction-message" class="text-center text-md font-medium text-gray-700 mb-4"></div>
            <div id="question-navigation" class="question-navigation">
                </div>
            
            <div class="button-group mt-4" id="question-grid-buttons">
                <button id="return-to-main-menu-grid-button" class="action-button" onclick="returnToMainMenu()">Ana Sayfaya Dön</button>
                <button id="go-to-main-site-button-grid" class="action-button" onclick="window.location.href = 'https://ozeme42.github.io/yunus/index.html';">Siteye Dön</button>
            </div>

            <div id="quiz-content" class="hidden">
                <div class="question-area">
                    <div id="question-counter" class="question-counter"></div>
                    <div id="timer-display" class="timer-display hidden"></div>
                    <div id="current-question-container" class="question-block">
                        </div>
                </div>
                <div id="current-question-feedback" class="feedback-message"></div>
                <div class="button-group mt-4">
                    <button id="next-turn-button" class="action-button next-button hidden" onclick="moveToNextTurn()">Sonraki Oyuncu</button>
                    <button id="return-to-question-grid-button" class="action-button return-button" onclick="window.returnToQuestionsGrid()">Soru Ekranına Dön</button>
                </div>
                <div id="question-screen-instruction-message" class="text-center text-md font-medium text-gray-700 mt-2 hidden"></div>
            </div>

            <div id="final-score-container" class="hidden">
                <div id="overall-result" class="feedback-message"></div>
                <div id="final-participant-scores-display" class="score-table-container"></div>
                <button id="reset-game-button" class="action-button" onclick="resetGame()">Yeniden Başla</button>
                <button id="return-to-main-menu-from-final-button" class="action-button mt-4" onclick="returnToMainMenu()">Ana Sayfaya Dön</button>
                <button id="go-to-main-site-button-final" class="action-button mt-4" onclick="window.location.href = 'https://ozeme42.github.io/yunus/index.html';">Siteye Dön</button>
            </div>
        </div>
    </div>
</body>
</html>
