<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peygamberimizin Hayatı - Kavram Bilgi Yarışması</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Temel stil tanımlamaları */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #e0f2f7; /* Açık mavi arka plan */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* Ekran yüksekliğinin tamamını kapla */
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            overflow-x: hidden; /* Yatay kaydırmayı engelle, mobil uyumluluk için kritik */
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
        .container {
            background-color: #ffffff;
            border-radius: 0;
            box-shadow: none;
            max-width: 100%; /* Her zaman ekran genişliğine uyum sağlar */
            width: 100%;
            height: 100vh; /* Mobil cihazlarda dikey alanı kaplar */
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem; /* Esnek boşluklar */
            padding: 2.5rem 1rem; /* Mobil cihazlar için uygun padding */
            box-sizing: border-box;
            overflow-y: auto; /* İçerik taştığında dikey kaydırmaya izin verir */
            padding-top: 2rem;
        }
        .concept-box {
            min-width: 120px;
            max-width: 200px;
            min-height: 110px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #000000;
            font-size: 1.05rem; /* Esnek font boyutu */
            font-weight: bold;
            border-radius: 9999px;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out, border-color 0.2s ease-in-out, background-color 0.2s ease-in-out, opacity 0.5s ease-in-out; /* Opaklık geçişi eklendi */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            border: 3px solid transparent;
            cursor: pointer;
            position: relative;
            animation: bubbleFloat var(--animation-duration) ease-in-out var(--animation-delay) infinite alternate;
        }
        .concept-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: inherit;
            background: radial-gradient(circle at 25% 25%, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0) 70%);
            pointer-events: none;
            z-index: 1;
        }
        .concept-box span {
            position: relative;
            z-index: 2;
            padding: 0.75rem 1rem;
            text-align: center;
            word-break: break-word;
            overflow-wrap: break-word;
            line-height: 1.2;
            display: block;
        }

        .concept-box:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        /* Görsel Geri Bildirim Stilleri */
        .concept-box.correct {
            background-color: #d4edda; /* Açık yeşil */
            border-color: #28a745; /* Koyu yeşil */
            animation: fadeAndScaleIn .3s ease-out;
        }

        .concept-box.incorrect {
            background-color: #f8d7da; /* Açık kırmızı */
            border-color: #dc3545; /* Koyu kırmızı */
            animation: shake .3s ease-out;
        }

        /* Animasyonlar */
        @keyframes fadeAndScaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        .quiz-area {
            width: 100%;
            max-width: none; /* Sabit genişlik yerine esnek genişlik */
            text-align: left;
            background: linear-gradient(to right, #A8D8FF, #4D94FF);
            border: 3px dashed #67a9cf;
            border-radius: 1rem;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        .question-line {
            display: flex;
            flex-direction: column;
            align-items: center; /* Soru metnini yatayda ortala */
            margin-bottom: 1.5rem;
            width: 100%;
            text-align: center; /* Metni kendi içinde ortala */
        }
        .question-line h2 {
            margin-right: 0.5rem;
            margin-bottom: 0;
            flex-shrink: 0;
            font-size: 2.25rem;
            display: none; /* "Tanım:" etiketini gizle */
        }
        .question-line p {
            flex-grow: 1;
            margin-bottom: 0;
            font-size: 1.5rem; /* Esnek font boyutu */
            text-align: center; /* Paragraf metnini ortala */
        }

        .message-box {
            padding: 1rem;
            border-radius: 0.75rem;
            margin-top: 1rem;
            font-weight: 600;
            text-align: center;
            width: 100%;
        }
        .message-box.success {
            background-color: #d1fae5;
            color: #065f46;
        }
        .message-box.error {
            background-color: #fee2e2;
            color: #991b1b;
        }
        .action-button {
            background-color: #3b82f6;
            color: white;
            padding: 0.75rem 1.5rem; /* Dokunmatik hedefler için uygun boyut */
            border-radius: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            width: 100%; /* Mobil cihazlarda tam genişlik */
        }
        .action-button:hover {
            background-color: #2563eb;
            transform: translateY(-1px);
        }
        .action-button:active {
            transform: translateY(0);
        }
        .button-group {
            display: flex;
            flex-direction: column; /* Mobil cihazlarda butonları alt alta sırala */
            gap: 1rem; /* Esnek boşluklar */
            width: 100%;
            max-width: none;
            margin-top: 2rem;
            margin-bottom: 1rem;
            justify-content: center;
        }
        @media (min-width: 640px) { /* Geniş ekranlarda butonları yan yana sırala */
            .button-group {
                flex-direction: row;
            }
        }
        .button-group .action-button {
            flex: 1;
        }
        .reset-button {
            background-color: #6b7280;
            color: white;
            padding: 0.75rem 1.5rem; /* Dokunmatik hedefler için uygun boyut */
            border-radius: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
            width: 100%; /* Mobil cihazlarda tam genişlik */
            max-width: none;
        }
        .reset-button:hover {
            background-color: #4b5563;
        }

        /* Kavram kutuları için duyarlı ızgara */
        .concept-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr); /* Varsayılan olarak 5 sütun (10 eleman için 2 sıra) */
            justify-content: center;
            gap: 1rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Zamanlayıcı stili */
        #timerDisplay {
            font-size: 1.5rem;
            font-weight: bold;
            color: #3b82f6;
            position: absolute;
            bottom: 1rem;
            left: 1rem;
            text-align: center;
            padding: 0.5rem 1rem;
            background-color: transparent;
            border-radius: 0.5rem;
            box-shadow: none;
            z-index: 10;
        }
        #timerDisplay.warning {
            color: #EF4444;
        }

        /* Onay işareti stili (şu an kullanılmıyor ama gelecekteki geliştirmeler için bırakıldı) */
        .concept-box .checkmark {
            position: absolute;
            bottom: 5px;
            right: 5px;
            width: 24px;
            height: 24px;
            color: white;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        .concept-box.correct .checkmark {
            opacity: 1;
        }

        /* Duyarlı sütun ayarlamaları (mobil öncelikli) */
        @media (max-width: 1200px) {
            .concept-grid {
                grid-template-columns: repeat(4, 1fr); /* 1200px altı için 4 sütun */
            }
        }
        @media (max-width: 992px) {
            .concept-grid {
                grid-template-columns: repeat(3, 1fr); /* 992px altı için 3 sütun */
            }
        }
        @media (max-width: 768px) {
            .concept-grid {
                grid-template-columns: repeat(2, 1fr); /* 768px altı için 2 sütun */
            }
            /* Mobil cihazlar için kavram kutusu boyutlarını küçült */
            .concept-box {
                min-width: 90px; /* Daha küçük minimum genişlik */
                max-width: 150px; /* Daha küçük maksimum genişlik */
                min-height: 80px; /* Daha küçük minimum yükseklik */
                font-size: 0.9rem; /* Daha küçük font boyutu */
                padding: 0.5rem 0.75rem; /* Daha küçük padding */
            }
            .concept-box span {
                padding: 0.5rem 0.75rem; /* İç metin padding'i */
            }
        }
        @media (max-width: 480px) {
            .concept-grid {
                grid-template-columns: repeat(1, 1fr); /* 480px altı (mobil) için tek sütun */
            }
            /* Çok küçük mobil ekranlar için kavram kutusu boyutlarını daha da küçült */
            .concept-box {
                min-width: 80px;
                max-width: 120px;
                min-height: 70px;
                font-size: 0.8rem;
                padding: 0.4rem 0.6rem;
            }
            .concept-box span {
                padding: 0.4rem 0.6rem;
            }
        }


        /* Baloncuk animasyonu tanımı */
        @keyframes bubbleFloat {
            0% { transform: translate(0px, 0px) scale(1); opacity: 0.9; }
            50% { transform: translate(var(--translate-x), var(--translate-y)) scale(1.02); opacity: 0.95; }
            100% { transform: translate(0px, 0px) scale(1); opacity: 0.9; }
        }

        /* Ünite seçim ekranı stilleri */
        #mainMenuScreen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            gap: 1.5rem;
            padding: 2rem;
            width: 100%;
            height: 100%;
            background-color: #ffffff;
            border-radius: 1.5rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        /* Ünite ızgarası için duyarlı stil */
        .unit-grid {
            display: grid;
            /* Ekran genişliğine göre otomatik sütun sayısı, her sütun minimum 180px */
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1.5rem;
            width: 90%; /* Yüzde tabanlı genişlik */
            max-width: 1400px; /* Daha geniş ekranlar için maksimum genişliği artır */
            justify-items: center;
            margin: 0 auto;
            flex-grow: 1;
            align-items: center;
        }
        .unit-card {
            padding: 1.5rem;
            border-radius: 1rem;
            width: 100%;
            aspect-ratio: 4/3; /* En boy oranını koru */
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            font-size: 1.25rem; /* Varsayılan font boyutu */
            font-weight: 600;
            color: #333;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            border: 2px solid rgba(0,0,0,0.1);
            overflow-wrap: break-word; /* Uzun başlıkların kelime bazında satır atlamasını sağlar */
        }
        /* Mobil cihazlar için ünite kartı font boyutu ayarlaması */
        @media (max-width: 480px) {
            .unit-card {
                font-size: 0.95rem; /* Daha küçük ekranlarda font boyutunu küçült */
                padding: 1rem; /* Daha küçük padding */
            }
        }
        .unit-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        .unit-card.selected {
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.6), 0 0 0 3px #3b82f6;
            border-color: #3b82f6;
        }
        .main-quiz-content {
            display: none;
            width: 100%;
            height: 100%;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
        }

        /* Özel Modal Stilleri */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            width: 90%; /* Mobil uyumluluk için yüzde tabanlı genişlik */
            max-width: 500px;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        .modal-content h4 {
            font-size: 1.5rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 0.5rem;
        }
        .modal-content input[type="text"],
        .modal-content textarea {
            padding: 0.75rem;
            border-radius: 0.5rem;
            border: 1px solid #ccc;
            font-size: 1rem;
            width: 100%;
        }
        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }
        .modal-buttons button {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
        }
        .modal-save-btn {
            background-color: #3b82f6;
            color: white;
        }
        .modal-save-btn:hover {
            background-color: #2563eb;
        }
        .modal-cancel-btn {
            background-color: #6b7280;
            color: white;
        }
        .modal-cancel-btn:hover {
            background-color: #4b5563;
        }
        .modal-confirm-btn {
            background-color: #f44336;
            color: white;
        }
        .modal-confirm-btn:hover {
            background-color: #da190b;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 id="mainTitle" class="text-4xl font-bold text-gray-800 mb-6">Peygamberimizin Hayatı<br>Kavram Bilgi Yarışması</h1>

        <div id="mainMenuScreen">
            <div id="unitCardsContainer" class="unit-grid">
                </div>
            <button id="startQuizBtn" class="action-button px-8 py-3 text-xl" style="display: none;">Yarışmayı Başlat</button>
            <button id="returnToHomePageBtn" class="action-button bg-purple-600 hover:bg-purple-700 mt-4 px-8 py-3 text-xl">Ana Sayfaya Dön</button>
        </div>

        <div id="mainQuizContent" class="main-quiz-content">
            <div id="quizArea" class="quiz-area">
                <div class="question-line">
                    <p id="questionText" class="text-xl text-gray-800"></p>
                </div>
                <div id="timerDisplay">50</div>
                <div id="feedback" class="message-box mt-4" style="display: none;"></div>
                </div>

            <div id="conceptBoxes" class="concept-grid w-full justify-items-center">
                </div>

            <div class="button-group">
                <button id="nextQuestionBtn" class="action-button">Sonraki Soru</button>
                <button id="showAnswerBtn" class="action-button bg-orange-500 hover:bg-orange-600">Cevabı Göster</button>
            </div>

            <button id="resetQuizBtn" class="reset-button">Yarışmayı Yeniden Başlat</button>
            <button id="returnToMainMenuFromQuizBtn" class="action-button bg-gray-500 hover:bg-gray-700 mt-4">Ana Menüye Dön</button>
        </div>

    </div>

    <div id="customModalOverlay" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h4 id="modalTitle"></h4>
            <p id="modalMessage" class="text-gray-700"></p>
            <input type="text" id="modalInput1" style="display: none;">
            <input type="text" id="modalInput2" style="display: none;">
            <textarea id="modalTextarea" style="display: none;"></textarea>
            <div class="modal-buttons">
                <button id="modalConfirmBtn" class="modal-confirm-btn" style="display: none;">Evet</button>
                <button id="modalSaveBtn" class="modal-save-btn" style="display: none;">Kaydet</button>
                <button id="modalCancelBtn" class="modal-cancel-btn">İptal</button>
            </div>
        </div>
    </div>

    <script>
        // Ünite ve kavram verileri (Peygamberimizin Hayatı kitabına göre güncellendi)
        let units = [
            {
                id: 'unit1',
                name: 'Ünite 1: Peygamberimizin Gençlik Yılları',
                bgColor: 'bg-blue-100',
                concepts: [
                    { id: 'mekke', name: 'Mekke', color: 'bg-blue-600', questions: [
                        { question: 'Peygamber Efendimiz Hz. Muhammed (s.a.v)\'in Miladi 571 yılında dünyaya geldiği şehir.' },
                        { question: 'Kâbe\'nin bulunduğu ve İslamiyet\'in doğduğu kutsal şehir.' },
                        { question: 'Peygamberimizin doğup büyüdüğü, ilk vahyin geldiği şehir.' }
                    ]},
                    { id: 'fil-vakasi', name: 'Fil Vakası', color: 'bg-green-600', questions: [
                        { question: 'Peygamberimizin doğduğu yıl gerçekleşen ve Kur\'an-ı Kerim\'de Fil Suresi\'nde bahsedilen olay.' },
                        { question: 'Ebrehe\'nin Kâbe\'yi yıkmak için fillerle Mekke\'ye yürümesi olayı.' },
                        { question: 'Allah\'ın Kâbe\'yi korumak için Ebabil kuşlarını gönderdiği mucizevi olay.' }
                    ]},
                    { id: 'abdullah', name: 'Abdullah', color: 'bg-purple-600', questions: [
                        { question: 'Peygamberimizin doğmadan önce vefat eden babasının adı.' },
                        { question: 'Peygamberimizin annesi Hz. Amine\'nin eşi.' },
                        { question: 'Peygamberimizin dedesi Abdülmuttalib\'in oğlu.' }
                    ]},
                    { id: 'amine', name: 'Amine', color: 'bg-red-600', questions: [
                        { question: 'Peygamberimizin annesinin adı.' },
                        { question: 'Peygamberimizi altı yaşına kadar büyüten annesi.' },
                        { question: 'Peygamberimizin babası Abdullah\'ın eşi.' }
                    ]},
                    { id: 'halime', name: 'Halime', color: 'bg-yellow-600', questions: [
                        { question: 'Peygamberimizin sütannesi.' },
                        { question: 'Peygamberimizi dört yaşına kadar yanında büyüten kadın.' },
                        { question: 'Beni Sa\'d kabilesinden olan ve Peygamberimize süt anneliği yapan.' }
                    ]},
                    { id: 'abdulmuttalib', name: 'Abdülmuttalib', color: 'bg-indigo-600', questions: [
                        { question: 'Peygamberimizin dedesi.' },
                        { question: 'Peygamberimizi sekiz yaşına kadar himaye eden kişi.' },
                        { question: 'Kâbe\'nin bakımıyla ilgilenen ve Mekke\'nin ileri gelenlerinden olan.' }
                    ]},
                    { id: 'ebu-talib', name: 'Ebu Talib', color: 'bg-pink-600', questions: [
                        { question: 'Peygamberimizin amcası ve dedesi vefat ettikten sonra onu himaye eden kişi.' },
                        { question: 'Peygamberimizin gençlik yıllarında ticaret kervanlarına götürdüğü amcası.' },
                        { question: 'Hz. Ali\'nin babası olan Peygamberimizin amcası.' }
                    ]},
                    { id: 'cahiliye-donemi', name: 'Cahiliye Dönemi', color: 'bg-teal-600', questions: [
                        { question: 'Arap toplumunda İslam\'dan önceki putperestlik, haksızlık, kan davası, içki, kumar gibi kötü davranışların yaygın olduğu dönem.' },
                        { question: 'İslamiyet öncesi Arap Yarımadası\'nda cehaletin ve ahlaki yozlaşmanın hüküm sürdüğü dönem.' },
                        { question: 'Peygamberimizin risaletiyle sona eren, ahlaki ve sosyal bozuklukların yaşandığı dönem.' }
                    ]},
                    { id: 'hilful-fudul', name: 'Hilfü\'l-Fudûl', color: 'bg-orange-600', questions: [
                        { question: 'Peygamberimizin gençlik yıllarında katıldığı ve haksızlıkların önlenmesi amacıyla kurulan topluluk.' },
                        { question: 'Mekke\'de zulme uğrayanlara yardım etmek için kurulan "Erdemliler Topluluğu".' },
                        { question: 'Peygamberimizin de desteklediği, haksızlığa uğrayanların hakkını savunan antlaşma.' }
                    ]},
                    { id: 'el-emin', name: 'El-Emin', color: 'bg-cyan-600', questions: [
                        { question: 'Mekkelilerin ticaretle uğraşan Peygamberimize dürüstlüğü ve güvenilirliği sebebiyle verdikleri lakap.' },
                        { question: 'Peygamberimizin güvenilirliğini ve emanete sadakatini ifade eden lakap.' },
                        { question: 'Mekke halkı tarafından kendisine verilen "güvenilir kişi" anlamındaki unvan.' }
                    ]},
                    { id: 'hz-hatice', name: 'Hz. Hatice', color: 'bg-lime-600', questions: [
                        { question: 'Peygamberimizin ilk eşi ve kendisine ilk iman eden kişi.' },
                        { question: 'Mekke\'nin zengin ve saygın kadınlarından olup, Peygamberimizle evlenen.' },
                        { question: 'Peygamberimizin tüm çocuklarının annesi (İbrahim hariç).' }
                    ]},
                    { id: 'hira-magarasi', name: 'Hira Mağarası', color: 'bg-emerald-600', questions: [
                        { question: 'Peygamber Efendimizin kırk yaşlarına yaklaştığı sıralarda tefekkür etmek için inzivaya çekildiği yer.' },
                        { question: 'İlk vahyin geldiği ve Peygamberimizin yalnız kalmayı tercih ettiği mağara.' },
                        { question: 'Cebrail\'in Peygamberimize Alak Suresi\'nin ilk ayetlerini getirdiği yer.' }
                    ]},
                    { id: 'ilk-vahiy', name: 'İlk Vahiy', color: 'bg-rose-600', questions: [
                        { question: 'Peygamberimize Alak Suresi\'nin ilk ayetleriyle gelen ilahi mesaj.' },
                        { question: 'Cebrail (a.s)\'ın Hira Mağarası\'nda Peygamberimize getirdiği ilk emir.' },
                        { question: 'Peygamberliğin başlangıcı olan ve "Oku!" emriyle başlayan olay.' }
                    ]},
                    { id: 'cebrail', name: 'Cebrail', color: 'bg-fuchsia-600', questions: [
                        { question: 'Allah\'tan peygamberlere vahiy getirmekle görevli melek.' },
                        { question: 'Hira Mağarası\'nda Peygamberimize ilk vahyi getiren melek.' },
                        { question: 'Vahiy meleği olarak da bilinen büyük melek.' }
                    ]},
                    { id: 'boykot', name: 'Boykot', color: 'bg-violet-600', questions: [
                        { question: 'Mekke\'de Müslümanlara uygulanan ekonomik ve sosyal abluka.' },
                        { question: 'Müşriklerin Müslümanlarla evlenmeyi, alışveriş yapmayı ve görüşmeyi yasakladığı dönem.' },
                        { question: 'Müslümanları dinlerinden döndürmek amacıyla uygulanan toplumsal baskı.' }
                    ]},
                    { id: 'huzun-yili', name: 'Hüzün Yılı', color: 'bg-amber-600', questions: [
                        { question: 'Müslümanlara uygulanan boykottan sonra Peygamberimizin amcası Ebu Talib ve eşi Hz. Hatice\'yi kaybettiği yıl.' },
                        { question: 'Peygamberimizin peş peşe iki büyük destekçisini kaybettiği ve çok üzüldüğü yıl.' },
                        { question: 'İslam tarihinde yaşanan büyük acıların yaşandığı yıl.' }
                    ]},
                    { id: 'taif', name: 'Taif', color: 'bg-sky-600', questions: [
                        { question: 'Peygamberimizin İslam\'ı anlatmak için gittiği ancak taşlanarak geri döndüğü şehir.' },
                        { question: 'Mekke\'nin yakınlarında bulunan ve Peygamberimizin davetini kabul etmeyen şehir.' },
                        { question: 'Peygamberimizin büyük üzüntü yaşadığı davet yolculuğu yaptığı yer.' }
                    ]},
                    { id: 'akabe-biatlari', name: 'Akabe Biatları', color: 'bg-gray-600', questions: [
                        { question: 'Medine\'den gelenlerin Peygamberimizle buluşarak İslam\'ı kabul ettikleri ve ona bağlılık yemini ettikleri yer.' },
                        { question: 'Hicret öncesinde Medinelilerin Peygamberimizle yaptığı gizli antlaşmalar.' },
                        { question: 'İslam\'ın Medine\'ye yayılmasında önemli rol oynayan biatlar.' }
                    ]},
                    { id: 'hicret', name: 'Hicret', color: 'bg-blue-700', questions: [
                        { question: 'Peygamberimizin ve Müslümanların Mekke\'den Medine\'ye göç etmesi olayı.' },
                        { question: 'İslam takviminin başlangıcı kabul edilen büyük göç.' },
                        { question: 'Mekke\'deki baskılardan dolayı dinlerini hürriyetle yaşamak için yapılan yolculuk.' }
                    ]},
                    { id: 'muhacir', name: 'Muhacir', color: 'bg-green-700', questions: [
                        { question: 'Mekke\'den Medine\'ye göç eden Müslümanlara verilen ad.' },
                        { question: 'Dinlerini yaşayabilmek için yurtlarını terk eden Müslümanlar.' },
                        { question: 'Medine\'de Ensar tarafından kardeş edinilen Müslümanlar.' }
                    ]},
                    { id: 'ensar', name: 'Ensar', color: 'bg-red-700', questions: [
                        { question: 'Peygamberimize ve Mekke\'den gelen Müslümanlara (Muhacir) yardım eden Medineli Müslümanlar.' },
                        { question: 'Medine\'de Müslümanlara kucak açan ve onlara destek olan yerli halk.' },
                        { question: 'Yardım edenler anlamına gelen ve Medineli Müslümanlara verilen lakap.' }
                    ]},
                    { id: 'medine-sozlesmesi', name: 'Medine Sözleşmesi', color: 'bg-yellow-700', questions: [
                        { question: 'Peygamberimizin Medine\'de farklı din ve kabilelerden oluşan topluluklar arasında barışı sağlamak için imzaladığı antlaşma.' },
                        { question: 'Medine\'de yaşayan Müslümanlar, Yahudiler ve diğer gruplar arasında yapılan ilk yazılı anayasa niteliğindeki belge.' },
                        { question: 'Peygamberimizin adalet ve hoşgörüsünü gösteren önemli bir belge.' }
                    ]},
                    { id: 'mescid-i-nebi', name: 'Mescid-i Nebi', color: 'bg-purple-700', questions: [
                        { question: 'Peygamberimizin Medine\'ye hicret ettiğinde ilk iş olarak inşa ettiği cami.' },
                        { question: 'Medine\'de bulunan ve Peygamberimizin kabrinin de yer aldığı kutsal cami.' },
                        { question: 'İslam tarihinde ilk üniversite sayılan Suffe\'nin de bulunduğu cami.' }
                    ]},
                    { id: 'bedir-savasi', name: 'Bedir Savaşı', color: 'bg-indigo-700', questions: [
                        { question: 'Müslümanlarla Mekkeli müşrikler arasında gerçekleşen ilk büyük savaş.' },
                        { question: 'Sayıca az olmalarına rağmen Müslümanların zafer kazandığı önemli savaş.' },
                        { question: 'İslam\'ın ilk zaferi olarak bilinen savaş.' }
                    ]},
                    { id: 'uhud-savasi', name: 'Uhud Savaşı', color: 'bg-pink-700', questions: [
                        { question: 'Müslümanların okçuların yerini terk etmesiyle zor durumda kaldığı savaş.' },
                        { question: 'Peygamberimizin Uhud Dağı\'nda okçuları yerleştirdiği ancak emre uyulmadığı için yaşanan savaş.' },
                        { question: 'Müslümanların büyük kayıplar verdiği ancak dersler çıkardığı savaş.' }
                    ]},
                    { id: 'hendek-savasi', name: 'Hendek Savaşı', color: 'bg-teal-700', questions: [
                        { question: 'Düşmanın şehre rahatça girebileceği tarafa büyük bir hendek kazma fikrinin Selman-ı Fârisî tarafından verildiği savaş.' },
                        { question: 'Medine\'nin etrafına hendek kazılarak savunma yapıldığı savaş.' },
                        { question: 'Müşrik ordusunun kuşatmasının uzun sürdüğü ve sonuçsuz kaldığı savaş.' }
                    ]},
                    { id: 'hudeybiye-antlasmasi', name: 'Hudeybiye Antlaşması', color: 'bg-orange-700', questions: [
                        { question: 'Mekkelilerle Müslümanlar arasında imzalanan ve Mekke\'nin fethine zemin hazırlayan barış antlaşması.' },
                        { question: 'İlk bakışta Müslümanların aleyhine gibi görünen ancak büyük hayırlar içeren antlaşma.' },
                        { question: 'Peygamberimizin stratejik dehasını gösteren önemli bir diplomatik başarı.' }
                    ]},
                    { id: 'mekkenin-fethi', name: 'Mekke\'nin Fethi', color: 'bg-cyan-700', questions: [
                        { question: 'Hudeybiye Barış Antlaşması\'nı bozan Mekkeli müşriklere karşı Peygamberimizin 630 yılında gerçekleştirdiği olay.' },
                        { question: 'Peygamberimizin kan dökmeden, genel af ilan ederek gerçekleştirdiği büyük zafer.' },
                        { question: 'Kâbe\'nin putlardan temizlendiği ve İslam\'ın Mekke\'de kesin olarak yayıldığı olay.' }
                    ]},
                    { id: 'veda-hutbesi', name: 'Veda Hutbesi', color: 'bg-lime-700', questions: [
                        { question: 'Peygamberimizin ilk ve son haccı olan "Veda Haccı"nda, Arafat\'ta yüz binden fazla Müslüman\'a hitaben yaptığı konuşma.' },
                        { question: 'İnsan hakları, eşitlik, adalet gibi evrensel mesajları içeren tarihi konuşma.' },
                        { question: 'Peygamberimizin vefatından kısa bir süre önce yaptığı son kapsamlı nasihatler.' }
                    ]},
                    { id: 'vefat', name: 'Vefat', color: 'bg-emerald-600', questions: [
                        { question: 'Peygamberimizin Miladi 632 yılında Medine\'de gerçekleşen vefatı.' },
                        { question: 'Peygamberimizin dünya hayatına veda ettiği olay.' },
                        { question: 'Müslümanlar için büyük bir hüzün kaynağı olan Peygamberimizin vefatı.' }
                    ]},
                    { id: 'ravza-i-mutahhara', name: 'Ravza-i Mutahhara', color: 'bg-rose-700', questions: [
                        { question: 'Mescid-i Nebi içinde Peygamberimizin kabri ile minberi arasındaki bölüme verilen ad.' },
                        { question: 'Cennet bahçelerinden bir bahçe olarak kabul edilen kutsal mekan.' },
                        { question: 'Medine\'de ziyaret edilen önemli yerlerden biri.' }
                    ]}
                ]
            },
            {
                id: 'unit2',
                name: 'Ünite 2: Kur\'an-ı Kerim\'de Peygamberimiz',
                bgColor: 'bg-green-100',
                concepts: [
                    { id: 'muhammed', name: 'Muhammed', color: 'bg-blue-600', questions: [
                        { question: 'Kur\'an-ı Kerim\'de Peygamber Efendimiz için kullanılan en yaygın isim.' },
                        { question: 'Peygamberimizin dedesi tarafından verilen ve "övülmüş" anlamına gelen isim.' },
                        { question: 'Kur\'an\'da dört yerde geçen Peygamberimizin ismi.' }
                    ]},
                    { id: 'ahmed', name: 'Ahmed', color: 'bg-green-600', questions: [
                        { question: 'Kur\'an-ı Kerim\'de Peygamber Efendimiz için kullanılan diğer bir isim.' },
                        { question: 'Hz. İsa\'nın İncil\'de müjdelediği Peygamberimizin ismi.' },
                        { question: '"Çok hamdeden, öven" anlamına gelen Peygamberimizin ismi.' }
                    ]},
                    { id: 'rahmeten-lil-alemin', name: 'Rahmeten lil-Alemin', color: 'bg-purple-600', questions: [
                        { question: 'Peygamberimizin bütün insanlığa ve alemlere rahmet olarak gönderildiğini ifade eden Kur\'anî ifade.' },
                        { question: 'Enbiya Suresi 107. ayette geçen, Peygamberimizin evrensel merhametini vurgulayan ifade.' },
                        { question: 'Peygamberimizin sadece Müslümanlara değil, tüm varlıklara karşı şefkatli olduğunu belirten sıfat.' }
                    ]},
                    { id: 'usve-i-hasene', name: 'Üsve-i Hasene', color: 'bg-red-600', questions: [
                        { question: 'Peygamberimizin hayatının her alanında Müslümanlara en güzel örnek olduğunu ifade eden kavram.' },
                        { question: 'Ahzab Suresi 21. ayette geçen ve Peygamberimizin örnek kişiliğini vurgulayan ifade.' },
                        { question: 'Peygamberimizin söz, fiil ve onaylarının Müslümanlar için rehber olması.' }
                    ]},
                    { id: 'itaat', name: 'İtaat', color: 'bg-yellow-600', questions: [
                        { question: 'Kur\'an-ı Kerim\'de Peygamberimize itaat etmenin, Allah\'a itaat etmekle eşdeğer olduğu belirtilen eylem.' },
                        { question: 'Peygamberimizin emir ve yasaklarına uymak.' },
                        { question: 'Kur\'an\'da sıkça vurgulanan, Peygamberimizin rehberliğine uymak.' }
                    ]},
                    { id: 'merhamet-ve-sefkat', name: 'Merhamet ve Şefkat', color: 'bg-indigo-600', questions: [
                        { question: 'Kur\'an-ı Kerim\'de Peygamberimizin insanlara karşı tutumunu tasvir eden özellikler.' },
                        { question: 'Tevbe Suresi 128. ayette geçen, Peygamberimizin müminlere karşı duyduğu derin acıma ve acıma duygusu.' },
                        { question: 'Peygamberimizin her canlıya karşı gösterdiği yumuşaklık ve anlayış.' }
                    ]},
                    { id: 'teblig', name: 'Tebliğ', color: 'bg-pink-600', questions: [
                        { question: 'Peygamberimizin Allah\'tan aldığı vahiyleri insanlara eksiksiz ve olduğu gibi ulaştırma görevi.' },
                        { question: 'Peygamberliğin temel görevlerinden biri olan, ilahi mesajı insanlara duyurma.' },
                        { question: 'Kur\'an\'ı ve İslam\'ın hükümlerini insanlara bildirme.' }
                    ]},
                    { id: 'tebyin', name: 'Tebyin', color: 'bg-teal-600', questions: [
                        { question: 'Peygamberimizin Kur\'an ayetlerini açıklama, detaylandırma ve yorumlama görevi.' },
                        { question: 'Kur\'an\'daki genel hükümleri somutlaştırma ve uygulama örnekleri gösterme.' },
                        { question: 'Peygamberimizin söz ve fiilleriyle Kur\'an\'ı anlaşılır kılma.' }
                    ]},
                    { id: 'hatemul-nebiyyin', name: 'Hâtemü\'n-Nebiyyîn', color: 'bg-orange-600', questions: [
                        { question: 'Peygamberimizin son peygamber olduğunu ifade eden Kur\'anî kavram.' },
                        { question: 'Peygamberlik mührü anlamına gelen ve ondan sonra peygamber gelmeyeceğini belirten sıfat.' },
                        { question: 'Ahzab Suresi 40. ayette geçen, Peygamberimizin peygamberler zincirinin son halkası olduğunu bildiren ifade.' }
                    ]},
                    { id: 'vahiy', name: 'Vahiy', color: 'bg-cyan-600', questions: [
                        { question: 'Allah\'ın (c.c.) peygamberlerine Cebrail aracılığıyla gönderdiği ilahi bilgiler.' },
                        { question: 'Peygamberlerin Allah ile iletişim kurma şekli ve ilahi mesajları alma süreci.' },
                        { question: 'Kur\'an-ı Kerim\'in kaynağı olan ilahi bildirim.' }
                    ]},
                    { id: 'kurani-mucize', name: 'Kur\'an (Mucize)', color: 'bg-lime-600', questions: [
                        { question: 'Peygamberimizin en büyük ve kalıcı mucizesi olarak kabul edilen ilahi kitap.' },
                        { question: 'Benzerinin getirilemeyeceği bildirilen, eşsiz belagat ve içerik sahibi kitap.' },
                        { question: 'Peygamberimizin risaletinin en büyük delili olan kutsal kitap.' }
                    ]},
                    { id: 'ummi', name: 'Ümmî', color: 'bg-emerald-600', questions: [
                        { question: 'Peygamberimizin okuma yazma bilmemesi özelliği.' },
                        { question: 'Risaletinin delillerinden biri olarak gösterilen, herhangi bir eğitim almamış olması.' },
                        { question: 'Allah\'tan aldığı vahyin kendi sözü olmadığını kanıtlayan özellik.' }
                    ]},
                    { id: 'salavat', name: 'Salavat', color: 'bg-rose-600', questions: [
                        { question: 'Kur\'an-ı Kerim\'de Peygamberimize yönelik saygı ve sevginin ifadesi olarak getirilmesi emredilen dua.' },
                        { question: '"Allahümme salli ala Muhammed" gibi ifadelerle Peygamberimize yapılan dua.' },
                        { question: 'Peygamberimizin anıldığı zamanlarda ona duyulan saygıyı gösteren ifade.' }
                    ]},
                    { id: 'sefaat', name: 'Şefaat', color: 'bg-fuchsia-600', questions: [
                        { question: 'Peygamberimizin kıyamet gününde Allah\'ın izniyle günahkâr müminler için af dilemesi yetkisi.' },
                        { question: 'Allah\'ın iznine bağlı olan ve Peygamberimize verilen özel bir yetki.' },
                        { question: 'Peygamberimizin ümmetine olan merhametinin bir göstergesi.' }
                    ]},
                    { id: 'uyarici-mujdeleyici', name: 'Uyarıcı ve Müjdeleyici', color: 'bg-violet-600', questions: [
                        { question: 'Peygamberimizin insanları yaptıkları hatalara karşı nazikçe uyarması ve iyi yaşam sürmeleri halinde cennete gideceklerini bildirmesi görevleri.' },
                        { question: 'Peygamberlerin insanlara baskı kurmadan, sadece doğru yolu göstererek ve güzel sonuçları müjdeleyerek yaptıkları görev.' },
                        { question: 'Kur\'an\'da Peygamberimizin temel görevlerinden biri olarak belirtilen özellik.' }
                    ]},
                    { id: 'risalet', name: 'Risalet', color: 'bg-amber-600', questions: [
                        { question: 'Peygamberimizin Allah\'tan aldığı vahyi insanlara ulaştırma ve tebliğ etme görevi.' },
                        { question: 'Peygamberlik görevi ve bu görevin getirdiği sorumluluklar.' },
                        { question: 'Peygamberimizin Allah\'ın elçisi olarak gönderilmesi.' }
                    ]},
                    { id: 'nur', name: 'Nur', color: 'bg-sky-600', questions: [
                        { question: 'Peygamberimizin Kur\'an\'da "Nur" olarak nitelendirilmesi.' },
                        { question: 'İnsanlığa yol gösteren, aydınlatan bir ışık olarak Peygamberimizin vasfı.' },
                        { question: 'Peygamberimizin getirdiği vahyin ve İslam\'ın aydınlatıcı özelliği.' }
                    ]},
                    { id: 'siratul-mustakim', name: 'Sırat-ı Müstakim', color: 'bg-gray-600', questions: [
                        { question: 'Peygamberimizin insanları davet ettiği "dosdoğru yol".' },
                        { question: 'Kur\'an ve Sünnet\'e uygun, Allah\'ın razı olduğu yaşam biçimi.' },
                        { question: 'Peygamberimizin insanlara gösterdiği doğru ve hak yol.' }
                    ]},
                    { id: 'ayet', name: 'Ayet', color: 'bg-blue-700', questions: [
                        { question: 'Kur\'an-ı Kerim\'in bölümlerine verilen ad.' },
                        { question: 'Allah\'ın sözlerini içeren ve Peygamberimize indirilen ilahi mesajların her bir parçası.' },
                        { question: 'Kur\'an\'da geçen ve bir anlam bütünlüğü taşıyan cümle veya cümleler topluluğu.' }
                    ]},
                    { id: 'sure', name: 'Sure', color: 'bg-green-700', questions: [
                        { question: 'Kur\'an-ı Kerim\'in ayetlerden oluşan bölümlerine verilen ad.' },
                        { question: 'Kur\'an\'da yer alan, belirli bir konu etrafında toplanmış ayetler grubu.' },
                        { question: 'Besmele ile başlayan ve belirli sayıda ayetten oluşan Kur\'an bölümü.' }
                    ]}
                ]
            },
            {
                id: 'unit3',
                name: 'Ünite 3: Peygamberimiz ve Gençler',
                bgColor: 'bg-purple-100',
                concepts: [
                    { id: 'genclere-onem', name: 'Gençlere Önem', color: 'bg-blue-600', questions: [
                        { question: 'Peygamber Efendimiz (s.a.v.)\'in gençleri toplumun geleceği ve dinamik gücü olarak görmesi.' },
                        { question: 'Peygamberimizin gençlere güvenmesi ve onlara önemli görevler vermesi.' },
                        { question: 'Peygamberimizin gençlerin enerjilerini doğru yöne kanalize etme çabası.' }
                    ]},
                    { id: 'hz-ali', name: 'Hz. Ali', color: 'bg-green-600', questions: [
                        { question: 'Peygamberimizin genç sahabilerden olup, kendisine ilmi konularda özel eğitim verdiği kişi.' },
                        { question: 'Peygamberimizin damadı ve amcasının oğlu.' },
                        { question: 'Genç yaşta İslam\'ı kabul eden ilk erkeklerden biri.' }
                    ]},
                    { id: 'sorumluluk-verme', name: 'Sorumluluk Verme', color: 'bg-purple-600', questions: [
                        { question: 'Peygamberimizin gençlere görev verirken onların yeteneklerine ve liyakatine dikkat etmesi.' },
                        { question: 'Peygamberimizin gençleri aktif hale getirmek için onlara önemli görevler yüklemesi.' },
                        { question: 'Gençlerin potansiyellerini ortaya çıkarmalarına fırsat tanıma.' }
                    ]},
                    { id: 'durustluk', name: 'Dürüstlük', color: 'bg-red-600', questions: [
                        { question: 'Peygamberimizin gençlere öğrettiği ahlaki değerlerden biri olan sözde ve davranışta doğru olma.' },
                        { question: 'Yalan söylememek, hile yapmamak gibi erdemleri içeren ahlaki ilke.' },
                        { question: 'Peygamberimizin gençlere kazandırmaya çalıştığı temel ahlaki özelliklerden biri.' }
                    ]},
                    { id: 'comertlik', name: 'Cömertlik', color: 'bg-yellow-600', questions: [
                        { question: 'Peygamberimizin gençlere öğrettiği, elindekini başkalarıyla paylaşma ve yardımseverlik özelliği.' },
                        { question: 'İnfak etme, ihtiyaç sahiplerine yardım etme gibi davranışları içeren ahlaki değer.' },
                        { question: 'Peygamberimizin gençlere kazandırmaya çalıştığı güzel ahlaklardan biri.' }
                    ]},
                    { id: 'hosgoru', name: 'Hoşgörü', color: 'bg-indigo-600', questions: [
                        { question: 'Peygamberimizin gençlere öğrettiği, farklı düşünce ve inançlara sahip insanlara anlayışla yaklaşma.' },
                        { question: 'Kendi görüşünden farklı olanları kabul etme ve onlara tahammül etme erdemi.' },
                        { question: 'Peygamberimizin gençlere kazandırdığı önemli bir toplumsal değer.' }
                    ]},
                    { id: 'ornek-olma', name: 'Örnek Olma', color: 'bg-pink-600', questions: [
                        { question: 'Peygamberimizin gençleri eğitirken kendi yaşantısıyla onlara rehberlik etmesi (üsve-i hasene).' },
                        { question: 'Söz ve fiilleriyle gençlere yol gösterme.' },
                        { question: 'Peygamberimizin ahlakının ve davranışlarının gençler için bir model teşkil etmesi.' }
                    ]},
                    { id: 'teblig-gorevi', name: 'Tebliğ Görevi', color: 'bg-teal-600', questions: [
                        { question: 'Genç sahabilerin İslam\'ı yeni bölgelere götürmek ve insanlara duyurmak için üstlendiği önemli rol.' },
                        { question: 'Peygamberimizin gençleri İslam\'ı yayma konusunda görevlendirmesi.' },
                        { question: 'Gençlerin cesaret ve fedakarlıkla İslam mesajını ulaştırması.' }
                    ]},
                    { id: 'usame-b-zeyd', name: 'Üsame b. Zeyd', color: 'bg-orange-600', questions: [
                        { question: 'Peygamberimizin genç yaşta orduya komutan tayin ettiği sahabi.' },
                        { question: 'Babası da komutan olan ve genç yaşına rağmen önemli bir göreve getirilen sahabi.' },
                        { question: 'Peygamberimizin gençlere olan güvenini gösteren bir örnek.' }
                    ]},
                    { id: 'ozguven', name: 'Özgüven', color: 'bg-cyan-600', questions: [
                        { question: 'Peygamberimizin gençlere gösterdiği ilgi ve sevginin, onların kendilerine inanmalarına katkı sağlaması.' },
                        { question: 'Peygamberimizin gençleri cesaretlendirerek onların potansiyellerini keşfetmelerine yardımcı olması.' },
                        { question: 'Gençlerin kendi yeteneklerine inanarak sorumluluk alabilme yetisi.' }
                    ]},
                    { id: 'ilim-ogrenme', name: 'İlim Öğrenme', color: 'bg-lime-600', questions: [
                        { question: 'Peygamberimizin gençleri bilgiye ve öğrenmeye teşvik etmesi.' },
                        { question: 'Ashab-ı Suffe gibi gençlerin ilim öğrenmek için Mescid-i Nebi\'de kalması.' },
                        { question: 'Peygamberimizin "İlim öğrenmek her Müslüman erkek ve kadına farzdır" hadisiyle gençleri yönlendirmesi.' }
                    ]},
                    { id: 'hz-muaz-b-cebel', name: 'Hz. Muaz b. Cebel', color: 'bg-emerald-600', questions: [
                        { question: 'Peygamberimizin genç yaşına rağmen Yemen\'e vali olarak gönderdiği sahabi.' },
                        { question: 'Peygamberimizin gençlere liderlik vasıflarını geliştirmeleri için fırsat tanıma.' },
                        { question: 'Genç yaşta önemli bir idari göreve getirilen ilim sahibi sahabi.' }
                    ]},
                    { id: 'istisare', name: 'İstişare', color: 'bg-rose-600', questions: [
                        { question: 'Peygamberimizin gençlerle fikir alışverişinde bulunması ve onların görüşlerine değer vermesi.' },
                        { question: 'Karar alma süreçlerinde gençlerin katılımını teşvik etme.' },
                        { question: 'Peygamberimizin liderlik anlayışında önemli bir yer tutan danışma ilkesi.' }
                    ]},
                    { id: 'ahlaki-degerler', name: 'Ahlaki Değerler', color: 'bg-fuchsia-600', questions: [
                        { question: 'Peygamberimizin gençlere dürüstlük, cömertlik, adalet, hoşgörü gibi öğrettiği temel prensipler.' },
                        { question: 'Gençlerin karakter gelişimini sağlamak için Peygamberimizin vurguladığı erdemler.' },
                        { question: 'Peygamberimizin "Ben ancak güzel ahlakı tamamlamak için gönderildim" hadisiyle gençlere öğütlediği değerler.' }
                    ]},
                    { id: 'sevgi-ve-sefkat', name: 'Sevgi ve Şefkat', color: 'bg-violet-600', questions: [
                        { question: 'Peygamberimizin gençlere karşı gösterdiği yumuşak ve anlayışlı tutum.' },
                        { question: 'Gençlerin kalbini kazanmada Peygamberimizin kullandığı etkili yöntem.' },
                        { question: 'Peygamberimizin gençlere olan derin sevgisi ve merhameti.' }
                    ]},
                    { id: 'enerjiyi-kanalize-etme', name: 'Enerjiyi Kanalize Etme', color: 'bg-amber-600', questions: [
                        { question: 'Peygamberimizin gençlerin dinamik ve coşkulu enerjilerini İslam\'a hizmet ve ilim öğrenme gibi faydalı alanlara yönlendirmesi.' },
                        { question: 'Gençlerin potansiyelini doğru ve yapıcı işlerde kullanmalarını teşvik etme.' },
                        { question: 'Peygamberimizin gençlerin gücünü olumlu yönde değerlendirme çabası.' }
                    ]},
                    { id: 'cesaret', name: 'Cesaret', color: 'bg-sky-600', questions: [
                        { question: 'Genç sahabilerin İslam uğruna zorluklara göğüs germeleri ve korkusuzca mücadele etmeleri.' },
                        { question: 'Peygamberimizin gençlere aşıladığı, hak yolunda korkusuzca ilerleme özelliği.' },
                        { question: 'Gençlerin İslam\'ı tebliğ ederken gösterdikleri yiğitlik.' }
                    ]},
                    { id: 'fedakarlik', name: 'Fedakarlık', color: 'bg-gray-600', questions: [
                        { question: 'Genç sahabilerin dinleri uğruna mallarını, canlarını ve yurtlarını feda etmeleri.' },
                        { question: 'Savaşlarda ve tebliğ faaliyetlerinde gösterdikleri özveri.' },
                        { question: 'Allah yolunda her türlü zorluğa katlanma.' }
                    ]},
                    { id: 'dini-bilinc', name: 'Dini Bilinç', color: 'bg-blue-700', questions: [
                        { question: 'Peygamberimizin gençlere ahiret bilinci ve dini sorumluluklarını öğretmesi.' },
                        { question: 'Gençlerin İslam\'ın temel prensiplerini anlamaları ve hayatlarına uygulamaları.' },
                        { question: 'Peygamberimizin gençleri dini konularda bilinçli ve duyarlı hale getirme çabası.' }
                    ]},
                    { id: 'toplumsal-katilim', name: 'Toplumsal Katılım', color: 'bg-green-700', questions: [
                        { question: 'Peygamberimizin gençleri toplumun aktif birer ferdi olmaya ve sosyal sorumluluklar üstlenmeye teşvik etmesi.' },
                        { question: 'Gençlerin sadece ibadetle değil, aynı zamanda toplumun sorunlarıyla ilgilenmeleri.' },
                        { question: 'Peygamberimizin gençleri toplumun her alanında faydalı olmaya yönlendirmesi.' }
                    ]}
                ]
            },
            {
                id: 'unit4',
                name: 'Ünite 4: En Güzel Örnek Peygamberimiz',
                bgColor: 'bg-yellow-100',
                concepts: [
                    { id: 'usve-i-hasene-genel', name: 'Üsve-i Hasene', color: 'bg-blue-600', questions: [
                        { question: 'Peygamberimizin hayatının her alanında Müslümanlara en güzel örnek olması.' },
                        { question: 'Ahzab Suresi 21. ayette geçen ve Peygamberimizin örnek kişiliğini vurgulayan ifade.' },
                        { question: 'Peygamberimizin söz, fiil ve onaylarının Müslümanlar için rehber olması.' }
                    ]},
                    { id: 'kurani-ahlak', name: 'Kur\'an Ahlakı', color: 'bg-green-600', questions: [
                        { question: 'Peygamberimizin örnek ahlakının temelini oluşturan en önemli kaynak.' },
                        { question: 'Hz. Aişe\'nin "Onun ahlakı Kur\'an idi" sözüyle ifade edilen durum.' },
                        { question: 'Peygamberimizin tüm davranışlarının Kur\'an\'ın ilkeleriyle uyumlu olması.' }
                    ]},
                    { id: 'el-emin-genel', name: 'El-Emin', color: 'bg-purple-600', questions: [
                        { question: 'Peygamberimizin dürüstlüğü ve güvenilirliği ile ilgili Mekke döneminde kendisine verilen lakap.' },
                        { question: 'Peygamberimizin emanete sadakatini ve sözünde durmasını ifade eden unvan.' },
                        { question: 'Mekke halkının kendisine verdiği "güvenilir kişi" anlamındaki lakap.' }
                    ]},
                    { id: 'adalet-genel', name: 'Adalet', color: 'bg-red-600', questions: [
                        { question: 'Peygamberimizin herkese, din, dil, ırk ayrımı yapmaksızın eşit ve tarafsız davranması.' },
                        { question: 'Hak sahibine hakkını verme ve zulme karşı durma ilkesi.' },
                        { question: 'Peygamberimizin yönetiminde ve ilişkilerinde temel aldığı prensip.' }
                    ]},
                    { id: 'hosgoru-affedicilik', name: 'Hoşgörü ve Affedicilik', color: 'bg-yellow-600', questions: [
                        { question: 'Peygamberimizin farklı düşünce ve inançlara sahip insanlara anlayışla yaklaşması ve düşmanlarını dahi affetmesi.' },
                        { question: 'Mekke\'nin fethinde genel af ilan etmesiyle gösterdiği özellik.' },
                        { question: 'Taif\'te taşlanmasına rağmen beddua etmemesiyle ortaya çıkan özelliği.' }
                    ]},
                    { id: 'aile-hayati', name: 'Aile Hayatı', color: 'bg-indigo-600', questions: [
                        { question: 'Peygamberimizin eşlerine karşı merhametli ve adil olması, çocuklarına sevgi ve şefkatle yaklaşması.' },
                        { question: 'Aile içinde istişareye önem vermesi ve örnek bir eş-baba olması.' },
                        { question: 'Müslümanlar için aile içi ilişkilerde rehber olan Peygamberimizin yaşantısı.' }
                    ]},
                    { id: 'komsuluk-iliskileri', name: 'Komşuluk İlişkileri', color: 'bg-pink-600', questions: [
                        { question: 'Peygamberimizin komşularının haklarına büyük önem vermesi ve onlara karşı iyi davranması.' },
                        { question: 'Cebrail\'in komşu hakkı konusunda o kadar çok tavsiyede bulunmasıyla ilgili hadis.' },
                        { question: 'Müslümanların sosyal ilişkilerinde örnek alması gereken davranış.' }
                    ]},
                    { id: 'sosyal-hayat', name: 'Sosyal Hayat', color: 'bg-teal-600', questions: [
                        { question: 'Peygamberimizin toplumun her kesimiyle ilgilenmesi, sorunlarına çözüm bulması ve toplumsal adaleti gözetmesi.' },
                        { question: 'Hasta ziyaretleri, cenaze törenlerine katılım gibi sosyal görevleri yerine getirmesi.' },
                        { question: 'Peygamberimizin aktif bir toplum lideri olması.' }
                    ]},
                    { id: 'tevazu', name: 'Tevazu', color: 'bg-orange-600', questions: [
                        { question: 'Peygamberimizin makamına rağmen sade bir hayat yaşaması, halkla iç içe olması ve kibirden uzak durması.' },
                        { question: 'Kendisini diğer insanlardan üstün görmemesi ve alçakgönüllü olması.' },
                        { question: 'Peygamberimizin mütevazı kişiliği.' }
                    ]},
                    { id: 'sabir-tevekkul', name: 'Sabır ve Tevekkül', color: 'bg-cyan-600', questions: [
                        { question: 'Peygamberimizin zorluklar ve sıkıntılar karşısında metanetli olması ve sonucunu Allah\'a bırakması.' },
                        { question: 'Taif yolculuğu, boykot gibi olaylarda gösterdiği dayanıklılık.' },
                        { question: 'Bir işi yaparken tüm gayreti gösterdikten sonra sonucunu Allah\'a bırakma.' }
                    ]},
                    { id: 'kanaatkarlik', name: 'Kanaatkarlık', color: 'bg-lime-600', questions: [
                        { question: 'Peygamberimizin israf ve savurganlıktan uzak durması, elindekiyle yetinmesi.' },
                        { question: 'Azla yetinme ve şükretme özelliği.' },
                        { question: 'Peygamberimizin sade yaşam tarzı.' }
                    ]},
                    { id: 'cevre-bilinci', name: 'Çevre Bilinci', color: 'bg-emerald-600', questions: [
                        { question: 'Peygamberimizin çevresine karşı duyarlılığı ve ağaç dikmeye teşvik etmesi.' },
                        { question: 'Doğayı koruma ve israf etmeme konusundaki hassasiyeti.' },
                        { question: 'Peygamberimizin ekolojik dengeye verdiği önem.' }
                    ]},
                    { id: 'ibadet-hayati', name: 'İbadet Hayatı', color: 'bg-rose-600', questions: [
                        { question: 'Peygamberimizin ibadetlerini içtenlikle, gösterişten uzak ve ihlasla yapması.' },
                        { question: 'Namaz, oruç gibi ibadetlerdeki samimiyeti ve derinliği.' },
                        { question: 'Müslümanlar için ibadetlerde örnek teşkil eden Peygamberimizin yaşantısı.' }
                    ]},
                    { id: 'muahat', name: 'Muahat', color: 'bg-fuchsia-600', questions: [
                        { question: 'Peygamberimizin Medine\'de Müslümanlar arasında kardeşliği ve birliği sağlamak için Muhacir ile Ensar\'ı kardeş ilan etmesi.' },
                        { question: 'İslam toplumunda dayanışmayı ve yardımlaşmayı pekiştiren uygulama.' },
                        { question: 'Medine döneminde kurulan kardeşlik antlaşması.' }
                    ]},
                    { id: 'emanet', name: 'Emanet', color: 'bg-violet-600', questions: [
                        { question: 'Peygamberimizin kendisine bırakılan emanetleri titizlikle koruması ve sahiplerine teslim etmesi.' },
                        { question: 'Hicret gecesi Hz. Ali\'yi yatağında bırakarak emanetleri sahiplerine vermesi.' },
                        { question: 'Peygamberimizin güvenilirliğini gösteren önemli bir özellik.' }
                    ]},
                    { id: 'tutarlilik', name: 'Tutarlılık', color: 'bg-amber-600', questions: [
                        { question: 'Peygamberimizin sözleri ile davranışları arasında çelişki bulunmaması.' },
                        { question: 'Söylediğini yapan, yaptığını söyleyen bir lider olması.' },
                        { question: 'Peygamberimizin güvenilirliğinin temelini oluşturan özellik.' }
                    ]},
                    { id: 'kararlilik', name: 'Kararlılık', color: 'bg-sky-600', questions: [
                        { question: 'Peygamberimizin hedeflerine ulaşmak için azimle çalışması ve zorluklar karşısında pes etmemesi.' },
                        { question: 'İslam\'ı tebliğde gösterdiği sebat ve azim.' },
                        { question: 'Liderlik vasıflarından biri olan, verdiği kararların arkasında durma.' }
                    ]},
                    { id: 'sadelik', name: 'Sadelik', color: 'bg-gray-600', questions: [
                        { question: 'Peygamberimizin yaşam tarzında gösterişten uzak durması ve basit bir hayat sürmesi.' },
                        { question: 'Yeme, içme, giyim ve barınmada aşırıya kaçmaması.' },
                        { question: 'Peygamberimizin mütevazı ve gösterişsiz yaşamı.' }
                    ]},
                    { id: 'yardimseverlik', name: 'Yardımseverlik', color: 'bg-blue-700', questions: [
                        { question: 'Peygamberimizin hastaları ziyaret etmesi, düşkünlere, yetimlere ve fakirlere yardım etmesi.' },
                        { question: 'Toplumun ihtiyaç sahiplerine karşı duyarlı olması.' },
                        { question: 'Peygamberimizin sosyal dayanışmaya verdiği önem.' }
                    ]},
                    { id: 'hak-hukuk', name: 'Hak ve Hukuk', color: 'bg-green-700', questions: [
                        { question: 'Peygamberimizin Veda Hutbesi\'nde insan hakları ve hukukun üstünlüğünü vurgulaması.' },
                        { question: 'Herkesin hakkına riayet etme ve adaleti tesis etme çabası.' },
                        { question: 'Peygamberimizin toplumda düzeni ve eşitliği sağlama ilkesi.' }
                    ]}
                ]
            },
            {
                id: 'unit5',
                name: 'Ünite 5: Sahabenin Fazileti',
                bgColor: 'bg-red-100',
                concepts: [
                    { id: 'sahabe', name: 'Sahabe', color: 'bg-blue-600', questions: [
                        { question: 'Peygamberimizi gören, ona iman eden ve Müslüman olarak vefat eden kişilere verilen genel ad.' },
                        { question: 'Peygamberimizin arkadaşları ve öğrencileri.' },
                        { question: 'İslam\'ın ilk neslini oluşturan mübarek topluluk.' }
                    ]},
                    { id: 'hz-ebu-bekir', name: 'Hz. Ebu Bekir', color: 'bg-green-600', questions: [
                        { question: 'İlk Müslümanlardan olan, Peygamberimizin en yakın dostu ve ilk halife.' },
                        { question: 'Sıddîk lakabıyla tanınan, Peygamberimizin hicret arkadaşı.' },
                        { question: 'Peygamberimizin vefatından sonra İslam devletinin başına geçen ilk kişi.' }
                    ]},
                    { id: 'hz-omer', name: 'Hz. Ömer', color: 'bg-purple-600', questions: [
                        { question: '"Faruk" lakabıyla tanınan, hak ile batılı ayırt etmedeki keskin zekasıyla bilinen ve ikinci halife.' },
                        { question: 'İslam devletinin sınırlarını genişleten ve adaletli yönetimiyle bilinen halife.' },
                        { question: 'Müslümanların güç kazanmasında önemli rol oynayan sahabi.' }
                    ]},
                    { id: 'hz-osman', name: 'Hz. Osman', color: 'bg-red-600', questions: [
                        { question: '"Zinnureyn" (İki Nur Sahibi) lakabıyla tanınan, Peygamberimizin iki kızıyla evlenen ve üçüncü halife.' },
                        { question: 'Kur\'an-ı Kerim\'i çoğaltarak İslam alemine yayılmasına öncülük eden halife.' },
                        { question: 'Haya ve cömertliğiyle bilinen sahabi.' }
                    ]},
                    { id: 'hz-ali', name: 'Hz. Ali', color: 'bg-yellow-600', questions: [
                        { question: 'Peygamberimizin amcasının oğlu ve damadı olan, ilmi ve cesaretiyle bilinen, dördüncü halife.' },
                        { question: 'Genç yaşta İslam\'ı kabul eden ve Peygamberimizin yatağına yatan sahabi.' },
                        { question: 'İlim kapısı olarak nitelendirilen büyük sahabi.' }
                    ]},
                    { id: 'ashab-i-suffe', name: 'Ashab-ı Suffe', color: 'bg-indigo-600', questions: [
                        { question: 'Medine\'de Mescid-i Nebi\'nin yanında kalan, kendilerini tamamen ilim öğrenmeye ve ibadete adayan fakir sahabiler.' },
                        { question: 'İslam\'ın ilk eğitim kurumlarından biri olarak kabul edilen Suffe\'de yetişen kişiler.' },
                        { question: 'Peygamberimizden doğrudan ders alan ve İslam\'ı öğrenmede örnek olan topluluk.' }
                    ]},
                    { id: 'sunnete-baglilik', name: 'Sünnet\'e Bağlılık', color: 'bg-pink-600', questions: [
                        { question: 'Sahabenin Peygamberimizin her söz ve davranışını dikkatle takip etmesi, öğrenmesi ve hayatlarına uygulaması.' },
                        { question: 'Peygamberimizin yaşantısını örnek alma ve ona uyma konusundaki titizlikleri.' },
                        { question: 'Sahabenin İslam\'ı yaşama biçimlerinin temelini oluşturan prensip.' }
                    ]},
                    { id: 'kuranin-toplanmasi', name: 'Kur\'an\'ın Toplanması', color: 'bg-teal-600', questions: [
                        { question: 'Sahabenin, özellikle Hz. Ebu Bekir ve Hz. Osman dönemlerinde, Kur\'an ayetlerinin bir araya getirilmesi ve mushaf haline getirilmesine öncülük etmesi.' },
                        { question: 'Vahiy katiplerinin yazdığı ayetlerin toplanarak kitap haline getirilmesi süreci.' },
                        { question: 'Kur\'an\'ın bozulmadan günümüze ulaşmasında sahabenin rolü.' }
                    ]},
                    { id: 'bilgi-aktarimi', name: 'Bilgi Aktarımı', color: 'bg-orange-600', questions: [
                        { question: 'Sahabenin Peygamberimizden öğrendikleri dini bilgileri, hadisleri ve uygulamaları sonraki nesillere eksiksiz ve doğru bir şekilde aktarması.' },
                        { question: 'İslam ilimlerinin temelini oluşturan rivayet zincirinin ilk halkasını teşkil etmeleri.' },
                        { question: 'Peygamberimizin mirasını gelecek nesillere ulaştırma görevini üstlenmeleri.' }
                    ]},
                    { id: 'hicret-sahabe', name: 'Hicret', color: 'bg-cyan-600', questions: [
                        { question: 'Sahabenin dinlerini hürriyetle yaşamak ve İslam\'ı yaymak amacıyla Mekke\'den Medine\'ye göç etmesi.' },
                        { question: 'Allah rızası için yurtlarını terk etme fedakarlığı.' },
                        { question: 'İslam tarihinde dönüm noktası olan büyük göç.' }
                    ]},
                    { id: 'muahat-sahabe', name: 'Muahat', color: 'bg-lime-600', questions: [
                        { question: 'Medine\'de Muhacir ve Ensar arasında kurulan kardeşlik antlaşması.' },
                        { question: 'Müslümanlar arasında dayanışma, yardımlaşma ve mal paylaşımını sağlayan uygulama.' },
                        { question: 'İslam toplumunda birlik ve beraberliği pekiştiren örnek davranış.' }
                    ]},
                    { id: 'fedakarlik-sahabe', name: 'Fedakarlık', color: 'bg-emerald-600', questions: [
                        { question: 'Sahabenin İslam uğruna mallarını, canlarını ve yurtlarını feda etmeleri.' },
                        { question: 'Savaşlarda ve tebliğ faaliyetlerinde gösterdikleri özveri.' },
                        { question: 'Allah yolunda her türlü zorluğa katlanma.' }
                    ]},
                    { id: 'ilim-ogrenme-sahabe', name: 'İlim Öğrenme', color: 'bg-rose-600', questions: [
                        { question: 'Sahabenin Peygamberimizden doğrudan ilim öğrenmeye büyük önem vermesi ve bu uğurda çaba göstermesi.' },
                        { question: 'Peygamberimizin meclislerinde bulunarak dini bilgileri bizzat edinmeleri.' },
                        { question: 'İslam ilimlerinin temelini atan ilk öğrenciler olmaları.' }
                    ]},
                    { id: 'dini-anlama-sahabe', name: 'Dini Anlama', color: 'bg-fuchsia-600', questions: [
                        { question: 'Sahabenin Peygamberimizin en yakın öğrencileri olarak dini en iyi anlayan ve uygulayan nesil olması.' },
                        { question: 'Kur\'an ve Sünnet\'i doğru bir şekilde yorumlama ve yaşama yeteneği.' },
                        { question: 'İslam\'ın ruhunu ve özünü kavrama konusundaki derinlikleri.' }
                    ]},
                    { id: 'cihad-sahabe', name: 'Cihad', color: 'bg-violet-600', questions: [
                        { question: 'Sahabenin İslam\'ı yaymak ve korumak için gösterdiği her türlü çaba ve mücadele.' },
                        { question: 'Allah yolunda malıyla ve canıyla savaşma.' },
                        { question: 'İslam\'ın tebliği ve savunmasında gösterdikleri azim.' }
                    ]},
                    { id: 'adalet-sahabe', name: 'Adalet', color: 'bg-amber-600', questions: [
                        { question: 'Sahabenin kendi aralarında ve diğer insanlarla ilişkilerinde adaleti gözetmeleri.' },
                        { question: 'Hz. Ömer\'in adaletli yönetimiyle öne çıkması.' },
                        { question: 'İslam toplumunda hak ve hukuka riayet etme.' }
                    ]},
                    { id: 'tevazu-sahabe', name: 'Tevazu', color: 'bg-sky-600', questions: [
                        { question: 'Sahabenin makamlarına rağmen alçakgönüllü olmaları ve kibirden uzak durmaları.' },
                        { question: 'Hz. Ebu Bekir\'in halife olmasına rağmen sade bir hayat sürmesi.' },
                        { question: 'Peygamberimizin ahlakını yansıtan önemli bir özellik.' }
                    ]},
                    { id: 'sabir-sahabe', name: 'Sabır', color: 'bg-gray-600', questions: [
                        { question: 'Sahabenin Mekke dönemindeki işkencelere ve zorluklara karşı gösterdiği dayanıklılık.' },
                        { question: 'İslam uğruna karşılaştıkları sıkıntılara metanetle göğüs germeleri.' },
                        { question: 'Peygamberimizin sabrını örnek almaları.' }
                    ]},
                    { id: 'sehadet-sahabe', name: 'Şehadet', color: 'bg-blue-700', questions: [
                        { question: 'Sahabenin Allah yolunda canlarını feda etmeleri ve şehitlik mertebesine ulaşmaları.' },
                        { question: 'Uhud, Bedir gibi savaşlarda gösterdikleri kahramanlık ve fedakarlık.' },
                        { question: 'İslam\'ın yayılması için canlarını ortaya koymaları.' }
                    ]},
                    { id: 'ornek-nesil', name: 'Örnek Nesil', color: 'bg-green-700', questions: [
                        { question: 'Sahabenin İslam\'ın ilk ve en iyi anlayan, yaşayan ve aktaran nesil olması.' },
                        { question: 'Peygamberimizin "Ashabım yıldızlar gibidir, hangisine uyarsanız hidayeti bulursunuz" hadisiyle övülen nesil.' },
                        { question: 'Tüm Müslümanlar için rehber ve model teşkil eden topluluk.' }
                    ]}
                ]
            }
        ];

        // HTML elementlerini seç
        const unitCardsContainer = document.getElementById('unitCardsContainer');
        const startQuizBtn = document.getElementById('startQuizBtn');
        const returnToHomePageBtn = document.getElementById('returnToHomePageBtn');
        const mainTitle = document.getElementById('mainTitle');
        const mainMenuScreen = document.getElementById('mainMenuScreen');
        const mainQuizContent = document.getElementById('mainQuizContent');
        const questionText = document.getElementById('questionText');
        const conceptBoxesDiv = document.getElementById('conceptBoxes');
        const feedbackDiv = document.getElementById('feedback');
        const nextQuestionBtn = document.getElementById('nextQuestionBtn');
        const resetQuizBtn = document.getElementById('resetQuizBtn');
        const returnToMainMenuFromQuizBtn = document.getElementById('returnToMainMenuFromQuizBtn');
        const timerDisplay = document.getElementById('timerDisplay');
        const showAnswerBtn = document.getElementById('showAnswerBtn');
        // const battleAnimationContainer = document.getElementById('battleAnimationContainer'); // Bu satır kaldırıldı

        let selectedUnitId = null;
        let currentQuestion = null;
        let askedQuestionsUniqueIds = [];
        let timerInterval;
        let timeLeft = 50;
        let currentIncorrectAttempts = 0;
        const MAX_INCORRECT_ATTEMPTS = 2;

        // Yardımcı Fonksiyon: Diziyi karıştır
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Özel Modal Mantığı
        const customModalOverlay = document.getElementById('customModalOverlay');
        const modalTitle = document.getElementById('modalTitle');
        const modalMessage = document.getElementById('modalMessage');
        const modalInput1 = document.getElementById('modalInput1');
        const modalInput2 = document.getElementById('modalInput2');
        const modalTextarea = document.getElementById('modalTextarea');
        const modalConfirmBtn = document.getElementById('modalConfirmBtn');
        const modalSaveBtn = document.getElementById('modalSaveBtn');
        const modalCancelBtn = document.getElementById('modalCancelBtn');

        function showModal(title, message, type, onConfirm, onCancel, input1Placeholder = '', input2Placeholder = '', textareaPlaceholder = '') {
            modalTitle.textContent = title;
            modalMessage.textContent = message;

            modalInput1.style.display = 'none';
            modalInput2.style.display = 'none';
            modalTextarea.style.display = 'none';
            modalConfirmBtn.style.display = 'none';
            modalSaveBtn.style.display = 'none';
            modalCancelBtn.style.display = 'inline-block';

            // Olay dinleyicilerini sıfırla
            modalConfirmBtn.onclick = null;
            modalSaveBtn.onclick = null;
            modalCancelBtn.onclick = null;
            modalCancelBtn.textContent = 'İptal'; // Metni sıfırla

            if (type === 'alert') {
                modalCancelBtn.textContent = 'Tamam';
                modalCancelBtn.onclick = () => {
                    hideModal();
                    if (onConfirm) onConfirm();
                };
            } else if (type === 'confirm') {
                modalConfirmBtn.style.display = 'inline-block';
                modalCancelBtn.textContent = 'İptal';
                modalConfirmBtn.onclick = () => {
                    hideModal();
                    if (onConfirm) onConfirm();
                };
                modalCancelBtn.onclick = () => {
                    hideModal();
                    if (onCancel) onCancel();
                };
            }
            customModalOverlay.style.display = 'flex';
        }

        function hideModal() {
            customModalOverlay.style.display = 'none';
            modalInput1.value = '';
            modalInput2.value = '';
            modalTextarea.value = '';
            modalConfirmBtn.onclick = null;
            modalSaveBtn.onclick = null;
            modalCancelBtn.onclick = null;
            modalCancelBtn.textContent = 'İptal';
        }

        // Oyun mantığı
        function startTimer() {
            clearInterval(timerInterval);
            timeLeft = 50;
            timerDisplay.textContent = timeLeft;
            timerDisplay.classList.remove('warning');

            timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = timeLeft;
                if (timeLeft <= 10) {
                    timerDisplay.classList.add('warning');
                }
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    feedbackDiv.textContent = `Süre doldu! Yanlış cevap hakkınız doldu. Sonraki soruya geçmek için "Sonraki Soru" butonuna basın.`;
                    feedbackDiv.classList.remove('success');
                    feedbackDiv.classList.add('error');
                    feedbackDiv.style.display = 'block';
                    disableConceptBoxes();
                    showAnswerBtn.disabled = true;
                    nextQuestionBtn.disabled = false;
                }
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
        }

        function getAvailableQuestions() {
            const selectedUnit = units.find(unit => unit.id === selectedUnitId);
            if (!selectedUnit) return [];

            let allQuestionsInUnit = [];
            selectedUnit.concepts.forEach(concept => {
                concept.questions.forEach((q, qIndex) => {
                    const baseConceptIdForQuestion = (selectedUnitId === 'all-units') ? concept.id : `${selectedUnitId}-${concept.id}`;
                    allQuestionsInUnit.push({
                        question: q.question,
                        correctConceptId: concept.id,
                        correctConceptName: concept.name,
                        uniqueQuestionId: `${baseConceptIdForQuestion}-${qIndex}`
                    });
                });
            });

            return allQuestionsInUnit.filter(q => !askedQuestionsUniqueIds.includes(q.uniqueQuestionId));
        }

        function displayQuestion() {
            stopTimer();
            feedbackDiv.style.display = 'none';
            feedbackDiv.textContent = '';
            conceptBoxesDiv.innerHTML = '';
            // Animasyon konteynerini temizle (kaldırıldığı için bu satır gereksiz)
            // battleAnimationContainer.innerHTML = '';
            nextQuestionBtn.disabled = true;
            showAnswerBtn.disabled = false;
            currentIncorrectAttempts = 0;

            const availableQuestions = getAvailableQuestions();

            if (availableQuestions.length === 0) {
                // Tüm sorular cevaplandı, sadece bilgilendir ve ana menüye dön
                showModal('Yarışma Bitti!', `Tüm soruları cevapladınız.`, 'alert', () => {
                    returnToMainMenuScreen();
                });
                return;
            }

            currentQuestion = shuffleArray(availableQuestions)[0];
            askedQuestionsUniqueIds.push(currentQuestion.uniqueQuestionId);

            questionText.textContent = currentQuestion.question;

            const selectedUnitObj = units.find(unit => unit.id === selectedUnitId);
            let allConceptsInSelectedUnit = selectedUnitObj.concepts;

            const correctConcept = allConceptsInSelectedUnit.find(c => c.id === currentQuestion.correctConceptId);
            if (!correctConcept) {
                console.error("Doğru kavram bulunamadı, ID:", currentQuestion.correctConceptId);
                return;
            }

            let conceptsForDisplay = [correctConcept];

            let potentialWrongAnswers = allConceptsInSelectedUnit.filter(concept => {
                if (concept.id === correctConcept.id) return false;

                const hasUnaskedQuestion = concept.questions.some((q, qIndex) => {
                    const questionUniqueId = (selectedUnitId === 'all-units') ? `${concept.id}-${qIndex}` : `${selectedUnitId}-${concept.id}-${qIndex}`;
                    return !askedQuestionsUniqueIds.includes(questionUniqueId);
                });
                return hasUnaskedQuestion;
            });

            potentialWrongAnswers = shuffleArray(potentialWrongAnswers);

            for (let i = 0; conceptsForDisplay.length < 10 && i < potentialWrongAnswers.length; i++) {
                if (!conceptsForDisplay.some(c => c.id === potentialWrongAnswers[i].id)) {
                    conceptsForDisplay.push(potentialWrongAnswers[i]);
                }
            }

            if (conceptsForDisplay.length < 10) {
                const conceptsAlreadyInDisplay = new Set(conceptsForDisplay.map(c => c.id));
                const trulyRemainingConcepts = allConceptsInSelectedUnit.filter(c => !conceptsAlreadyInDisplay.has(c.id));
                shuffleArray(trulyRemainingConcepts);
                for (let i = 0; conceptsForDisplay.length < 10 && i < trulyRemainingConcepts.length; i++) {
                    conceptsForDisplay.push(trulyRemainingConcepts[i]);
                }
            }

            conceptsForDisplay = shuffleArray(conceptsForDisplay);

            conceptsForDisplay.forEach(concept => {
                const conceptBox = document.createElement('div');
                conceptBox.id = concept.id;
                conceptBox.classList.add('concept-box', concept.color, 'cursor-pointer');
                conceptBox.innerHTML = `<span>${concept.name}</span>`;
                conceptBox.style.setProperty('--animation-duration', `${2 + Math.random() * 3}s`);
                conceptBox.style.setProperty('--animation-delay', `${Math.random() * 0.5}s`);
                conceptBox.style.setProperty('--translate-x', `${(Math.random() - 0.5) * 10}px`);
                conceptBox.style.setProperty('--translate-y', `${(Math.random() - 0.5) * 10}px`);
                conceptBox.onclick = () => checkAnswer(concept.id);
                conceptBoxesDiv.appendChild(conceptBox);
            });

            startTimer();
        }

        function checkAnswer(selectedConceptId) {
            stopTimer();
            const selectedBox = document.getElementById(selectedConceptId);

            if (selectedConceptId === currentQuestion.correctConceptId) {
                selectedBox.classList.add('correct');
                // Kullanıcının istediği geri bildirim metni
                feedbackDiv.textContent = `Doğru Cevap! ${currentQuestion.correctConceptName} tebrikler!`;
                feedbackDiv.classList.remove('error');
                feedbackDiv.classList.add('success');
                disableConceptBoxes(); // Tüm kutuları devre dışı bırak

                setTimeout(() => {
                    selectedBox.classList.remove('correct');
                    showAnswerBtn.disabled = true;
                    nextQuestionBtn.disabled = false;
                }, 1000); // Sadece vurgu süresi kadar bekleyip devam et
            } else {
                currentIncorrectAttempts++;
                selectedBox.classList.add('incorrect');

                if (currentIncorrectAttempts < MAX_INCORRECT_ATTEMPTS) {
                    feedbackDiv.textContent = `Yanlış cevap! ${MAX_INCORRECT_ATTEMPTS - currentIncorrectAttempts} hakkınız kaldı. Tekrar deneyin.`;
                    feedbackDiv.classList.remove('success');
                    feedbackDiv.classList.add('error');
                    setTimeout(() => {
                        selectedBox.classList.remove('incorrect');
                        startTimer();
                        const allConceptBoxes = document.querySelectorAll('.concept-box');
                        allConceptBoxes.forEach(box => {
                            box.onclick = () => checkAnswer(box.id);
                            box.classList.add('cursor-pointer');
                            box.style.pointerEvents = 'auto';
                        });
                        feedbackDiv.style.display = 'none';
                    }, 1000);
                } else {
                    feedbackDiv.textContent = `Yanlış cevap hakkınız doldu! Sonraki soruya geçmek için "Sonraki Soru" butonuna basın.`;
                    feedbackDiv.classList.remove('success');
                    feedbackDiv.classList.add('error');
                    disableConceptBoxes();
                    showAnswerBtn.disabled = true;
                    nextQuestionBtn.disabled = false;
                    setTimeout(() => {
                        selectedBox.classList.remove('incorrect');
                    }, 1000);
                }
            }
            feedbackDiv.style.display = 'block';
        }

        function disableConceptBoxes() {
            const conceptBoxes = document.querySelectorAll('.concept-box');
            conceptBoxes.forEach(box => {
                box.onclick = null;
                box.classList.remove('cursor-pointer');
                box.style.pointerEvents = 'none';
            });
        }

        function resetQuiz() {
            stopTimer();
            selectedUnitId = null;
            askedQuestionsUniqueIds = [];
            currentQuestion = null;
            currentIncorrectAttempts = 0;
            mainQuizContent.style.display = 'none';
            mainMenuScreen.style.display = 'flex';
            mainTitle.style.display = 'block';
            feedbackDiv.style.display = 'none';
            timerDisplay.textContent = '50';
            timerDisplay.classList.remove('warning');
            startQuizBtn.style.display = 'none';
            renderUnitCards();
        }

        function returnToMainMenuScreen() {
            stopTimer();
            mainQuizContent.style.display = 'none';
            mainMenuScreen.style.display = 'flex';
            mainTitle.style.display = 'block';
            selectedUnitId = null;
            askedQuestionsUniqueIds = [];
            currentIncorrectAttempts = 0;
            renderUnitCards();
            startQuizBtn.style.display = 'none';
            feedbackDiv.style.display = 'none';
            timerDisplay.textContent = '50';
            timerDisplay.classList.remove('warning');
        }

        // Olay Dinleyicileri
        nextQuestionBtn.addEventListener('click', displayQuestion);
        resetQuizBtn.addEventListener('click', () => {
            showModal('Yarışmayı Yeniden Başlat', 'Mevcut yarışmayı sıfırlamak istediğinizden emin misiniz? Bu işlem mevcut ilerlemenizi silecektir.', 'confirm', () => {
                resetQuiz();
            }, () => {
                // İptal edilirse bir şey yapma
            });
        });
        returnToMainMenuFromQuizBtn.addEventListener('click', returnToMainMenuScreen);

        showAnswerBtn.addEventListener('click', () => {
            stopTimer();
            disableConceptBoxes();
            showAnswerBtn.disabled = true;
            const correctBox = document.getElementById(currentQuestion.correctConceptId);
            correctBox.classList.add('correct');
            feedbackDiv.textContent = `Doğru cevap: ${currentQuestion.correctConceptName}`;
            feedbackDiv.classList.remove('success');
            feedbackDiv.classList.add('error');
            feedbackDiv.style.display = 'block';
            nextQuestionBtn.disabled = false;
            setTimeout(() => {
                correctBox.classList.remove('correct');
            }, 1000);
        });

        // Ana Menü Mantığı
        function renderUnitCards() {
            unitCardsContainer.innerHTML = '';
            units.forEach(unit => {
                const unitCardElement = document.createElement('div');
                unitCardElement.classList.add('unit-card', unit.bgColor);
                unitCardElement.textContent = unit.name;
                unitCardElement.dataset.unitId = unit.id;

                unitCardElement.addEventListener('click', () => {
                    const currentSelected = document.querySelector('.unit-card.selected');
                    if (currentSelected) {
                        currentSelected.classList.remove('selected');
                    }
                    unitCardElement.classList.add('selected');
                    selectedUnitId = unit.id;
                    startQuizBtn.style.display = 'block';
                });
                unitCardsContainer.appendChild(unitCardElement);
            });

            const allUnitsCard = document.querySelector('.unit-card[data-unit-id="all-units"]');
            if (allUnitsCard) {
                unitCardsContainer.appendChild(allUnitsCard);
            }
        }

        startQuizBtn.addEventListener('click', () => {
            if (selectedUnitId) {
                mainMenuScreen.style.display = 'none';
                mainTitle.style.display = 'none';
                mainQuizContent.style.display = 'flex';
                askedQuestionsUniqueIds = [];
                displayQuestion();
            } else {
                showModal('Ünite Seçilmedi', 'Lütfen bir ünite seçerek yarışmayı başlatın.', 'alert');
            }
        });

        returnToHomePageBtn.addEventListener('click', () => {
            window.location.href = 'https://ozeme42.github.io/yunus/index.html';
        });

        // Uygulama yüklendiğinde
        document.addEventListener('DOMContentLoaded', () => {
            const allUnitsExist = units.some(unit => unit.id === 'all-units');

            units = units.filter(unit => unit.id !== 'additional-concepts-unit');

            if (!allUnitsExist) {
                const allConceptsCombined = [];
                units.forEach(unit => {
                    unit.concepts.forEach((concept, conceptIndex) => {
                        const uniqueConceptId = `${unit.id}-${concept.id}`;
                        allConceptsCombined.push({
                            ...concept,
                            id: uniqueConceptId,
                            originalConceptId: concept.id,
                            unitId: unit.id
                        });
                    });
                });

                units.push({
                    id: 'all-units',
                    name: 'Tüm Üniteler',
                    concepts: shuffleArray(allConceptsCombined),
                    bgColor: 'bg-gray-200'
                });
            }

            selectedUnitId = null;

            renderUnitCards();
            mainQuizContent.style.display = 'none';
            mainMenuScreen.style.display = 'flex';
            mainTitle.style.display = 'block';
        });
    </script>
</body>
</html>
